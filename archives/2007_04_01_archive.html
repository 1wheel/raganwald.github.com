<html> 
<head>
        
        <title>raganwald: 04/07</title>

	<link rel="stylesheet" type="text/css" href="/blog.css" />
	<link rel="stylesheet" type="text/css" href="/sunburst.css" />

	<!-- Meta Information --> 
	<!-- put "BlogMetaData" between angle-dollar and dollar angle  to restore defaults -->

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="MSSmartTagsPreventParsing" content="true" />
	<meta name="generator" content="Blogger" />

	<link rel="alternate" type="application/atom+xml" title="Raganwald Posts + Links(Atom)" href="http://feeds.raganwald.com/raganwald" />
	<!-- <link rel="alternate" type="application/rss+xml" title="Raganwald Posts + Links (RSS 2.0)" href="http://feeds.raganwald.com/raganwald" /> -->
	<link rel="alternate" type="application/atom+xml" title="Raganwald Posts Only (Atom)" href="http://feeds.raganwald.com/raganwald_articles" />
	<link rel="alternate" type="application/atom+xml" title="Raganwald on Twitter (Atom, experimental)" href="http://twitter.com/statuses/user_timeline/14165291.atom" />

	<link rel="service.post" type="application/atom+xml" title="Raganwald" href="https://www.blogger.com/atom/7618424" />
	<link rel="service.post" type="application/atom+xml" title="Raganwald (Atom 1.0)" href="http://www.blogger.com/feeds/7618424/posts/full" />

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.blogger.com/rsd.g?blogID=7618424" />



    <link rel="openid.server" href="http://www.myopenid.com/server " />
    <link rel="openid.delegate" href="http://reginald.braithwaite.myopenid.com/" />
    <meta http-equiv="X-XRDS-Location" content="http://reginald.braithwaite.myopenid.com/xrds" />




	<style type="text/css">
	@import url("http://www.blogger.com/css/blog_controls.css");
	@import url("http://www.blogger.com/dyn-css/authorization.css?blogID=7618424");
	</style>

	<!-- /Meta Information -->
</head>

<body>

	<div id="leftcontent">
			<img src="http://i.minus.com/ioSY4FTZKVCwz.png"
			width="350" height="150" border="0" alt="raganwald" title="raganwald 2008" align="middle"/><br/>
<!--
<div style="background-color:black; text-align: center; color: white; padding: 10px 10px 10px 10px;">
<p><font size="+1">Arthur C. Clarke</font><font size="-1">, 1917&thinsp;&ndash;&thinsp;2008
<br/>&ldquo;If we have learned one thing from the history of invention and discovery,
<br/>it is that, in the long run&mdash;and often in the short one&mdash;the most daring prophecies seem laughably conservative.&rdquo;</font>
</p></div>
-->
		
			
				<div class="DateHeader">Monday, April 30, 2007</div>
			

			<div class="Post"><a name="5827856679907907928">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/if-you-reside-in-usa-please-dont-read.html" title="permanent link">If you reside in the USA, please don't read this post</a></span>
					<div style="clear:both;"></div><strong>Update</strong>: <a href="http://raganwald.github.com/2007/05/128-bit-programming-challenge.html">The 128-bit Programming Challenge</a>!<br /><br />You probably don&rsquo;t want to be caught with the following hexadecimal codes in your possession: by downloading this post in your browser you have <em>already</em> participated in their transmission!<br /><br />If you are in the USA, please stop reading immediately.<br /><br />Jump to another web page. Clear your cache. Do not read further.<br /><br /><blockquote>09 F9 11 02 9D 74 E3 5B D8 41 56 C5 63 56 88 C0</blockquote><br />While you&rsquo;re protecting yourself against these codes, you should also be careful to remove any code from your system that generates <a href="http://en.wikipedia.org/wiki/Irrational_number">irrational numbers</a>. Such numbers must contain these codes in their expansion.<br /><br />It is reasonable, therefore, to assume that a program for generating an irrational number such as <i>Ï€</i> is a program for generating these codes, and therefore it is not safe to have this type of program on your computer.<br /><br />Update: while you&rsquo;re at it, you should probably be wary of programs that search for large primes. You never know when a prime number will be declared <a href="http://en.wikipedia.org/wiki/Illegal_prime">illegal</a>! <br /><br />This warning provided as a public service by your Canadian friend.<div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/if-you-reside-in-usa-please-dont-read.html" title="permanent link">11:31 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Sunday, April 29, 2007</div>
			

			<div class="Post"><a name="37004754037577415">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/writing-programs-for-people-to-read.html" title="permanent link">Writing programs for people to read</a></span>
					<div style="clear:both;"></div><blockquote>Programs must be written for people to read, and only incidentally for machines to execute.</blockquote><div style="text-align: right;">Abelson &amp; Sussman, <a href="http://www.amazon.com/gp/redirect.html?ie=UTF8&amp;location=http%3A%2F%2Fwww.amazon.com%2FStructure-Interpretation-Computer-Programs-Engineering%2Fdp%2F0262011530%2Fsr%3D8-1%2Fqid%3D1163785017%3Fie%3DUTF8%26s%3Dbooks&amp;tag=raganwald001-20&amp;linkCode=ur2&amp;camp=1789&amp;creative=9325">Structure and Interpretation of Computer Programs</a><br></div><br /><br />This is about writing programs in a style that favours human comprehension over the convenience of the machine.<sup>1</sup><br /><br />Norbert Winklareth recently raised the question of <a href="http://agilerenaissance.com/2007/04/25/on-semantic-distance-and-computer-languages.aspx" title="On Semantic Distance and Computer Languages">minimizing the <em>semantic distance</em> between the program as written and the solution to the problem as conceived by the programmer</a>.<br /><br />Norbert was talking about comparing the capabilities of programming languages, but the idea of semantic distance is also useful for comparing programs to each other. Although this is not the entirety of writing good programs, let&#8217;s examine this idea in more detail.<br /><br />Indeed, let&#8217;s look at one very simple, very powerful, way of writing programs that are as semantically close to the solution in the mind of the programmer.<br /><br /><strong>Code that resembles its result</strong><br /><br />A template is a blueprint for describing the result you want, where instead of embedding data inside executable code, you turn things inside out and embed executable code inside data.<br /><br />Templates are very popular in programs that generate markup:<br /><br /><pre class="textmate-source sunburst"><span class="text text_xml text_xml_xsl"><br /><span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">HTML</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span><br />    <span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">HEAD</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span><br />        <span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">TITLE</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span>Hello World<span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;/</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">TITLE</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span><br />    <span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;/</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">HEAD</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span><br /><br />    <span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">BODY</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span><br />        Hello, Example. Today's date and time is <span class="source source_java source_java_embedded source_java_embedded_xml"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_begin punctuation_section_embedded_begin_xml">&lt;%=</span><span class="storage storage_type storage_type_java">Now</span>()<span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_end punctuation_section_embedded_end_xml">%&gt;</span></span>.<br />    <span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;/</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">BODY</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span><br /><span class="meta meta_tag meta_tag_xml"><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&lt;/</span><span class="entity entity_name entity_name_tag entity_name_tag_localname entity_name_tag_localname_xml">HTML</span><span class="punctuation punctuation_definition punctuation_definition_tag punctuation_definition_tag_xml">&gt;</span></span><br /><br /></span></pre><br />It&#8217;s obvious what result you want, much more obvious than if you tried the following:<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br />    page = <span class="storage storage_type storage_type_java">Page</span>();<br />    head = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="storage storage_type storage_type_java">Head</span>();<br />    title = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="storage storage_type storage_type_java">Title</span>();<br />    title.setText(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>Hello World<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>)<br />    head.add(title);<br />    page.add(head);<br />    body = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="storage storage_type storage_type_java">Body</span>();<br />    preamble = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">StringBuffer</span>();<br />    preamble.append(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>Hello, Example. Today's date and time is <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br />    preamble.append(<span class="support support_type support_type_built-ins support_type_built-ins_java">Time</span>.now().toString());<br />    preamble.append(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>.<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br />    body.add(preamble.toString());<br />    page.add(body);<br /><br /></span></pre><br />This code produces its results as a <em>side effect</em> of its execution. The code itself doesn&#8217;t directly describe the result, whereas the first example directly describes the result we wish to generate.<br /><br />Sometimes you need to generate the result as a side effect of the code. You needn&#8217;t write code as opaque as the answer above, instead you can <a href="http://raganwald.github.com/2007/04/rails-style-creators-in-java-or-how-i.html">organize your code so that its form resembles the form of the result you are generating</a>, such as this <a href="http://script.aculo.us/" title="script.aculo.us - web 2.0 javascript">Scriptaculous</a> code:<br /><br /><pre><code>element = Builder.node('div',{id:'ghosttrain'},[<br />   Builder.node('div',{className:'controls',style:'font-size:11px'},[<br />     Builder.node('h1','Ghost Train'),<br />     "testtext", 2, 3, 4,<br />     Builder.node('ul',[<br />       Builder.node('li',{className:'active', onclick:'test()'},'Record')<br />     ]),<br />   ]),<br />]);<br /><br /></code></pre><br />That produces this HTML:<br /><br /><pre><code>&lt;div id="ghosttrain"&gt;<br />    &lt;div class="controls" style="font-size:11px"&gt;<br />        &lt;h1&gt;Ghost Train&lt;/h1&gt;<br />        testtext234<br />        &lt;ul&gt;<br />            &lt;li class="active" onclick="test()"&gt;Record&lt;/li&gt;<br />        &lt;/ul&gt;<br />    &lt;/div&gt;<br />&lt;/div&gt;<br /><br /></code></pre><br />Just like the template example, you don&#8217;t need to run a simulation in your head to try to figure out what the code produces.<br /><br /><strong>Is this just cancer of the semicolon?</strong><br /><br />What&#8217;s the difference between these two code samples?<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br />    preamble = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">StringBuffer</span>();<br />    preamble.append(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>Hello, Example. Today's date and time is <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br />    preamble.append(<span class="support support_type support_type_built-ins support_type_built-ins_java">Time</span>.now().toString());<br />    preamble.append(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>.<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br /><br /></span></pre><br />&#8230;and&#8230;<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br />    <span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>Hello, Example. Today's date and time is #{Time.now}.<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span><br /><br /></span></pre><br />Is the second just syntactic sugar for the first? No. It&#8217;s more than <strong>just</strong> syntactic sugar. People have a habit of saying &#8220;syntactic sugar&#8221; in a dismissive way. It&#8217;s another argument that since an underlying language is <a href="http://en.wikipedia.org/wiki/Turing_completeness" title="Turing completeness - Wikipedia, the free encyclopedia">Turing Equivalent</a>, there is no need for a particular language feature.<br /><br />Not all language features are just syntactic sugar. True syntactic sugar features are <em>local</em> features: you can replace the feature with some other equivalent code without having to change a bunch of stuff elsewhere.<br /><br /><a href="http://raganwald.github.com/2007/02/haskell-ruby-and-infinity.html">Lazy evaluation</a> and garbage collected memory management are not syntactic sugar: they require wholesale changes to the underlying model of computation to work. The abbreviated <code>for</code> loop in Java 1.5 <em>is</em> syntactic sugar: you can translate each loop into the equivalent old-style iterator loop without any additional support. For that matter, Java <a href="http://java.sun.com/j2se/1.5.0/docs/guide/language/enums.html"><code>enums</code></a> are also syntactic sugar, they&#8217;re a way to write the Type Safe Enum idiom with less boilerplate.<br /><br />Okay, non-local features are not syntactic sugar. When is a local feature &#8220;just&#8221; syntactic sugar and when is it something more than that?<br /><br />Let&#8217;s compare these two language features. Consider this Smalltalk code:<br /><br /><pre class="textmate-source sunburst"><span class="source source_java-props"><br />window<br /><span class="keyword keyword_other keyword_other_java-props">       position</span><span class="punctuation punctuation_separator punctuation_separator_key-value punctuation_separator_key-value_java-props">:</span> 80@80;<br /><span class="keyword keyword_other keyword_other_java-props">       extent</span><span class="punctuation punctuation_separator punctuation_separator_key-value punctuation_separator_key-value_java-props">:</span> 320@90;<br /><span class="keyword keyword_other keyword_other_java-props">       backcolor</span><span class="punctuation punctuation_separator punctuation_separator_key-value punctuation_separator_key-value_java-props">:</span> Color blue;<br /><span class="keyword keyword_other keyword_other_java-props">       caption</span><span class="punctuation punctuation_separator punctuation_separator_key-value punctuation_separator_key-value_java-props">:</span> 'My Blue Test Window'.<br /><br /></span></pre><br />This shows a series of &#8220;cascading messages&#8221; to the same receiver. It saves you having to type the word &#8220;window&#8221; again, and it is a lot easier to read, because it lets you <a href="http://raganwald.github.com/2007/04/rails-style-creators-in-java-or-how-i.html">group messages that obviously belong together</a>.<br /><br />And earlier, we saw:<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br />    <span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>Hello, Example. Today's date and time is #{Time.now}.<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span><br /><br /></span></pre><br />This is <em>String Interpolation</em>.<sup>2</sup> It&#8217;s an &#8220;abbreviation&#8221; for a longer sequence of <code>appends</code> onto a <code>StringBuffer</code>.<br /><br />The difference between these two trivial cases is that the first example doesn&#8217;t change your mental model of what&#8217;s going on when you read the code: you&#8217;re simply sending a bunch of messages to the <code>window</code>.<br /><br /><div class="book"><hr/><em><a name="evtst|a|0672328844" href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0672328844"><img src="http://raganwald.github.com/uploaded_images/the_ruby_way.jpg" border="0"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><br><br><a name="evtst|a|0672328844" href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0672328844">The Ruby Way</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"> is the perfect second Ruby book for serious programmers. The Ruby Way contains more than four hundred examples explaining how to do everything from distribute Ruby with Rinda to dynamic programming techniques just like these.<hr/><br><br></em></div>The second example is different in a very important way: honestly, when you read the second example, do you think &#8220;<em>Aha! Start with a string, get Time.now(), append it to that string, then append a period</em>&#8221;?<br /><br />No way! You think &#8220;<em>A String with Time.now() stuck in it</em>.&#8221;<br /><br />That&#8217;s a huge difference mentally, it&#8217;s not just shorter, it&#8217;s <em>semantically closer</em> to your mental model of the result you&#8217;re trying to achieve.<br /><br /><strong>Wrapping up code that resembles its result</strong><br /><br />In summary, one way to write code that is comprehensible is to make sure that the form of the code matches the data the code generates. This is a very general principle, it can be found in web templates (like PHP and ASP pages), markup builder libraries, and even String or List Interpolation.<br /><br />Features that support this style of writing code are more than simple syntactic sugar, because they alter the reader&#8217;s mental model, lowering the semantic distance between the code and the code&#8217;s result.<br /><br /><em>Bonus! Order now, and we&#8217;ll throw in these free Domain Specific Languages!</em><br /><br />We saw that organizing code so that it resembles the result it generates lowers the semantic distance between the code and the solution. We saw two ways to do this: we can use templates or interpolation (if our language permits interpolation) to produce data, and where templates won&#8217;t work we can structure our code to resemble its result.<br /><br />Well, we needn&#8217;t stop there. <a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html" title="An Approach to Composing Domain-Specific Languages in Ruby">Domain-specific languages</a> can provide this exact benefit.<br /><br />The general purpose of a DSL is to write programs, or parts of programs, where the form of the code matches the mental model of domain experts or programmers. And here is one specific use for a DSL: to write code that closely matches the result it generates.<br /><br /><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html#lcir">List Comprehensions</a> model lists after mathematical notation. <code>list { [x, y, x * y] }.given(:x =&gt; 1..12, :y =&gt; 1..12)</code> directly describes a list of multiplicands and results.<br /><br /><code>(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])</code> is a regular expression that matches dates.<sup>3</sup> Do you think it is hard to read? What would happen if you &#8220;compile&#8221; that expression into procedural code with side effects? Which program would be easier to understand, debug, and modify?<br /><br />There are many valuable uses for DSLs. One of them is to create programs that closely resemble the results achieve, such as the HTML builder we see earlier, list comprehensions, and regular expressions. DSLs can increase human comprehension by representing the desired result directly.<br /><br /><em>And if you call in the next fifteen minutes, you&#8217;ll membership in the Pattern Matching family at no extra cost!</em><br /><br />There&#8217;s another significant opportunity for writing code that increases human comprehension. We saw how to write code where the form of the code resembles its result. You can also write code where the form of the code resembles <em>the data it consumes</em>.<br /><br />In ML, patterns allow us to make our functions resemble the different values they consume:<br /><br /><pre><code>fun factorial 0 = 1<br />    | factorial n = n * factorial (n - 1)<br /><br /></code></pre><br />If you are not familiar with pattern matching, and especially with how languages like ML and Haskell combine patterns with their type checking system, maybe today is the day to spend a little time looking into this powerful idea for making comprehensible programs.<br /><br /><hr /><br /><ol><li>In my personal experience, &#8220;favouring human comprehension&#8221; does not mean favouring readability over writability&#8212;in order to write a program that solves a problem, I have to understand the solution, so comprehensibility applies to the act of composing <em>and</em> of reading programs by humans.<br /><br />Now about machines: In this day and age, &#8220;The convenience of the machine&#8221; is often a way of saying, &#8220;the convenience of the layer of abstraction just below your program.&#8221; In a sense, every layer of abstraction above the silicon is a kind of virtual machine.<br /><br />&#8220;Remember, it&#8217;s all software, it just depends on when you crystallize it.&#8221;&#8212;Alan Kay, <a href="http://www.folklore.org/StoryView.py?project=Macintosh&amp;story=Creative_Think.txt&amp;characters=Alan%20Kay&amp;sortOrder=Sort%20by%20Date">as quoted by Andy Hertzfeld</a></li><br /><li>List Interpolation actually predates String Interpolation, but most people recognize String Interpolation. Lispers have a little thing called a <a href="http://practical-scheme.net/wiliki/schemexref.cgi?quasiquote">quasiquote</a> or <a href="http://cl-cookbook.sourceforge.net/macros.html#LtohTOCentry-2">backquote</a> that builds lists or vectors in a template form.</li><br /><li>Early feedback suggested this is a poor example of a regular expression, because it looks obtuse. I could have selected something much simpler, however I wanted something that really would be <i>incredibly</i> obtuse if you tried to code it procedurally. (Not counting using built-in library functions for parsing dates, of course).<br /><br />The point is that this regex <i>is</i> readable, and you can see out all of the special cases, right where they belong in their place in the pattern. If readers can post some imperative code that does the same thing in a more readable form, that would be a very interesting lesson.</li></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/popular.html">popular</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/writing-programs-for-people-to-read.html" title="permanent link">9:57 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Wednesday, April 25, 2007</div>
			

			<div class="Post"><a name="7215014502099622853">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/rails-style-creators-in-java-or-how-i.html" title="permanent link">Rails-style creators in Java, or, how I learned to stop worrying and love anonymous inner classes</a></span>
					<div style="clear:both;"></div>Let&#8217;s begin with a well-known problem: creating a <code>Map</code> that is to be pre-populated with a few values. Here is some na&iuml;ve code that creates a Map and then puts two values into it:<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br /><span class="storage storage_modifier storage_modifier_java">final</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">Map</span><span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&lt;</span><span class="support support_type support_type_built-ins support_type_built-ins_java">String</span>, <span class="support support_type support_type_built-ins support_type_built-ins_java">Object</span><span class="keyword <br />keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&gt;</span> mm = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">HashMap</span><span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&lt;</span><span class="support support_type support_type_built-ins support_type_built-ins_java">String</span>, <span class="support support_type support_type_built-ins support_type_built-ins_java">Object</span><span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&gt;</span>();<br />mm.put(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>foo<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>, <span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>Strive To Finish Up<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br />mm.put(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>bar<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>, <span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>Public House<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br /><br /></span></pre><br />Although this works, the problem with the na&iuml;ve code is that it does not say with conviction that the two <code>put</code> calls are part of the creation of the <code>Map</code>. If you move code around, it&#8217;s easy to drop a line. This code is <em>literal</em>, but it is not <a href="http://en.wikipedia.org/wiki/Literate_programming">literate</a>. <br /><br />Most Java programmers<sup>1</sup> are familiar with the Map Initializer Idiom:<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br /><span class="storage storage_modifier storage_modifier_java">final</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">Map</span><span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&lt;</span><span class="support support_type support_type_built-ins support_type_built-ins_java">String</span>, <span class="support support_type support_type_built-ins support_type_built-ins_java">Object</span><span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&gt;</span> m = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">HashMap</span><span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&lt;</span><span class="support support_type support_type_built-ins support_type_built-ins_java">String</span>, <span class="support support_type support_type_built-ins support_type_built-ins_java">Object</span><span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&gt;</span>() {{<br />    put(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>bar<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>, <span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>saloon<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br />    put(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>bash<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>, <span class="constant constant_numeric constant_numeric_java">7</span>);<br />}};<br /><br /></span></pre><br />This creates a new <code>Map</code> and populates it with two members. This is a big improvement. The initialization is clearly embedded in the line of code that creates the Map. Thanks to a small <a href="http://java.sun.com/docs/books/tutorial/java/javaOO/initial.html">syntax hack</a>, it is (by Java standards) concise.<br /><br />If you&rsquo;re into the details, it actually creates a new anonymous inner class that extends <code>HashMap</code>. The inner class doesn&rsquo;t add any new instance members, but it does contain an initializer: code between braces is run when instances are initialized. That&rsquo;s why there are double braces: the outer set delineates the body of the anonymous inner class, the inner set delineates the initializer block.<br /><br />Note that your new Map isn&rsquo;t exactly equal to any HashMap, because it has a different class. That <a href="http://raganwald.github.com/2007/04/what-does-barbara-liskov-have-to-say.html">sometimes matters</a>.<br /><br /><strong>POJOs</strong><br /><br />Many Java programmers labour with applications where the original architect wielded the Golden POJO Hammer: absolutely everything in the application looked like a POJO nail. I work with one such code base: it is obviously a traditional Procedural application. Getting anything done involves calling a global procedure and passing in a bunch of arguments.<br /><br />The original architects worked for one of those Global Services companies, and you can&#8217;t charge hundreds of dollars an hour<sup>2</sup> writing programs that our grandparents would recognize from the sixties. So to add a layer of <acronym title="Object Obfuscation">OO</acronym>, they turned every procedure call into a method, so a simple call like:<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br /><span class="storage storage_modifier storage_modifier_java">final</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">BigDecimal</span> balance = <span class="storage storage_type storage_type_java">AccountModule</span>.getAccountBalance(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>12345-678<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br /><br /></span></pre><br />became:<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br /><span class="storage storage_modifier storage_modifier_java">final</span> <span class="storage storage_type storage_type_java">BalanceDoer</span> doer = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="storage storage_type storage_type_java">BalanceDoer</span>();<br />doer.setAccountNumber(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>12345-678<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br />doer.doit();<br /><span class="storage storage_modifier storage_modifier_java">final</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">BigDecimal</span> balance = doer.getBalance();<br /><br /></span></pre><br />(The nice thing about using this &#8220;OO Style&#8221; is that you get named parameters and multiple return values. I shall leave it to the static type checking enthusiasts to point out the drawbacks of this approach.)<br /><br />Well, we can use the same initializer idiom with POJOs like <code>BalanceDoer</code> (although you may have to move <code>doit()</code> outside of the initializer if you need checked exceptions):<br /><br /><pre class="textmate-source sunburst"><span class="source source_java"><br /><span class="storage storage_modifier storage_modifier_java">final</span> <span class="storage storage_type storage_type_java">BalanceDoer</span> doer = <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="storage storage_type storage_type_java">BalanceDoer</span>() {{<br />    setAccountNumber(<span class="string string_quoted string_quoted_double string_quoted_double_java"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_java">"</span>12345-678<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_java">"</span></span>);<br />    doit();<br />}};<br /><span class="storage storage_modifier storage_modifier_java">final</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">BigDecimal</span> balance = doer.getBalance();<br /><br /></span></pre><br /><br /><div class="book"><br /><hr/><a name="evtst|a|0262561158" href="http://www.amazon.com/gp/product/0262561158?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0262561158"><img src="http://raganwald.github.com/uploaded_images/a_little_java-777624.jpg" border="0"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0262561158" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><br><br><em><a name="evtst|a|0262561158" href="http://www.amazon.com/gp/product/0262561158?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0262561158">A Little Java, a Few Patterns</a> is brought to you by the authors of <a name="evtst|a|0262560992" href="http://www.amazon.com/gp/product/0262560992?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0262560992">The Little Schemer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0262560992" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1">, a book that teaches recursion and first-class functions: it is no surprise to discover that their book about Java eschews the same old, same old Hello World approach in favour of teaching deep ideas about Object-Oriented design and Pattern-Oriented design using Java as the language of instruction.<hr></em></div>Again, you get a more literate snippet of code: the initialization and invocation all belong together, and you have put them together. If you move this around, you won&#8217;t drop an important line by mistake. And you get to save some keystrokes if there are a lot of fields to initialize.<br /><br />If you dare to use <code>protected</code> fields in POJOs (this is heresy to the &#8220;lock everything down so that other programmers subclassing your stuff can&#8217;t actually change anything&#8221; zealots), you can even write <code>accountNumber = "12345-678";</code> in the initializer instead of using a setter.<br /><br />I prefer that form, it looks a lot more like what you are trying to say: this field has this value for this <code>doit</code> call. That may be a matter of taste, or I may be overlooking something important.<br /><br />Remember, your new object is an instance of an anonymous inner class, not of the original POJO class. This matters greatly if you test for class membership with <code>equals</code> instead of substitutability with <code>instanceof</code>.<br /><br /><strong>What does this have to do with Rails?</strong><br /><br />This is where we could go off on a long essay about how using things like Lisp, Smalltalk, and Ruby on Rails opens your mind to possibilities. That when you get used to <code>MyModel.create(:foo =&gt; 'Shove That Fish Under')</code>, you look for ways to make your Java code easier, and so forth.<br /><br />But honestly, you knew that already, didn&#8217;t you?<br /><br /><em>Update: <a href="http://raganwald.github.com/2007/04/writing-programs-for-people-to-read.html">Writing programs for people to read</a>.</em><br /><div style="clear: both;"></div><hr/><br /><ol><li>Where by &#8220;most,&#8221; I mean those who haven&#8217;t been hiding under the &#8220;Java-programs-must-only-contain-approved&reg;-design-patterns: all-other-idioms-are-considered-hard-to-read-by-mediocre-colleagues&#8221; rock.<br /><br />In my experience, that is the majority of good programmers. If reading blogs convinces you otherwise, remember that many of the best people are too busy building good stuff to write about building good stuff.<br /><br /><em>Update: A commenter expressed some surprise that this is a well-known idiom. Have a look at <a href="http://www.c2.com/cgi/wiki?DoubleBraceInitialization">Double Brace Initialization</a>.</em><br /><br />The other Java people, the ones with time on their hands, or the ones that consider themselves &#8220;too good to program,&#8221; are the ones that write posts explaining why Java programs must be dumbed down to the lowest common denominator. I also blog. Draw your own conclusions from the evidence.</li><br /><li>Not <a href="http://www.kuro5hin.org/story/2005/9/27/95759/4240">this</a> company, although that&#8217;s an amusing post.</li><br /></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/java.html">java</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/rails-style-creators-in-java-or-how-i.html" title="permanent link">10:10 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Saturday, April 21, 2007</div>
			

			<div class="Post"><a name="6639944999372948108">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/we-dont-need-no-stinkin-scientific.html" title="permanent link">We don't need no stinkin' Scientific Method</a></span>
					<div style="clear:both;"></div><em>Update I:</em><br /><br /><strike>This post has been removed.<br /><br />Originally, it was a critique of <a href="http://www.cs.utexas.edu/~arvindn/hughes/">Does Functional Programming Really Matter?</a>. However, since I wrote the original post, the authors have added a disclaimer&mdash;<em>this is not a real attempt at a scientific paper&mdash;it's just a class project. Speaking for myself, I didn't believe the conclusions of this paper even when I wrote it, and doubly so now</em>&mdash;to their document.<br /><br />Under the circumstances, there is nothing left to dispute and I have removed my words.<br /><br />I&rsquo;ve been asked why I didn&rsquo;t leave the critique on line so that people can &ldquo;see what the fuss was all about.&rdquo; Here&rsquo;s the thing: now that the document has that disclaimer front and centre, the most interesting things to talk about have to do with Universities and grades and intellectual rigor and a bunch of other things that are not about programming.<br /><br />Since this is a programming blog... this was an easy decision. If the original document was not written in earnest, it&rsquo;s no longer of interest to me.</strike><br /><br /><em>Update II:</em><br /><br />All right, all right, I give. Here&rsquo;s what I originally wrote, more or less. Remember, when I wrote this there was no disclaimer on the original article, so I was under the impression that the authors actually believed what they were saying (imagine that), and that the authors were writing a paper to academic standards.<br /><br />It turns out that&rsquo;s not the case, so now I&rsquo;m the one making disclaimers. The following represented my view given the information available at the time. Now that I have new information, my belief is that the paper is a <a href="http://en.wikipedia.org/wiki/NOOP">NOOP</a>: It says, in effect, &ldquo;the following is not true: X, Y, Z.&rdquo; Such a statement is neither supportable nor refutable.<br /><br />Anyhoo, here&rsquo;s what I still have of the original post:<br /><br /><hr/><br /><strong>We don&rsquo;t need no stinkin&rsquo; Scientific Method</strong><br /><br />Here&#8217;s a paper worth reading: &ldquo;<a href="http://www.cs.utexas.edu/~arvindn/hughes/">Does Functional Programming Really Matter?</a> <em>Two Approaches to Comparing Functional and Object-Oriented Programming</em>.&rdquo;<br /><br />The authors show how the important ideas in <a href="http://www.math.chalmers.se/~rjmh/Papers/whyfp.html" title="Why Functional Programming Matters">Why Functional Programming Matters</a> can be reproduced in Java programs.<br /><br />Let me summarize the paper:<br /><br /><blockquote>Java is Turing Complete. Therefore, all of the ideas in FP can be reproduced in Java. We show this by Greenspunning the important ideas in WhyFP. In essence, we show how to write a poorly specified, buggy implementation, of half of Haskell in Java.<br />  <br />We discover that Java is a cumbersome language for implementing functional programming. Instead of stopping right there, we show our bias by saying that writing programs in an object-oriented language is superior to a purely functional approach, but excuse our problems by saying that Java is at fault, not the premise of embedding FP in OOP.<br />  <br />We do not give examples of embedding FP in other OOP languages that might have radically different models, such as Ruby, SmallTalk, Self, Dylan, Ocaml, or CLOS, leaving the reader to perform their own experimentation. But we claim that a mixed approach is obviously superior to a pure FP approach.</blockquote><br /><br />Despite the fact that the document is formulated in a pseudo-academic style, I personally conclude this is junk science. I don&#8217;t argue with the authors&#8217; conclusions: I enjoy writing mixed programs in Ruby, and on this very blog <a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html" title="Why Why Functional Programming Matters Matters">I showed how to emulate lazy evaluation using objects</a>.<br /><br />I do think it&rsquo;s valuable to show techniques like this. I think it reaches out to the <a href="http://raganwald.github.com/2006/10/are-we-blub-programmers.html" title="Are we Blub programmers?">Blub</a> community and shows them that you can expand your horizons without having to throw away everything you&rsquo;ve learned about your current programming language.<br /><br />If it gets even one person to read <a href="http://www.math.chalmers.se/~rjmh/Papers/whyfp.html">WhyFP</a> for themselves, it&rsquo;s a net win to share these thoughts with the world. <br /><br />But conducting research with a bias, performing an experiment that disproves your conjecture, then hand waving the experiment&#8217;s results away is <em>not</em> science. It&rsquo;s just an <em>opinion</em>, nothing more, no different than the stuff I write here in <a href="http://raganwald.github.com">raganwald</a>.<br /><br />The value of the authors&rsquo; academic experience ought to be to <i>teach them how to do basic scientific research</i>.<br /><br />Where is the study conducted on carefully balanced groups, some who complete a task in pure idiomatic Java, some who complete the same task in Haskell, and some who mix techniques?<br /><br />Where are the tables showing comparative program lengths, running times, average number of bugs needing correction, or other hard metrics comparing programs to each other?<br /><br />This &ldquo;paper&rdquo; should not be confused with science.<div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/we-dont-need-no-stinkin-scientific.html" title="permanent link">8:54 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Friday, April 20, 2007</div>
			

			<div class="Post"><a name="5553321805526654890">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/recursion.html" title="permanent link">Recursion</a></span>
					<div style="clear:both;"></div>In a certain University&#8217;s Computer Science program, you have a choice between following a &#8220;Theoretical Computer Science&#8221; track and a &#8220;Computer Engineering&#8221; track. The theoretical track starts with Scheme, moves into ML and Haskell, and drops into languages like <a href="http://www.latrobe.edu.au/philosophy/phimvt/joy.html">Joy</a> along the way for constructing certain proofs.<br /><br />The practical track is a fairly standard <a href="http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html" title="The Perils of JavaSchools - Joel on Software">JavaSchools</a> approach, starting with Java, moving smoothly into Java with generics, and finishing with a big XML bang.<br /><br />Most students entering the program have no trouble selecting the best track for themselves. The vast majority take the engineering course, mostly motivated by the promise of <a href="http://raganwald.github.com/2005/07/why-you-need-degree-to-work-for-bigco.html">being sent into the bowels of BigCo on work terms</a>. They pack into cavernous lecture halls and memorize design patterns, then spend days typing up verbose &#8220;Hello World&#8221; programs on their Dell laptops. The highly nerd-oriented remainder tend to jump into the theory track. They&#8217;re the ones reading &#8220;<a href="http://scienceblogs.com/goodmath/" title="Good Math, Bad Math">Good Math, Bad Math</a>&#8221; over WiFi on their MacBooks.<br /><br />A lonely few don&#8217;t know quite what to do. They might want to start a company, they might want to become consultants, and they enjoy a little recreational computing. They&#8217;re the ones who read <a href="http://raganwald.github.com/" title="raganwald">raganwald</a>, as a matter of fact. To help them out, the administration has constructed a little aptitude test.<br /><br />They are placed in a testing hall, and each applicant is given two numbered envelopes. They are told that each envelope contains instructions. They are to follow them as best they can. The proctor calls out &#8220;Open the first envelope,&#8221; and they get started.<br /><br />Inside is a piece of paper torn into large shards. The paper has writing on it, but you can&#8217;t read the instructions without piecing the paper back together. The students busy themselves with the puzzle, and in a few minutes almost all have fit the pieces back together and can read the single sentence on the page: &#8220;open the second envelope and follow its instructions.&#8221;<br /><br />Well, this is a time limited examination and they immediately open the second envelope. Inside is a single sheet of paper with writing on it. And do you know what? Most of the applicants follow its instructions: they write their name and student number on the back of the paper and hand it into the proctor. These students are immediately sent into the Computer Engineering track, where they go on to be fine members of our profession: intelligent and practical.<br /><br />A few, however, open the second envelope and their eyes light up immediately. Without pausing, they tear the page into strips, <em>reducing it to a problem they have already solved</em>!<br /><br />The proctor guides these students gently from the room, and they are marked down for Theoretical Computer Science.<br /><br /><a href="http://worsethanfailure.com/Articles/And-We-Got-Sheena.aspx">And we got Sheena</a><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/recursion.html" title="permanent link">4:02 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			

			<div class="Post"><a name="7531368886235536689">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/99-of-programmers-are-law-abiding.html" title="permanent link">99% of programmers are law-abiding citizens...</a></span>
					<div style="clear:both;"></div>When dispensing advice, people often pluck the proportion &#8220;99%&#8221; out of the air as a way of saying &#8220;overwhelmingly likely.&#8221; As in:<br /><ul><li>99% of the web applications out there should use an RDBMS as their back end store, not some roll-your-own persistence mechanism, or;</li><br /><li>Iteration works just fine for 99% of the things you do with collections, or;</li><br /><li>99% of businesses should run on lock-in, proprietary operating systems and platforms.</li></ul><br />Now 99% is obviously a junk number, just like <a href="http://raganwald.github.com/2007/03/thank-you-for-writing-such-heartfelt.html" title="Thank you for writing such a heartfelt critique of the Fizzbuzz screening question">199/200</a>. But let&#8217;s hand wave and say that it&#8217;s close enough to the truth. What does that mean?<br /><br />For example, if you&#8217;re deciding how to build persistence into a web application, what does &#8220;99%&#8221; tell us about using an RDBMS? I&#8217;d say, not very much. For starters, if you build seventy web application in your entire career, there&#8217;s a fifty-fifty chance one of them should have used something other than an RDBMS.<br /><br />That tells me that you can&#8217;t discard other options and just say that &#8220;every web application should use an RDBMS.&#8221; 99% is a lot of them, but not so many that we can afford to ignore the 1%.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/0671657135?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0671657135"><img border="0" src="http://raganwald.github.com/uploaded_images/society_of_mind.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=0671657135" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br /><a href="http://www.amazon.com/gp/product/0671657135?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0671657135">Society of Mind</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=0671657135" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is Marvin Minsky&rsquo;s legendary explanation of how the human brain solves problems. It&rsquo;s a fascinating book, not least because of its unusual structure: lasvishly illustrated with diagrams, each page is a self-contained chapter and links between ideas form a dense network rather than a linear chain.<br /><br /></div>If we were buying one hundred stocks, we would do very well if ninety-nine of them make money and one loses&#8230; unless the one loser loses us more money than the other ninety-nine make for us. When it comes to technology choices, we don&#8217;t just make a single wild bet (&#8220;every application will have an RDBMS&#8221;). We have the option of investigating the application and our options before making a choice.<br /><br />So when I read a SWAG like &#8220;iteration works just fine for 99% of the things you do with collections,&#8221; I make a mental note to look for the 1% of the cases where iteration doesn&rsquo;t work.<br /><br />They may be few and far between, but they&#8217;ll pop up enough to make knowing how to use map, reduce, and recursion worthwhile.<br /><br />That being said, &#8220;99% of businesses should run on lock-in, proprietary operating systems and platforms&#8221; is a very interesting case. There&#8217;s really very little cost in learning how to roll your own persistence for the cases where an RDBMS is not the right choice (even if you need <a href="http://raganwald.github.com/2007/04/haskell-not-just-for-language-weenies.html" title="Don't have a COW, man? What Haskell teaches us about writing Enterprise-scale software">transactional semantics</a>). And it is surprisingly easy to use map, reduce, and recursion&#8230; it turns out to be <a href="http://raganwald.github.com/2006/12/giles-bowkett-turns-language-elitism.html" title="Giles Bowkett turns language elitism upside down">easier than iteration, not harder</a>.<br /><br />But learning entire platforms <em>is</em> an expensive proposition. It may make sense to focus on one platform where you can accumulate high expertise. After all, a programming language takes <a href="http://norvig.com/21-days.html" title="Teach yourself programming in ten years">ten years</a> to master, can an entire OS and its ecosystem be any easier? And even if it is possible to learn a new platform on the fly, employers may prefer to <a href="http://www.joelonsoftware.com/articles/LordPalmerston.html" title="Lord Palmerston on programming">hire for experience rather than pay you to learn</a>.<br /><br />That doesn&#8217;t tell me that you should go with the 99% solution. The 1% of companies out there that are best served with other technologies still need to hire employees, engage suppliers, and purchase software that runs on their systems. Game theory tells us that the optimum strategy for a worker, contractor, or supplier is to roll a one hundred sided die and pick the 1% platform if they roll a &#8220;one.&#8221;<br /><br />What I find really interesting is that the marketplace is highly inefficient. Given one platform having 99% share, far more than 99% of the people will choose to &#8220;specialize&#8221; in the 99% solution, creating a commodity marketplace. The very few that serve the 1% of the market enjoy disproportionally higher salaries and profits.<br /><br />For this reason, when I read that 99% of the web applications should use an RDBMS, I am very interested in the 1% that shouldn&#8217;t&#8230; and figuring out how I can manoeuvre myself into a position to build one. And the news that one company has a near-monopolistic lock on the business operating system business? I consider this an opportunity for those of us comfortable with the alternatives.<br /><br />So the next time you hear the magic words, &#8220;99% of&#8230;&#8221;, I encourage you to do as I do: start asking questions about the other one percent.<div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/99-of-programmers-are-law-abiding.html" title="permanent link">1:59 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Thursday, April 19, 2007</div>
			

			<div class="Post"><a name="4728928250155545449">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/pop-culture-lives-in-present-it-doesnt.html" title="permanent link">Pop culture lives in the present, it doesn't really live in the future or want to know about great ideas from the past</a></span>
					<div style="clear:both;"></div><blockquote>In the last few years I&#8217;ve been asking computer scientists and programmers whether they&#8217;ve ever typed <a href="http://www.google.ca/search?q=engelbart">E-N-G-E-L-B-A-R-T</a> into Google&mdash;and none of them have. I don&#8217;t think you could find a physicist who has not gone back and tried to find out what Newton actually did. It&#8217;s unimaginable. Yet the computing profession acts as if there isn&#8217;t anything to learn from the past, so most people haven&#8217;t gone back and referenced what <a href="http://en.wikipedia.org/wiki/Douglas_Engelbart">Engelbart</a> thought.<br /><br />The things that are wrong with the Web today are due to this lack of curiosity in the computing profession. And it&#8217;s very characteristic of a pop culture. Pop culture lives in the present; it doesn&#8217;t really live in the future or want to know about great ideas from the past.<br /><br />I&#8217;m saying there&#8217;s a lot of useful knowledge and wisdom out there for anybody who is curious, and who takes the time to do something other than just executing on some current plan. Cicero said, &#8220;Who knows only his own generation remains always a child.&#8221; People who live in the present often wind up exploiting the present to an extent that it starts removing the possibility of having a future.<br /></blockquote><br /><div style="text-align: right;">&#8212;Alan Kay: <a href="http://www.cioinsight.com/print_article2/0,1217,a=200162,00.asp">The PC Must Be Revampedâ€”Now</a>, via discuss.joelonsoftware.com.</div><br />What other treasure troves of useful knowledge and wisdom are out there? Please post suggestions in the comments! (By the way, you can embed HTML anchors in comments, so don&rsquo;t be shy about including links).<div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/pop-culture-lives-in-present-it-doesnt.html" title="permanent link">1:57 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Wednesday, April 18, 2007</div>
			

			<div class="Post"><a name="2756320424559787889">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/yeomanry-and-exploding-brains.html" title="permanent link">Yeomanry and Exploding Brains</a></span>
					<div style="clear:both;"></div><em>Note: I wrote this post very quickly last evening, in an almost stream-of-conciousness style. I had just endured some particularly frustrating client issues, and I really, really wanted to focus on a few bright moments that I had enjoyed that day. You know, trying to be a <a href="http://raganwald.github.com/2007/03/programmers-are-sages.html">good dog</a>.<br /><br />After publishing it, I felt unsatisfied with the post. It didn&#8217;t feel like I was saying or thinking anything particularly new, just the same old, same old thing about stretching the mind and looking for the elusive &#8220;quality without a name&#8221; that lies behind well-written software.</em><br /><br /><em>So I yanked it and went home. I was talking with a friend who writes for a living, and she quoted a great aphorism: &#8220;All writing is rewriting.&#8221; She suggested I rework it, not discard it. So here it is again, and I hope to rework it until I&#8217;m satisfied. The first major change will probably be to cut it in half.<br /><br />We&#8217;ll see about the rest.</em><br /><hr><br />I finished reading <a id="lnx2" name="evtst|a|026256114X" href="http://www.amazon.com/gp/product/026256114X?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=026256114X">The Little MLer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=026256114X" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"> this morning. This is a <strong>wonderful</strong> book. It&#8217;s obviously valuable if you want to learn something about SML or Ocaml. But having read it, I&#8217;d argue that it&#8217;s a great introduction to strongly typed functional languages, period.<br /><br />In fact, it&#8217;s probably the very best first book to read before learning Haskell if you haven&#8217;t already used a language that combines first-class functions and strong, static typing. If you read this first, you can concentrate on lazy evaluation and monads without having to grok currying and other first-class functional ideas at the same time.<br /><br /><strong>Stars, Arrows, and Elegance</strong><br /><br />Two things jumped out at me this morning. The first was chapter eight, &#8220;Bows and Arrows.&#8221; This was an introduction to currying and partial function application. When I say it that way, it sounds rather dry. But it rolled along quite pleasantly. The material will be familiar to anyone with a passing familiarity with the idea of a <a href="http://raganwald.github.com/2007/01/closures-and-higher-order-functions.html" title="Closures and Higher-Order Functions">function returning a function</a>. It has the same ideas you&#8217;ll find in <a id="lnx0" name="evtst|a|0262011530" href="http://www.amazon.com/gp/product/0262011530?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0262011530">Structure and Interpretation of Computer Programs</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0262011530" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1">, but delivered with static typing.<br /><br />This alone is worth the price of the book: I came to the subject with an impoverished experience set: I had used latently typed languages like Scheme and Ruby, as well as static and declaratively typed languages like C++ and Java. Although I knew &#8220;intellectually&#8221; how languages like Ocaml and Haskell deliver some of the power of Scheme along with the benefits of compile-time type checking, there is no substitute for walking through the examples to spark the &#8220;Aha!&#8221; feeling. Incredibly, chapter eight got <em>better</em>. It finished with a real bang:<br /><br />The examples in the chapter constructed various functions that took multiple arguments, then constructed their equivalents by combining smaller functions with partial evaluation. Then it closed with <strong>The Eighth Moral</strong>:<br /><br /><blockquote>Replace stars by arrows to reduce the number of values consumed and to increase the generality of the function defined.</blockquote><br />In other words, first-class functions let you break monolithic functions that take a lot of arguments into smaller components that can be combined and recombined. This is a deep idea in writing programs. We often see the tension between programs as collections of small pieces that fit together and black boxes that are configured by means of switches and dials on the outside.<br /><br />This is a good tension: we call the black box approach &#8220;abstraction&#8221; and we call the combinatory approach &#8220;bottom-up programming.&#8221; Both produce programs that are expressed economically, but the black box does so by sweeping the complexity &#8220;under the carpet&#8221; and bottom-up programming does so by identifying and combining the simple constituent elements of a program in an economical way.<br /><br />I think of black box abstractions like inventing new nouns for new ideas. A web server? We&#8217;ll call that a &#8220;Fizbuhlsweepnik.&#8221; A REST server? We&#8217;ll call that a &#8220;Harkonnensmelt.&#8221; Whereas I think of bottom-up programming as inventing smaller nouns, verbs, adjectives, and adverbs, so we can say a &#8220;web server&#8221; or a &#8220;REST server&#8221; or even a &#8220;Caching REST server.&#8221; Being able to combine the small words gives us more to say with much less effort. (I am not a linguist, so this argument is suspect!)<br /><br /><a href="http://gilesbowkett.blogspot.com/" title="Giles Bowkett">Giles Bowkett</a> nailed this idea when <a href="http://gilesbowkett.blogspot.com/2006/12/what-if-there-are-no-gods.html">he wondered whether languages like Scheme are actually <em>easier</em> to learn than languages like Java</a>.<sup>1</sup> This makes a lot of sense from the perspective of simplicity. Pure Scheme is based on just five axiomatic &#8220;special forms&#8221; plus macros to build almost everything else out of the five axioms. That&#8217;s a lot easier to learn than a language that tries to provide the same power with a plethora of knobs and switches like <code>package</code>, <code>static</code>, and <code>main</code>.<br /><br />This tells us something about ecosystems versus languages. Lately, quite reasonable people have wondered aloud whether the ecosystem of frameworks and libraries are more important than the languages themselves. As we&#8217;re beginning to see with multiple languages running on common VMs, the point may become moot very shortly. But for now, it is easy to see that libraries tend to look like black boxes. When they do exactly what you need, they save time and trouble. But they tend to be wide and shallow, just like Java. They have a lot of knobs and switches.<br /><br />Good languages, OTOH, give you power that can be combined and recombined like first-class functions. They let you tame the black boxes by wrapping up the parts you need and combining them in simple ways. With currying, a function with twenty arguments can be transformed into a function with one argument. With powerful languages, a baroque library can be deftly specialized to fit your program.<br /><br /><strong>My Brain Explodes</strong><br /><br />In the same chapter, the authors talked about extensional equivalence.<sup>2</sup> This is the idea of two functions that can have the exact same behaviour as each other, even though they are defined in different ways. As the authors point out, proving that two functions are extensionally equivalent is impossible in the general case.<br /><br />That shouldn&#8217;t stop anyone with a taste for reading <a href="http://www.randomhacks.net/">esoteric programming weblogs</a>.<sup>3</sup> Something was tickling the back of my mind about this problem. Yes, it had to do with <a href="http://www.randomhacks.net/articles/2005/10/11/amb-operator">rewinding into the past to correct mistakes</a>, something like backtracking in a reasoning system.<br /><br />So perhaps we want an equivalence function that takes two functions &#8220;p&#8221; and &#8220;q&#8221; and returns a Boolean. Both functions must have the same signature, obviously. How can we write such a function? Here&#8217;s one approach: Scan the history of the program for calls to <code>p</code>. For each call, call <code>q</code> and compare the results. If they differ, return <code>false</code>. Do the same for each call to <code>q</code>, comparing its result to the result of calling <code>p</code> with the same arguments.<br /><br />If there are no differences, return <code>true</code>. But wait, maybe your sample size is insufficient. No problem, continue forward in the program, and every time <code>p</code> or <code>q</code> are called in the future, compare the results from both functions again. If they are the same, continue on. But if they differ, <em>rewind back to when the equivalence function was called and return false</em>.<br /><br />That does not guarantee equivalence, of course, they may differ for some set of inputs that you never tested in your program. But if they are equivalent for the set of inputs you actually run, what do you care if they differ for inputs outside of the &#8220;event horizon&#8221; of your program?<br /><br />Now quite honestly, I cannot think of a practical use for this &#8220;rewinding extensional equivalence predicate.&#8221; I mention it only because the thought captures for me one of the benefits of reading certain kinds of books: they provoke you into thinking about new things in new ways. They may be useful immediately, or they may pop up down the road. Or maybe they were just a passing thought that amounted to nothing of grave importance.<br /><br />But overall, my experience is that people and writing that pushes you into unfamiliar thinking territory is good for you. And in that spirit, I recommend <a id="lnx2" name="evtst|a|026256114X" href="http://www.amazon.com/gp/product/026256114X?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=026256114X">The Little MLer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=026256114X" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><sup>4</sup> with as much enthusiasm as I recommend <a href="http://raganwald.github.com/2007/02/but-y-would-i-want-to-do-thing-like.html">writing your own version of the Y Combinator</a>.<br /><br /><hr /><ol><li>See also: <a href="http://raganwald.github.com/2006/12/giles-bowkett-turns-language-elitism.html" title="Raganwald: Giles Bowkett turns language elitism upside down">Giles Bowkett turns language elitism upside down</a></li><br /><li><a href="http://raganwald.github.com/2007/04/what-does-barbara-liskov-have-to-say.html">Equivalence has been on my mind recently</a>!</li><br /><li>And you wonder why I have been doing this since the seventies but somehow managed to miss out on earning a Turing Award while utterly failing to amass a small private fortune?</li><br /><li>Judging by the click-throughs on my blog in the last year, there are plenty of people who can&#8217;t quite bring themselves to pick up a book about ML. Don&#8217;t fret, the authors have also written <a id="lnx0" name="evtst|a|026256100X" href="http://www.amazon.com/gp/product/026256100X?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=026256100X">The Seasoned Schemer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=026256100X" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"> for your first-class functional pleasure. In an effort to expand my own mind, I will be starting their book about logic programming, <a href="http://www.amazon.com/gp/product/0262562146?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0262562146">The Reasoned Schemer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0262562146" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> tomorrow.</li></ol><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/yeomanry-and-exploding-brains.html" title="permanent link">7:43 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			

			<div class="Post"><a name="8160653791218105010">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/ryan-tomayko-on-friction-and-frameworks.html" title="permanent link">Ryan Tomayko on Friction and Frameworks</a></span>
					<div style="clear:both;"></div><blockquote>When I consider what contributed to the unravelling of J2EE, one thing that stands out is that it tried to do too much. The promise was that of infinite scalability based on tooling, which assumes that designing scalable systems is a general case problem. I now firmly believe that this is flawed reasoning. Frameworks don&#8217;t solve scalability problems, design solves scalability problems.<br />  <br />I picked up a word from Joe a few years back and find myself using it a lot: &#8220;friction.&#8221; When referring to framework and tooling, &#8220;friction&#8221; is a (subjective) measure of how much the tooling gets in your way when trying to solve a specific-case problem.<br /><br />I&#8217;ve come to evaluate frameworks based on two rough metrics: how far the framework goes in solving the general case problem out of the box and how little friction the framework creates when you have to solve the specific-case problem yourself. When a framework finds a balance between these two areas, we call it &#8220;well designed.&#8221;</blockquote><br /><div style="text-align: right;">&#8212;Ryan Tomayko, <a href="http://tomayko.com/weblog/2007/04/13/rails-multiple-connections">Rails and Scaling with Multiple Databases</a></div><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/ryan-tomayko-on-friction-and-frameworks.html" title="permanent link">2:37 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			

			<div class="Post"><a name="8776480524623398952">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/having-fun.html" title="permanent link">Having fun</a></span>
					<div style="clear:both;"></div><blockquote>I&rsquo;m just going to keep trying to find interesting problems to work on, and if one of them happens to change the world, then great. And if not, at least I&rsquo;ll have had fun trying to solve some hard problems.</blockquote><br /><div style="text-align: right;">&mdash;a comment from &ldquo;28/w&rdquo; on <a href="http://discuss.joelonsoftware.com/default.asp?joel.3.480878">discuss.joelonsoftware.com</a></div><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/passion.html">passion</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/having-fun.html" title="permanent link">9:32 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Sunday, April 15, 2007</div>
			

			<div class="Post"><a name="2836775033960947170">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/what-does-barbara-liskov-have-to-say.html" title="permanent link">What does Barbara Liskov have to say about Equality in Java?</a></span>
					<div style="clear:both;"></div>Erick Reid posted some code showing his <a href="http://erickreid.blogspot.com/2008/06/sourcecode-generation-of-good-equals.html">standard implementations of <code>equals</code> and <code>hashCode</code> in Java</a> (updated link). His implementations draw heavily on Joshua Bloch&#8217;s principles. I think he&rsquo;s done a great job in implementing the Java standard implementation of equality. On the other hand, I&rsquo;m a little disquieted by the way equality works in Java.<br /><br />Here&#8217;s a shorter version of his equality method for a class, <code>TempBean</code>, that has members <code>_foo</code>, and <code>_bar</code>:<br /><pre><code><br />public boolean equals(Object object) {<br />  if (object != this) {<br />    if (object != null && getClass().equals(object.getClass())) {<br />      final TempBean other = (TempBean) object;<br />      return (_foo == null ? other._foo == null : _foo.equals(other._foo)) &&<br />          (_bar == null ? other._bar == null : _bar.equals(other._bar));<br />    }<br />    return false;<br />  }<br />  return true;<br />}<br /></code></pre><br />The interesting part for me is the test for class equality: <code>getClass().equals(object.getClass())</code>. Compare and contrast to:<br /><pre><code><br />public boolean equals(Object object) {<br />  if (object != this) {<br />    if (object != null &amp;&amp; object instanceof TempBean) {<br />      final TempBean other = (TempBean) object;<br />      return (_foo == null ? other._foo == null : _foo.equals(other._foo)) &amp;&amp;<br />          (_bar == null ? other._bar == null : _bar.equals(other._bar));<br />    }<br />    return false;<br />  }<br />  return true;<br />}<br /></code></pre><br />This works when <code>object</code> is a <code>TempBean</code>. That&#8217;s almost the same as the first code. It&#8217;s different when <code>object</code> is an instance of <code>TempBean</code> but not a <code>TempBean</code>.<br /><br />For example:<br /><pre><code><br />void doSomethingSeussian (final TempBean thingOne) {<br />    final TempBean thingTwo = TempBean.getThingFromBox(/* ... */);<br /><br />    if (thingTwo.equals(thingOne)) {<br />        // ...<br />    }<br />}<br /></code></pre><br /><code>thingTwo</code> is obviously a <code>TempBean</code>. Or is it? What does the factory method <code>getThingFromBox</code> do? And what if <code>thingOne</code> is an instance of a <em>subclass</em> of <code>TempBean</code>? What if it has exactly the same <code>_foo</code> and <code>_bar</code> as <code>thingTwo</code>? Why isn&#8217;t it <code>equals</code>? <br /><br />Does this sound farfetched? What if it doesn&#8217;t even have any different members, it only varies in some subtle implementation way? For example, what if <code>thingOne</code> is a <code>ThreadSafeTempBean</code> that guarantees thread safety in a way that is otherwise transparent to clients? Or a <code>MockTempBean</code> that is used for unit tests?<br /><br /><strong>All equalities are equal, but some are more equal than others</strong><br /><br />If you program in Java, you probably already know that <code>==</code> is not the same thing as <code>equals</code>. One measures <em>identity </em>, whether two objects are the exact same identical object in memory at the same location. (Unless they are those dratted primitives, in which case it measures <em>value equality</em>). Identity is almost useless in Java, it breaks all over the place, and that&rsquo;s why it&rsquo;s rightfully rare.<br /><br />Value equality is where the interesting problem lies. There are two kinds of value equalities: physical equality (&ldquo;these two are identical copies of the same object in every respect&rdquo;) and logical equality (&ldquo;for my purposes, these two are equivalent&rdquo;).<br /><br /><div class="book"><a name="evtst|a|0262561158" href="http://www.amazon.com/gp/product/0262561158?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0262561158"><img src="http://raganwald.github.com/uploaded_images/a_little_java-777624.jpg" border="0"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0262561158" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><br /><br /><a name="evtst|a|0262561158" href="http://www.amazon.com/gp/product/0262561158?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0262561158">A Little Java, a Few Patterns</a> is brought to you by the authors of <a href="http://www.amazon.com/gp/product/0262560992?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0262560992">The Little Schemer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=0262560992" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />, a book that teaches recursion and first-class functions, as well as <a href="http://www.amazon.com/gp/product/026256114X?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=026256114X">The Little MLer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=026256114X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />, a book that teaches you how to design programs with a powerful strong, static type system.<br /><br />So it is no surprise to discover that their book about Java eschews the same old, same old Hello World approach in favour of teaching deep ideas about Object-Oriented design and Pattern-Oriented design using Java as the language of instruction.<br /><br /></div>The basic problem here is that <code>equals</code> captures physical equality, which ignores the <a href="http://en.wikipedia.org/wiki/Liskov_substitution_principle" title="Liskov substitution principle">Liskov Substitution Principle</a>, one of the fundamental principles in OO design. It is leaking the implementation, just like a <a href="http://www.joelonsoftware.com/articles/LeakyAbstractions.html" title="The Law of Leaky Abstractions - Joel on Software">leaky abstraction</a>.<br /><br />(I think a lot of the problem starts when people conflate interfaces with classes. There&#8217;s a big difference between saying &#8220;this is the interface TempBean, and here is how to tell if any two TempBeans are equals to each other&#8221; and saying &#8220;this is an implementation of a TempBean, and if you want to know whether it is the exact same thing as another implementation, here is how to do it.&#8221;<br /><br />The former ought to be very common, and the latter quite rare in OO programs.)<br /><br />It isn&#8217;t easy to fix the physical equality problem. If you use the second form of code, you get an equals method that is not <a href="http://en.wikipedia.org/wiki/Symmetric_relation">symmetric</a> (thanks, Marc!). In the examples above, <code>thingOne.eqauls(thingTwo)</code> is not always the same as <code>thingTwo.equals(thingOne)</code>! And if you&rsquo;re implementing a <code>HashMap</code>, which kind of equality do you want to use for deciding whether a key is already in the collection?<br /><br />This last question is another way of pointing out that equality is not an easy thing to define if you mix the notion of polymorphism into a language. Do you always want logical equality? I can easily think of code that would break horribly if you made a <code>HashMap</code> that respected the Liskov Substitution Principle for keys. And I can also think of code where I want a map or set that respects the Liskov substitution principle.<br /><br /><strong>What can we do about this?</strong><br /><br />To make equality adhere to the Liskov Substitution Method in a language like Java, you can&#8217;t make it an object method. One of the other cherished notions in OO design is that every object ought to know everything about its behaviour. But this objects can&#8217;t know how much detail a client wants in making the comparison.<br /><br />The piece of code that ought to know how to compare two <code>TempBeans</code> is the <code>TempBean</code> class (which is also the <code>TempBean</code> interface in Java, but Java doesn&#8217;t allow code in interfaces). We&#8217;re off to a good start, the code for <code>equals</code> is in the TempBean class. But where we went wrong is making it an instance method. What happens if it&#8217;s a <em>static</em> method?<br /><pre><code><br />public static boolean equivalent(TeampBean left, TempBean right) {<br />  if (left != right) {<br />    if (left != null &amp;&amp; right != null) {<br />      return (left._foo == null ? right._foo == null : left._foo.equals(right._foo)) &amp;&amp;<br />          (left._bar == null ? right._bar == null :left. _bar.equals(right._bar));<br />    }<br />    return false;<br />  }<br />  return true;<br />}<br /></code></pre><br />Now you can write code like:<br /><pre><code><br />void doSomethingSeussian (final TempBean thingOne) {<br />    final TempBean thingTwo = TempBean.getThingFromBox(/* ... */);<br /><br />    if (TempBean.equivalent(thingTwo, thingOne)) {<br />        // ...<br />    }<br />}<br /></code></pre><br />Without worrying about whether either variable holds a <code>TempBean</code>, a <code>ThreadSafeTempBean</code>, or a <code>MockTempBean</code>. It&#8217;s true that sometimes you care very deeply about the difference. But most of the time, you probably do not, and using an <code>equals</code> method that does care is wrong.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/java.html">java</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/what-does-barbara-liskov-have-to-say.html" title="permanent link">9:40 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Friday, April 13, 2007</div>
			

			<div class="Post"><a name="8074916481331990114">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/from-abstraction-to-zipf.html" title="permanent link">From Abstraction to Zipf</a></span>
					<div style="clear:both;"></div><em>Alpha&#8230;</em><br /><br /><a href="http://damienkatz.net/" title="Damien Katz">Damien Katz</a> raised an interesting question the other day: he wondered whether elements of computer programs followed a <a href="http://en.wikipedia.org/wiki/Zipf's_law" title="Zipf's law - Wikipedia, the free encyclopedia">Zipf distribution</a>. In other words, he wondered whether the most frequently used item occurred a lot more than the next most frequent, which occurs a lot more than the third most frequent, and so forth.<br /><br />That&#8217;s an interesting question. Is it true? And if it is, what does that tell us about composing programs?<br /><br />Looking at computer programs, some things seem to follow Zipf&#8217;s law and others don&#8217;t. In C++ programs, loop indices called <code>i</code> probably are an order of magnitude more common than those called <code>j</code>. Unless you use <a href="http://www.joelonsoftware.com/articles/Wrong.html" title="Making Wrong Code Look Wrong - Joel on Software">Apps Hungarian</a>, of course. But are <code>for</code> loops that much more common than <code>if</code> statements? That might vary from place to place within a single program, but overall they might be roughly equal in frequency.<br /><br />If we step up a level and look at idioms, my gut tells me that there is a strong Zipf distribution. Although each program will differ, some programs might make heavy use of lists, others of maps. Some might do a lot with closures, others with objects. These are fairly generic, of course.<br /><br />If we have a look at the more domain-specific items in a program, we really see a Zipf distribution. Some things pop up again and again and again in a program, others are rare.<br /><br /><strong>Why Abstract?</strong><sup>1</sup><br /><br />The most important tool we have for composing programs is <em>abstraction</em>. When we create an abstraction for something, we get one and a half wins (a <a href="http://en.wiktionary.org/wiki/sesqui-" title="sesqui- - Wiktionary">sesqui</a>-win).<br /><br /><div class="book"><a name="evtst|a|0672328844" href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0672328844"><img src="http://raganwald.github.com/uploaded_images/the_ruby_way.jpg" border="0"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><br><br><a name="evtst|a|0672328844" href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0672328844">The Ruby Way</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"> is the perfect second Ruby book for serious programmers. The Ruby Way contains more than four hundred examples explaining how to implement advanced ideas like metaprogramming.<br /><br /></div>The full win is that we get to take a common element and place its responsibility in once place. For example, if your language gives you a <code>map</code> function or method, there is one place for the code that applies a function to each element of a collection and produces a collection of the results. Unlike a &#8220;pattern,&#8221; you don&#8217;t have to re-implement map every time you use it, you just use it. The centralization of responsibility in a single place is very powerful way to <a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html" title="Why Why Functional Programming Matters Matters">separate concerns</a>.<br /><br />The half win is that we don&#8217;t need to understand its implementation, we only need to understand its interface. I honestly don&#8217;t know whether Ruby&#8217;s built-in <code>map</code> method applies itself to a collection one at a time from the start to the end or in some other order. I suspect it&#8217;s from start to end for ordered collections, but I don&#8217;t know and I don&#8217;t have to know.<br /><br />This is only half a win, because for anything too complicated to explain on a PowerPoint slide where you are promising the newest silver bullet, abstractions have a nasty habit of leaking. <a href="http://www.joelonsoftware.com/articles/LeakyAbstractions.html" title="The Law of Leaky Abstractions - Joel on Software">Leaky abstractions</a> force you to understand the implementation to use them.<br /><br />There are some drawbacks to abstractions. As noted, sometimes the abstraction leaks. In that case, you often have to look up what an abstraction does. If there was no abstraction and the implementation was right there in the middle of your code, you wouldn&#8217;t have to look it up. So when you see:<br /><br /><pre><code>class BlogPost &lt;&lt; ActiveRecord::Base<br />    has_many :comments<br />    # ...<br />end<br /></code></pre><br />You obviously to need to know that <code>has_many</code> creates methods like <code>comments</code>, <code>comment_ids=</code> and <code>comments&lt;&lt;</code> automagically for you. In fact, that is kind of the point of <code>has_many</code>. But if you are doing anything non-trivial, you also need to know whether <code>has_many</code> actually <em>defined</em> <code>comments</code>, <code>comment_ids=</code> and <code>comments&lt;&lt;</code> or whether it has merely modified <code>BlogPost</code> to <em>handle</em> those messages. In that sense, the abstraction leaks.<br /><br />You get much the same thing if you build a Java class hierarchy that is umpteen levels deep festooned with abstract base classes, factories, and dependency injection. In one sense you get a really tight abstraction. In another sense, you have a big leak: you need to know its internals to get any real work done.<br /><br />Another drawback to abstractions fall out of their strength. If you haven&#8217;t seen a particular abstraction before, you don&#8217;t know what it does and how it works. Contrary to popular hype, self-documenting names are not enough. If you are a Rails user, raise your hand if you can tell me what all of the various options for <code>has_many</code> are and what they do. You have to learn each abstraction&#8217;s interface, just as you had to learn what a <code>for</code> loop does for you.<br /><br />The win (not having to know how it works) is also a loss (not knowing what it does).<br /><br /><strong>An abstraction is an abstraction is an abstraction</strong><br /><br />I think most people agree that named subroutines (or functions, or procedures) are an excellent abstraction. First-class functions and anonymous functions seem to be an acquired taste (just one taste, and your programs will quickly acquire them). Objects&#8212;in the strong sense of polymorphic programs&#8212;are well-regarded abstractions.<br /><br /><blockquote>Macros, DSLs, and other means of writing your own mini-language provoke the wildest claims of productivity and equally baseless fears of unreadable, fragile, &#8220;magic&#8221; code built out of gossamer dreams.</blockquote><br /><br />What these all have in common is that these functional abstractions live happily within the syntax provided by the host programming language. They abstract function without abstracting syntax. For the most part, non-syntactic abstraction is uncontroversial.<br /><br />There seems to be debate over syntactic abstraction. Macros, DSLs, and other means of writing your own mini-language provoke the wildest claims of productivity and equally baseless fears of unreadable, fragile, &#8220;magic&#8221; code built out of gossamer dreams. The basic &#8220;problem&#8221; with syntactic abstractions like <code>has_many</code> in Rails or <code>let</code> in Scheme is that syntactic abstractions force you to learn their interface.<br /><br />They are right in your face, especially if they are very brief. Consider:<br /><br /><pre><code>BlogPost.find_or_create_by_name('From Abstraction to Zipf').comments &lt;&lt; Comment.new('bleh!', 'anonymous')<br /></code></pre><br />Don&#8217;t bother searching for the <code>find_or_create_by_name</code> method or the <code>comments&lt;&lt;</code> method in the code base.<br /><br />All the same, syntactic abstractions are <em>just like</em> functional abstractions. You get some wins, and you pay some costs in understanding and potential &#8220;leakiness.&#8221;<br /><br /><strong>Zipf to the rescue</strong><br /><br />So should we zealously abstract everything we can? Or should we conservatively avoid &#8220;magic&#8221; like syntactic abstractions?<br /><br />Every abstraction has a fixed learning cost. That cost is amortized over all of the instances we&#8217;ll encounter. So you need to learn how <code>has_many</code> works just once, and then you benefit every time you read it or write it. This is why abstractions built into a programming language are big wins: you amortize their cost over every program written in the language. Isn&#8217;t that why Java and C# look so much like C++ which looks so much like C? They were offering abstractions that have been paid up for years.<br /><br /><blockquote>Zipf&#8217;s law tells us that each application only needs a very few new kinds of abstractions to get most of the benefits. There are only a few low-hanging fruits, but each is plump and juicy.</blockquote><br /><br />An abstraction built into a framework like <code>Rinda</code> or <code>MapReduce</code> is amortized over fewer programs. A domain-specific abstraction for a single organization is amortized over a very few programs, and an abstraction built into one program is only amortized over instances in the one code base. Unsurprisingly, opportunities for abstraction follow the Zipf distribution.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/0262610744?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0262610744"><img border="0" src="http://raganwald.github.com/uploaded_images/art_of_mop.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0262610744" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br /><a href="http://www.amazon.com/gp/product/0262610744?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0262610744">The Art of the Metaobject Protocol</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0262610744" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is one of the most important books ever written on the subject of building abstractions with objects. If the idea that there is more than one way to structure objects and classes seems surprising, then learning about the Meta-Object protocol will teach you what your language has kept secret.<br /><br /></div>Of course, that distribution is self-similar: the abstractions <em>within a program</em> follow the same distribution as the abstractions <em>within an organization</em>. So even if you aren&#8217;t inventing a new programming language, Zipf can help.<br /><br />Quite simply, it pays to aggressively abstract the few things that are encountered the most frequently. In a CRUD web application, schema relationships like <code>belongs_to</code> are incredibly frequent. There&#8217;s a big win from creating a syntactic abstraction, even if the learning curve looks daunting to newcomers. Creating a domain-specific language for database schema changes is also a big win.<br /><br />Note that we aren&#8217;t saying that <code>has_one</code>, <code>belongs_to</code>, and <code>has_many</code> appear more than 50% of the time. They may be quite infrequent. The point is that they are far more frequent than something else you could abstract, and the other thing will take just as much time to learn to read but will pay off far less often.<br /><br />But should you create a DSL for <a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html">list comprehensions</a> in your CRUD application or just use the language&#8217;s built-in collections? I would say, you would need an application that uses an awful lot of lists before a syntactic abstraction for lists is a win.<br /><br />It might be, but the nice thing is, it probably won&#8217;t be close: Zipf&#8217;s law tells us that each application only needs a very few new kinds of abstractions to get most of the benefits. There are only a few low-hanging fruits, but each is plump and juicy.<br /><br /><em>&#8230;Omega</em><br /><br />I think it is a win to use aggressive abstraction techniques like metaprogramming, but only if you restrain yourself to abstracting the very few things that appear most frequently in your code base. The things that are used less frequently should be abstracted using less aggressive techniques.<br /><br />The resulting program may not be magically 50% shorter than an unabstracted program, because the &#8220;long tail&#8221; of idioms and patterns are simply not worth abstracting away even though we have the tools for doing so.<br /><br />You can probably tell whether a program has the proper level of abstraction just by checking its distribution.<br /><br />If you find a big abstraction framework for one thing while frequently used idioms are expressed using patterns instead of abstractions, you are probably looking at an improperly abstracted program. You have to wade through verbiage to read everything, and the one time you don't need to abstract the code away, you have to chase definitions through indirection.<br /><br />And in a well-written program, I would expect that the things that occur most frequently are expressed at the highest and most powerful levels of abstraction, while things that happen infrequently are expressed in a more direct and explicit way. Such a program would be easy to read throughout.<br /><br /><hr /><br /><ol><li><a href="http://www.amazon.com/gp/product/B000NK48VO?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000NK48VO">Why Abstract?</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=B000NK48VO" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is a delightful and wonderfully brief book that explains the appeal of abstract art in a simple and direct way. It&#8217;s one of the treasures on my bookshelf and I urge you to find a copy through a used book seller.</li><br /><li>Suprised? There is no footnote two. But if there was, it would be to mention that Paul Graham&rsquo;s incredible book <a href="http://www.amazon.com/gp/product/0130305529?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0130305529">On LISP: Advanced Techniques for Common LISP</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=0130305529" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is <a href="http://www.bookshelf.jp/texi/onlisp/onlisp.html">freely available online</a>. This is a <em>must read</em> for anyone interested in composing syntactic abstractions in any language.</li></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/lispy.html">lispy</a>, <a rel='tag' href="http://raganwald.github.com/labels/ruby.html">ruby</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/from-abstraction-to-zipf.html" title="permanent link">12:52 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Tuesday, April 10, 2007</div>
			

			<div class="Post"><a name="5020249008482811338">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/off-topic-fanboy-considered-tired.html" title="permanent link">Off topic: "Fanboy" considered tired</a></span>
					<div style="clear:both;"></div>I really said <a href="http://raganwald.github.com/2007/03/ad-hominem.html" title="ad Hominem">all this before</a>, but it seems that the world does <em>not</em> hang on my every utterance for guidance in their affairs.<br /><br />So I&rsquo;ll say it again: Calling someone a &ldquo;<a href="http://reddit.com/search?q=fanboy">fanboy</a>&rdquo; weakens your argument, not strengthens it. It makes your argument look like it emerged straight from an AOL chat room.<br /><br />Compare:<br /><br /><blockquote>Surprisingly, more than half of the labels on the iTunes Music Store are either exclusive or with at most one other store.</blockquote><br />And:<br /><br /><blockquote>It may surprise Apple fanboys, but more than half of the labels on the iTunes Music Store are either exclusive or with at most one other store.</blockquote><br />Does the second one really make its author seem hip and cool and smart at the expense of those hapless Apple fanboys? I didn&rsquo;t think so either.<br /><br />Look, if not wanting to be mistaken for an immature kid isn&rsquo;t enough reason to avoid this word, I have a much better reason.<br /><br />In any conflict, there is a strategic advantage for one side or the other to increase volatility. If you have a lead and a small advantage in games, you want to settle things down and let statistics do their thing. In match-play backgammon, for example, when you have match equity on your side you want to be very conservative with the cube.<br /><br />You want to reduce volatility when you have an advantage and increase volatility when you&rsquo;re behind.<br /><br />Inflammatory labels are a way of increasing volatility, of shaking things up. And the same rule applies: if you&rsquo;re in the right, if your arguments are cogent, you want to keep things rational and logical.<br /><br />But if you&rsquo;re weak, if your ideas are not sound, the only way to win is to turn a discussion into a brawl, and hope you catch a break.<br /><br />I trust that your ideas are sound. So don&rsquo;t fall into the trap of increasing volatility.<br /><br />p.s. And if someone else hangs that label on you? Take satisfaction in the fact that <em>they just admitted that their ideas are too weak to stand alone</em>.<div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/off-topic-fanboy-considered-tired.html" title="permanent link">2:31 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Monday, April 09, 2007</div>
			

			<div class="Post"><a name="3488716439140998400">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/quote-unquote.html" title="permanent link">Quote. Unquote.</a></span>
					<div style="clear:both;"></div><blockquote>I admit I live in a bubble. The thing is, my bubble is the one where they develop the technologies that you&#8217;ll be using in your bubble in ten years.<br /><br />Basically, I hang around with people who are good programmers. I realize this is not a random cross section of computer users. But it is a disproportionately important subset, because what they use, other people will be using later. These were the people who were using microcomputers in 1980; now everyone is; the people who were using email in 1988; now everyone is; the people who were using the Web in 1995; now everyone is; etc etc.<br /></blockquote><br /><div style="text-align: right;">&mdash;Two of user paulgraham&#8217;s <a href="http://programming.reddit.com/user/paulgraham/comments">comments</a> on reddit.com</div><br /><br />Ok, take a deep breath. Forget about whether you find these statements arrogant or elitist. Forget about whether you think they are true or not today. Forget about whether they were once true (I know that on <a href="http://raganwald.github.com/2007/01/where-were-you-on-saturday-november-9.html">Saturday, November 9th, 2002</a>, they were absolutely true).<br /><br />The question I ask myself, and that I think you might want to try asking yourself, is this:<br /><br />Am <em>I</em> developing the ideas, technologies, and products today that the rest of the world will be using in ten years?<br /><br />If not, what&rsquo;s stopping me?<br /><br /><em>p.s. Don&rsquo;t miss the <a href="http://www2.blogger.com/comment.g?blogID=7618424&postID=3488716439140998400">comments</a>!<br /><br />p.p.s. And of course, this is not an <a href="http://www.paulgraham.com/hamming.html">orginal thought</a> on my part.</em><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/passion.html">passion</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/quote-unquote.html" title="permanent link">2:59 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Sunday, April 08, 2007</div>
			

			<div class="Post"><a name="3126261859391351152">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/reduce-reuse-recycle.html" title="permanent link">Reduce. Reuse. Recycle.</a></span>
					<div style="clear:both;"></div><div style="float: right; margin-left: 10px; margin-bottom: 10px;"> <a href="http://www.flickr.com/photos/piwonka/384203161/" title="photo sharing"><img src="http://farm1.static.flickr.com/177/384203161_5363b99419_m.jpg" alt="" style="border: solid 2px #000000;" /></a> <br /> <span style="font-size: 0.9em; margin-top: 0px;">  <a href="http://www.flickr.com/photos/piwonka/384203161/">bagel to go</a>  <br />  Originally uploaded by <a href="http://www.flickr.com/people/piwonka/">pwka</a>. </span></div>Don't forget, all of your passion for software is wasted if you don't eat a good lunch.<br clear="all" /><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/reduce-reuse-recycle.html" title="permanent link">10:00 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Saturday, April 07, 2007</div>
			

			<div class="Post"><a name="4095251174212991919">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/i-wanted-to-be-on-side-that-was-right.html" title="permanent link">I wanted to be on the side that was right, even if I didnâ€™t win</a></span>
					<div style="clear:both;"></div><blockquote>This is where I am great. I am great at being very, very stubborn and ignoring all sorts of reasons why you should change your goal, reasons that many other people will be susceptible to. Many people want to be on the winning side. I didn&#8217;t give a damn about that. I wanted to be on the side that was right, and even if I didn&#8217;t win, at least I was going to give it a good try.</blockquote><br /><div style="text-align: right;">&#8212;<a href="http://www.stallman.org/">RMS</a>, as quoted in <a href="http://tuxdeluxe.org/node/76">Be Realistic. Demand the Impossible</a></div><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/passion.html">passion</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/i-wanted-to-be-on-side-that-was-right.html" title="permanent link">9:46 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			

			<div class="Post"><a name="4407254586250690018">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/venture-capitalist-passes-away.html" title="permanent link">A Venture Capitalist passes away peacefully, and...</a></span>
					<div style="clear:both;"></div>After a long and profitable life, a venture capitalist passes away peacefully in his sleep. To his surprise, death is not the end and his spirit hovers like an invisible ghost as his family grieves. He is pleased to see so many friends and business partners from the industry attend his funeral, and the eulogies are touching.<br /><br />&#8220;I have lived a worthy life,&#8221; he thinks, &#8220;but it&#8217;s time to let go. I am ready.&#8221; With that thought, he finds himself sinking deep into the earth, through rock and magma, until he reaches a series of caverns, lit by an eerie glow. He sinks through the first and second levels, then alights in the third.<br /><br /><strong>The Reckoning</strong><br /><br />He is facing an ancient writing desk, ornately carved. Seated at the desk, and brandishing a feather quill, is a man who appears (from what he can see) to be in great shape. He could effortlessly paste a drive 500 yards straight down the fairway. His eyes are pure white, with neither irises nor pupils.<br /><br />&#8220;I have been waiting for you,&#8221; the man says, kindly, &#8220;you have served me well and earned your reward.&#8221;<br /><br />Well, the venture capitalist isn&#8217;t quite expecting this. Quite honestly, he always thought that there was no afterlife, and he isn&#8217;t quite sure if this is real, a nightmare, or a few neurones flickering as his brain chills, but if there is a kind of afterlife, it may as well be the one his parents lectured him about. Unfortunately, he seems to have wound up in the Bad Place, but he made his fortune in life by turning situations around, and he puts a brave face on it.<br /><br />&#8220;Umm, sure, pleased to meet you at last.&#8221;<br /><br />The white eyes half close, then turn down to a scroll on the desk marked with an ancient writing. The man purses his thin, obsidian lips and speaks.<br /><br />&#8220;I accept your service. Proceed to <em>Venture Capitalist Hell</em>.&#8221;<br /><br /><div class="book" style="width: 275px;"><img src="http://raganwald.github.com/uploaded_images/mammon.jpg" width="265" height="396"/><br /><br />&copy;1999 &ndash; 2006  <a href="http://www.wizards.com">Wizards of the Coast</a>, Inc.<br /><br /></div>Well, that&#8217;s the sentence, but devils do not materialize to flay his skin and the room is comfortably warm but not hot, so maybe things aren&#8217;t as bad as people say. Perhaps he can make a few discrete inquiries, maybe volunteer to help with deal flow, even talk someone else into exchanging places with him. One, two centuries at the most and he&#8217;ll be out of this place.<br /><br />He hasn&#8217;t moved, and while the lips do not move, the voice speaks again.<br /><br />&#8220;Through the archway, down the hall, door on the left.&#8221;<br /><br />Our venture capitalist is about to ask, &#8220;what archway?&#8221; but he realizes that there is an archway in front of him and that there has always been an archway in front of him. It all feels very dream-like, especially as he seems to float down a passage that reminds him of his offices on Sand Hill Road. It&#8217;s a broad, opulent hallway with fashionable lighting decorated with &#8220;tombstones,&#8221; the Lucite trophies of successful business deals.<br /><br />At the end of the hallway there is a massive picture window and a door on either side. Through the window he can see blue sky and clouds, and without looking directly he is suddenly certain that they are on the top floor of the tallest and most prestigious business tower in the biggest and most powerful business city on this or any world. He knows without question that people who have lived lesser lives enjoy their rewards beneath his feet, and this just and proper.<br /><br />&#8220;This is more like it,&#8221; he thinks. Although he didn&#8217;t really believe in such things, if there&#8217;s a choice in the matter, it&#8217;s better to reign in Hell than to serve in Heaven. Maybe he could learn a few things. Going by the legends, his new boss is the undisputed champion of devious term sheets.<br /><br />He alights again, and opening the door on the left, peeks in.<br /><br /><strong>VC Hell</strong><br /><br />It is an enormous conference room, so enormous than there appear to be an infinite number of board meetings going on simultaneously. He listens in with a growing sense of dread. <em>Every single deal is going bad</em>.<br /><br />In one meeting, VCs are looking at the trends and realizing that companies are&#8212;and this is pure sacrilege&#8212;starting up without raising money! In another, the founders are laughing and celebrating <em>actual revenues</em>: they don&#8217;t need to raise a second round, and what will it take to buy their VCs out?<br /><br />In another meeting, government officials are doing unspeakable things to the tax code. Why, they are tying tax breaks to the creation of jobs. Those Mandarins are actually expecting companies to grow the economy instead of just being shells for buzzword-compliant press releases!<br /><br />And&#8212;this is too much&#8212;one pair of founders are shuttering their unsuccessful ventures and putting their patents and code into the public domain instead of merging together, raising a diluting round, and spending the proceeds on public relations and an expensive VP of Sales.<br /><br />It&#8217;s all unspeakably horrible and he knows with certainty that he really is in Hell.<br /><br />He gulps and looks around. There is nobody in the hallway and nobody has noticed him. He shuts the door carefully. He needs to get out of there, and he can&#8217;t go back to the man at the desk. What about the other door?<br /><br />He carefully opens the door on the right and peeks in. This is much better! It&#8217;s another enormous conference room, and there is another infinitude of board meetings. But these meetings are going the right way!<br /><br /><strong>Behind the other door</strong><br /><br />In one meeting, founders are supplicating themselves in the hope of getting funded. And the VCs are responding appropriately: &#8220;How will you make money if Google, Yahoo!, and Microsoft merge and devote their 40,000 engineers and $100 billion in cash to putting you out of business? What will you do if the entire Internet goes down? How do you know that someone won&#8217;t get a patent on binary logic?&#8221; The hapless founders are actually crying. This is great.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/0671671642?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0671671642"><img border="0" src="http://raganwald.github.com/uploaded_images/growing_a_business.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0671671642" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br />In my twenty years of business experience, <a href="http://www.amazon.com/gp/product/0671671642?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0671671642">Growing a Business</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0671671642" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is absolutely the best book on founding and running a business organically that I have ever read. And I read a lot of books. &#8220;Growing a Business&#8221; is not about scoring business coups or raising money. It is not about sales tactics or innovation. It is about growing a business step by step, customer by customer. It is about expanding at a sane rate and getting rich the old-fashioned way: one satisfied customer at a time.<br /><br /><a href="http://www.amazon.com/gp/product/0671671642?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0671671642">Growing a Business</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0671671642" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is a must-read for anyone who wants to build a business rather than &#8220;do a deal.&#8221;<br /><br /></div>Unbelievably, it gets <em>better</em>. Nearby, a VC is toying cruelly with a portfolio company, demanding that they partner with other companies in her portfolio and add expensive buzzword compliance to their offering, for no other reason than to legitimize her investment in companies producing those very same buzzwords. And the founders are nodding gratefully, as if it was in their best interests!<br /><br />And another VC is complaining that although the company is hitting every engineering deadline, they don&rsquo;t have enough metrics. He demands that they start shopping for some &ldquo;grey hair&rdquo; to supervise engineering. They need &ldquo;adult supervision&rdquo; in the form of an industry veteran with a long list of failed and bloated projects on their resum&eacute; to show them what they&rsquo;re doing wrong and shake everything up before it&rsquo;s too late and they ship a product.<br /><br />Are the founders arguing? Noooo, they&rsquo;re listening respectfully, and all the while the VC is charging them a management fee for the time he spends telling them what to do. This is just great, our VC thinks, how much better can it get?<br /><br />In one corner the VCs are agreeing that a company needs &#8220;a professional profile.&#8221; They are stuffing the company with HR, PR, and Business Development, all front jobs for the VCs&rsquo; lovers and mistresses. Everyone knows that jobs without performance metrics or quotas exist so that companies will be forced to dilute themselves sooner, and the founders are just <em>sitting there and taking it</em> while their burn rate triples.<br /><br />Our VC practically wets himself with glee. Just a few months before his demise he had spent <em>nearly an hour</em> convincing a company in his portfolio to hire a marketing firm that happened to be run by his personal trainer and full-release masseuse. Here in Hell VCs could do as they please!<br /><br />Well, does he need to hear more? Does he need to see the comely &#8220;assistant investment bankers&#8221; hired to satisfy the VC&#8217;s every need in exchange for directing public offerings to the bank? Does he need to watch as the photographers take yet another &#8220;Man of the Year&#8221; cover photo? No, this is great. There must have been some mistake at the desk, this is the place for him.<br /><br />He swings the door wide open and prepares for the adulation and welcome he deserves. He is ready for his just reward.<br /><br />But as he does so, there is a clap of thunder and the hallway shakes. A booming voice rings out:<br /><br />&#8220;You belong to Venture Capitalist Hell. Don&#8217;t go in there, that&#8217;s <a href="http://rot13.com/index.php?text=Sbhaqre%20Uryy" title="Founder Hell!!"><em>Sbhaqre Uryy</em></a>!!&#8221;<div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/venture-capitalist-passes-away.html" title="permanent link">10:35 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Wednesday, April 04, 2007</div>
			

			<div class="Post"><a name="8511257161778092284">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/haskell-not-just-for-language-weenies.html" title="permanent link">Don't have a COW, man? What Haskell teaches us about writing Enterprise-scale software</a></span>
					<div style="clear:both;"></div><a href="http://factorlang-fornovices.blogspot.com/">Berlin Brown</a> asked:<br /><blockquote>I read programming.reddit religiously but I rarely see something that could be used in a non-startup environment.  Am I wrong, or are you considering deploying a haskell enterprise web application?  And if the stuff discussed isn&#8217;t relevant for the next 5 years (i.e. an erlang based webapp) will it ever be relevant?<br /></blockquote><br />Yes, I use what I read on <a href="http://programming.reddit.com/" title="reddit.com: programming - what&#39;s new online">programming.reddit.com</a> in my day job. That&#8217;s one of the reasons I <em>have</em> this day job: it&#8217;s part of what I do to sift through all of the cool stuff and find the things that are practical today.<br /><br />Since you mentioned <a href="http://www.haskell.org/" title="HaskellWiki">Haskell</a>:<br /><br />Consider a multi-threaded application with shared memory, like a really big web server that has some big shared collection of things in memory. From time to time you add things to the big collection, from time to time you remove them.<br /><br /><strong>Pessimism and coarse-grained locking</strong><br /><br />One way to arbitrate multiple threads is to have one copy of the collection with strict locking protocols that apply to its coarse-grained operations like <code>add</code>, <code>remove</code>, and <code>fetch</code>.<br /><br />In a language like Java, you can <code>synchonize</code> those methods and you&#8217;re done. You have just implemented <em>mutex locking</em>: only one thread can use the collection at a time. If one thread is fetching something from the collection, all other threads must wait, even if all they want to do is fetch things as well.<br /><br />That sucks <a href="http://rot13.com?text=tbng%20qvpx">tbng qvpx</a>, especially if you do lots of reading: why should thread <code>546</code> have to wait to fetch something just because thread <code>532</code> is currently fetching something?<sup>1</sup><br /><br /><strong>Read and write locks</strong><br /><br />The next improvement is to have two kinds of locks: <em>read locks</em> and <em>write locks</em>. Two or more threads can lock the collection for reading, but if any thread locks the collection for writing, all of the other threads have to wait until it is done.<br /><br />This works for about 17 clock ticks, and then you fix the bug by adding a new rule: if a thread wants a write lock but one or more threads have read locks, it has to wait, but any other threads that want read locks can&#8217;t have them. Even though the only threads with locks have read locks, they still have to wait.<br /><br />The thread waiting to write gets a kind of pending write lock that blocks all other threads from taking out new locks. And then you fix the next bug by saying that all threads waiting wait in a priority queue so that the read threads aren&#8217;t starved by write threads and the write threads aren&#8217;t starved by read threads.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/0521663504?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0521663504"><img border="0" src="http://raganwald.github.com/uploaded_images/purely_functional_data_structures.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0521663504" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br /><a href="http://www.amazon.com/gp/product/0521663504?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0521663504">Purely Functional Data Structures</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0521663504" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> takes you step by step through the design and implementation of copy on write collections. These collections <em>can</em> be used in purely functional languages, but they are just as useful in multi-paradigm languages like Java, Ruby, or Python handling multiple threads and performance optimization. The author&#8217;s <a href="http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf" title="Purely Functional Data Structures">thesis</a> is available on line for free.<br /><br /></div>You now have a system that is pretty fast a long as you don&#8217;t write things very often. For example, you could build a fairly nice cache using read-write locking provided it is tuned so that you get lots of hits and only rarely have to drop things from the cache or add things to the cache. But if you&#8217;re doing something like maintaining a big index in memory where you have to make lots of updates, the writes will slow everything down.<br /><br />These kinds of locking protocols are called <em>pessimistic</em> protocols: you assume bad things will happen and prevent them from happening up front by blocking threads from executing until it is safe to proceed.<br /><br /><strong>Multi-version concurrency control</strong><br /><br />Another way to arbitrate multiple threads is to make copies of the collection whenever you perform an update.<sup>2</sup> You maintain multiple <em>versions</em> of the collection. When a thread needs the collection, it grabs the latest copy. When it wants to <code>remove</code> or <code>add</code> elements, it writes a new copy without disturbing an existing copy.<br /><br />This works really well in that threads that only want to read are never blocked. They always run at full speed, even if another thread is in the middle of an update. Hand-waving over how you figure out the whole &#8220;latest copy&#8221; thing, this scheme doesn&#8217;t work so well for threads that write.<br /><br />The problem is one of <em>serialization</em>: this word means, if some set of operations takes place on the collection, the result must be the same as if the operations were conducted one at a time on the collection. There is no guarantee of the <em>order</em> of the operations, just that the result is the same as if they had been carried out in some order.<br /><br />Let&#8217;s use an example. Say our collection is a Map. It starts empty:<br /><br /><pre><code>{ }<br /></code></pre><br /><br />Operation <code>A</code> adds an element:<br /><br /><pre><code>{...a: "A"...}<br /></code></pre><br /><br />As does operation <code>B</code>:<br /><br /><pre><code>{...b: "B"...}<br /></code></pre><br /><br />And operation <code>C</code>:<br /><br /><pre><code>{...c: "C"...}<br /></code></pre><br /><br />If we start with an empty hash and perform all three operations, the result should be <code>{ a: "A", b: "B", c: "C" }</code>, exactly the same result as if each operation were performed serially, one after the other. But what happens if each operation is performed by a thread that grabs the initial copy, <code>{}</code> and writes its result back to the collection? Something called a <em>race condition</em>: the result will be <code>{ a: "A" }</code>, <code>{ b: "B" }</code>, or <code>{ c: "C" }</code>, with the &#8220;winner&#8221; being the last one to write its result.<br /><br />We can fix this problem in a couple of ways. One way is to keep the versions so that reading threads work at full speed, but use mutexes for write locks so that only one thread can write at a time. That&rsquo;s simple, and if you can figure out a cheap way to make copies, works pretty well.<br /><br />That&rsquo;s your pessimistic protocol again (threads that write have to wait on other threads that write), but it&rsquo;s a huge win for threads that read.<br /><br />Making this work is tricky. Copying the entire thing is expensive, so you need to do clever tricks where you only copy the things that change and share the things that don&#8217;t change. And you can get a big, big win if you can avoid write conflicts by arbitrating conflict at a finer grain. For example, a <code>HashMap</code> uses a set of linked lists. If two different threads write to different &#8220;buckets,&#8221; you can merge their results rather than rolling one back and starting again.<br /><br /><div class="book"><hr/><br />One of the best books ever written on the subject of implementing fault tolerant concurrency (either on a single system or a distributed network) is <a href="http://www.amazon.com/gp/product/0201107155?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0201107155">Concurrency Control and Recovery in Database Systems</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=0201107155" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />.<br /><br />Don&rsquo;t be fooled by the word &ldquo;database&rdquo;&mdash;the techniques described are just as useful for implementing distributed algorithms like MapReduce, concurrent data structures like high-performance collections, or for building multi-threaded communication systems based on queues.<br /><br />Like all classics, it&rsquo;s also available <a href="http://research.microsoft.com/users/philbe/ccontrol/">online</a> for free.<br /><br /><hr/> <br /></div>There is a lot of extra overhead for this if a thread wants to write while another thread is reading a version, so it is only a big win if writes are fairly rare. Remember, one of the big wins is that reads <em>never</em> wait on writes because they work with immutable versions of the collection.<br /><br />Depending on how many threads you have, what kinds of operations are most likely, and other factors, this kind of system can be orders of magnitude faster than coarse-grained pessimistic locking.<br /><br />Sometimes you want a slightly different protocol. The aforementioned is often called <em>single write, many reads.</em> It requires threads that plan on writing to know in advance they need to write. But for something like a cache, you don&#8217;t know you need to write until you miss the cache. And then it&#8217;s too late to get a write lock.<br /><br /><strong>Optimism and many writes, many reads</strong><br /><br />The easiest way to avoid having to pre-declare whether a thread is a reader or a writer is by letting all of the threads do as they please. They all get the latest version and chug happily along.<br /><br />When they are finished, if they never executed an <code>add</code> or <code>remove</code> we let go of the copy of the collection and we&#8217;re done. If a thread wants to write, it makes a copy as above and writes to its copy. But it doesn&rsquo;t have to grab a lock while it is writing, so writes don&rsquo;t wait on other writes.<br /><br />Now, if a thread <em>has</em> executed a write (an <code>add</code> or <code>remove</code>), when it is done we check the result to see if it violates serializability.<br /><br />For example, we can number our versions. Let&#8217;s say that <code>{}</code> is version <code>0</code>. The first thread to finish, let&#8217;s say it&#8217;s the thread performing operation <code>B</code>, creates its result: <code>{ b: "B" }</code>. Now it checks the collection to see if anyone has updated it since <code>B</code> read the collection. The collection is still at version <code>0</code>, so <code>B</code> can write its result. <code>B</code> writes <code>{ b: "B" }</code> to the collection and calls it version <code>1</code>.<br /><br />Next <code>A</code> finishes and notices that the collection is at version <code>1</code>. This is a problem, because <code>A</code> is working with an updated version <code>0</code>, so it has to throw out its work, fetch version <code>1</code>, and try again. This is exactly the same thing as using a source code control system like <a href="http://subversion.tigris.org/" title="subversion.tigris.org">Subversion</a> to resolve conflicts.<br /><br />This many reads, many writes strategy is called an <em>optimistic protocol</em> because you do work in the hope that nothing will cause you to throw it out and try again. It&rsquo;s a big win if writes do happen at the same time, but they rarely conflict.<br /><br />For example, if you have a good strategy for <em>merging</em> writes, this is huge.<br /><br /><strong>So what?</strong><br /><br />Well, it would be great if you didn&#8217;t have to reinvent the wheel and have to work out all of the implications when you want to make a really fast shared collection in a multi-threaded environment. What you want is someone to share a wealth of experience about how to make really fast copies of things by only changing the little bits that you change instead of the whole thing, and so forth.<br /><br /><blockquote>I like languages which say, &ldquo;No, you don't want to write it the way you&rsquo;re thinking. There&rsquo;s a vastly better way to solve this whole class of problems.&rdquo; Me: <em>brain explodes</em></blockquote><br /><div style="text-align: right">&mdash;<a href="http://www.randomhacks.net/">Eric M. Kidd</a></div><br /><br />Where do you go for that kind of information? How about to people who spend all day thinking about collections that cannot change because their programming languages are purely functional?<br /><br />Yes, what I&#8217;ve just described is <em>exactly</em> how languages like Haskell implement mutable collections like dictionaries and lists. In purely functional languages, collections never change. Adding something to a collection is really creating a new collection with an extra element. This is the exact same implementation that we need for building optimistically locked collections in a multi-threaded environment!<br /><br />Haskell teaches us extremely useful techniques for writing Enterprise-scale software.<br /><br /><em>And more techniques: <a href="http://raganwald.github.com/2007/05/hard-core-concurrency-considerations.html">Hard-core concurrency considerations</a></em><br /><br /><hr /><br /><ol><li>Now, you might be saying, &#8220;what a waste, this is like locking a table in a database when we should be locking <em>rows</em>.&#8221; But if you look at the database closely, it does lock the table when you perform certain actions like deleting a row. Or it does something more complicated, and now that you&rsquo;ve read the entire post, you know what it really does.</li><br /><li>Making Copies on Writes is called <em>copy on write semantics</em>, or COW for short. Chew on that for a while.</ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/java.html">java</a>, <a rel='tag' href="http://raganwald.github.com/labels/lispy.html">lispy</a>, <a rel='tag' href="http://raganwald.github.com/labels/popular.html">popular</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/haskell-not-just-for-language-weenies.html" title="permanent link">10:38 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Tuesday, April 03, 2007</div>
			

			<div class="Post"><a name="8761538973444061253">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/we-havent-heard-it-all-before.html" title="permanent link">We haven't heard it all before</a></span>
					<div style="clear:both;"></div>I used to travel the commuter train in Ontario. They work on an honour system: if you don&#8217;t purchase and punch a ticket (or purchase a monthly pass), you get a $90 ticket if a transit police officer spot checks you.<br /><br />One of these officers told me that he had a standing policy of overlooking anyone who told him a new story. But he really had &#8220;heard it all.&#8221;<br /><br />When, I asked, was the last time he heard a new one? It seems a few months previously a woman had said&#8212;with a  straight face&#8212;that she had just polished her nails and couldn&#8217;t get her ticket out of her purse to punch it.<br /><br />He laughed and let her go, nobody had dared to say anything so narcissistic before.<br /><br />Perhaps that is the new FizzBuzz rule: by all means let yourself go, but if we&#8217;ve seen substantially the same thing before&#8230; prepare for flames.<br /><br /><a href="http://www.adampetersen.se/articles/fizzbuzz.htm">Solving FizzBuzz using compiler error messages</a><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/we-havent-heard-it-all-before.html" title="permanent link">7:22 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			

			<div class="Post"><a name="2987910296742350048">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/hypergame-ii.html" title="permanent link">Hypergame II</a></span>
					<div style="clear:both;"></div><em>Reg! An occasional rant on etiquette is interesting, but I read your blog to reconnect with my love of software. Do you still love what you do, or have you turned into one of those incoherent rage artists that has nothing better to do than stir up wasp nests and trade flames on programming.reddit.com?</em><br /><br />Err, thanks. I&#8217;ve been chewing <a href="http://raganwald.github.com/2007/03/programmers-are-sages.html">Kibble</a> for a few days, and I needed to get back to what I love.<sup>1</sup> So here&#8217;s a meandering dump of something on my mind. There is no particular point to this post, it&#8217;s just a way I have of reminding myself how much fun being well enough to wonder &#8220;why?&#8221; really is.<br /><br /><hr /><br /><br />My <a href="http://xraylab.org" title="Paul Davies">brother-in-law</a> was in town this past weekend, and we enjoyed a Sunday afternoon game of <a href="http://www.amazon.com/gp/product/B00000JZG7?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=B00000JZG7">Acquire</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=B00000JZG7" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />. Formal games are much on my mind lately, thanks to the last Amazon delivery dropping <a href="http://www.amazon.com/gp/product/1568811276?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1568811276">On Numbers and Games</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=1568811276" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> on my doorstep.<br /><br />Thinking about games reminded me William Zwicker&#8217;s <a href="http://raganwald.github.com/2007/04/repost-hypergame-and-infinity.html">Hypergame</a> pseudo-paradox, and that made me wonder how to describe it using programs instead of games. I came up with the following:<br /><br />&ldquo;You have a computer. By which I mean any computer, real, imaginary, even an idealized <a href="http://en.wikipedia.org/wiki/Turing_machine" title="Turing machine - Wikipedia, the free encyclopedia">Turing machine</a>. It runs programs, obviously. Now programs on this computer are finite or infinite. By which I mean, a finite program <em>always</em> halts eventually, and an infinite program does not always halt eventually. Note that an infinite program might halt or it might not. perhaps it contains some randomization element. Perhaps it has different inputs that cause it to do different things.<br /><br />&ldquo;Now let&#8217;s posit the idea of an algorithm that can examine a program for this machine and determine whether it is finite or infinite. Note that this algorithm need not be a program that runs on the machine, we allow that it can live &#8220;outside&#8221; the machine.<br /><br />&ldquo;I ask you this question: the computer you are thinking of, can we write a <em>bootstrap program</em> (or &#8220;bootstrapper&#8221;) for this computer? In other words, can we write a program that loads and executes other programs? Or more generally, does this computer support self-reference in programs?<br /><br />&ldquo;Consider a general bootstrapper for the computer. Is it a finite program or an infinite program? Obviously, it is an infinite program, because it can load and execute any other program, and if it loads an infinite program, then its own execution will be infinite.<br /><br />&ldquo;But what if we write a restricted version of the bootstrapper: it will only load <em>finite</em> programs. Maybe we mark those programs with a special bit, maybe it just trusts us not to cheat and give it an infinite program.<br /><br /><strong>Is the restricted bootstrapper a finite program</strong>?<br /><br />&ldquo;If it only loads finite programs, you would think it is finite. After all, it loads and executes a program that runs in finite time, so it must execute in finite time. But if that&#8217;s the case, why can&#8217;t the restricted boostrapper load <em>itself</em>? It loads and runs finite programs, and if it&#8217;s a finite program then it can load and execute itself!<br /><br />&ldquo;In that case, it isn&#8217;t a finite program. Whew! Wait a second, if it isn&#8217;t a finite program, then the pseudo-paradox disappears, and we&#8217;re back to the fact that it must run in finite time. So it <em>is</em> a finite program!&rdquo;<br /><br />Well, there are lots of ways to explain this, and they&#8217;re all interesting. You can posit that the <a href="http://en.wikipedia.org/wiki/Halting_problem" title="Halting problem - Wikipedia, the free encyclopedia">halting problem</a> is undecidable, as <a href="http://www.amazon.com/gp/product/0802775802?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0802775802" title="Alan Turing: The Enigma">Alan Turing</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0802775802" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> did. If so, we have just proven it for an interesting case, where we allow the computation of whether a program halts outside of the computation space of our machine.<br /><br />You can also note that the problem goes away if our computer is too simple to allow self-reference. That&#8217;s an important result in its own right.<br /><br />You can wonder whether &#8220;finite&#8221; is one of those things that has at least three states: true, false, and &#8220;strange.&#8221; Does allowing &#8220;strange&#8221; as the result of your &#8220;finite test algorithm&#8221; remove the paradox?<br /><br /><hr /><br /><ol><li>Speaking of which, <a href="http://www.amazon.com/gp/product/0521663504?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0521663504">Purely Functional Data Structures</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0521663504" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> arrived in the mail and I&#8217;m looking forward to writing about <a href="http://raganwald.github.com/2007/04/haskell-not-just-for-language-weenies.html" title="What Haskell teaches us about writing Enterprise-scale software">the relationship between Copy on Write semantics and Multi-Version Concurrency-Control protocols for arbitrating shared-memory threaded applications</a>.</li><br /></ol><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/hypergame-ii.html" title="permanent link">6:57 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Monday, April 02, 2007</div>
			

			<div class="Post"><a name="8229726342104670683">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/whither-professionalism-in-our.html" title="permanent link">Whither professionalism in our profession?</a></span>
					<div style="clear:both;"></div>The title of <a href="http://www.37signals.com/svn/posts/347-youre-not-on-a-fucking-plane-and-if-you-are-it-doesnt-matter">this</a> blog post on 37Signals is unprofessional. They are not alone: lots of CEOs <a href="http://en.wikipedia.org/wiki/Larry_Ellison">curse</a>, <a href="http://en.wikipedia.org/wiki/Steve_Jobs">wear jeans</a>, and commit other sacrileges against the code of conduct we call &ldquo;professionalism.&rdquo;<br /><br />What happened?<br /><br />First, there is nothing new about this. Do you consider The Beatles to be &ldquo;old fashioned?&rdquo; Did you know that at one time they were the drug using symbols of counter-culturalism?<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/0596007191?ie=UTF8&tag=raganwald001-20&amp;linkCode=as2&camp=1789&amp;creative=9325&creativeASIN=0596007191"><img style="cursor: pointer;" src="http://raganwald.github.com/uploaded_images/revolution_in_the_valley-742074.jpg" alt="" border="0" /></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&amp;o=1&a=0596007191" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1" /><br /><br /><a href="http://www.amazon.com/gp/product/0596007191?ie=UTF8&tag=raganwald001-20&amp;linkCode=as2&camp=1789&amp;creative=9325&creativeASIN=0596007191">Revolution in the Valley</a> tells the incredible story of the creation of the Macintosh, from the perspectives of the people who were actually there. Itâ€™s packed with behind-the-scenes anecdotes and little-known secrets.<br /><br />Much of the material is available on line <a href="http://folklore.org">for free</a>. Speaking of counter-culturalism and revolutionaries, here is the story of the legendary <a href="http://folklore.org/StoryView.py?project=Macintosh&story=Pirate_Flag.txt">Pirate Flag</a>.<br /><br /></div>There is a certain appeal to being a symbol of upheaval. Every generation has had its rebels. In fact, a major component of fashion in clothes, music, and programming languages is the degree to which it irritates the &ldquo;establishment.&rdquo;<br /><br /><em>Why</em> do you think there are so many people <a href="http://www.bitwisemag.com/2/What-s-Right-With-Ruby">deriding the Ruby Community</a>?<sup>1</sup> They aren&rsquo;t making this irritation up: part of the appeal of the Ruby on Rails ecosystem to certain people is that Matthew Huntbach doesn&rsquo;t like it!<br /><br />Feel free to say that Java doesn&rsquo;t work this way. Like people discovering The Beatles late in life, you missed the nineties when Java was the agent of change and some C++ people were deriding it and its supporters as being unprofessional.<br /><br />I&rsquo;m not saying Ruby lacks objective value. In case you haven&rsquo;t noticed, The Beatles made wonderful music that has passed the test of time. Even though some of their appeal was that parents hated their long hair. And 37Signals have something important to say. Even if they say it in <a href="http://www.flickr.com/photos/eugevon/130610241/">an unprofessional way</a> from time to time.<br /><br />People being people, the long-term forecast is for sustained tension between conservatives who lament the erosion of professionalism and rebels who wear their unprofessionalism on their sleeve.<br /><br />And the irony is, the unprofessionals of today will be the stodgy old codgers of tomorrow.<br /><br />Just ask <a href="http://en.wikipedia.org/wiki/David_Gilmour">David Gilmour, CBE</a>.<br /><br />p.s. Sure, there&rsquo;s an argument about professionalism somehow being correlated with competence. If you wish to make this argument, please be so kind as to provide some empirical evidence in support of your claim. For example, show that programmers <a href="http://raganwald.github.com/2005/07/why-you-need-degree-to-work-for-bigco.html">wearing a suit to work</a> outperform their colleagues who do not.<br /><br /><hr/><br /><ol><li>I have <em>no idea</em> what the &ldquo;Ruby Community&rdquo; is. How do you define membership in this community? Matz is obviously in, but after that, who? Why the Lucky Stiff? DHH? Me? I don&rsquo;t recall being asked to join.</li></ol><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/whither-professionalism-in-our.html" title="permanent link">9:33 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Sunday, April 01, 2007</div>
			

			<div class="Post"><a name="4000626346512164399">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/04/effing.html" title="permanent link">Effing A!</a></span>
					<div style="clear:both;"></div><blockquote>I think a lot of people get too serious in their lives and stop trying to do something cool. I mean come on, we&rsquo;re taking man-made machines that traditionally speak ones and zeros, but we write code in a sexy language and some stuff happens.<br /><br />THAT'S SO COOL!!<br /><br />If that&rsquo;s not your reaction, you shouldn&rsquo;t be a programmer.</blockquote><div style="text-align: right;"><a href="http://evang.eli.st/blog/2007/4/1/why-you-have-to-work-for-a-startup">Why You Have To Work For A Startup</a></div><br /><br /><blockquote>Either you decide to stay in the shallow end of the pool or you go out in the ocean... So many of our dreams at first seem impossible, then they seem improbable, and then when we summon the will, they soon become inevitable.</blockquote><div style="text-align: right;">Christopher Reeve, 1952 &ndash; 2004</div><br /><br /><blockquote>You think, &ldquo;I could sit at a desk and poke at a computer all day.&rdquo;<br />I forget there is a desk, what day it is,<br />or that my chair's been broken since I started here.</blockquote><div style="text-align: right;">Masukomi, <a href="http://weblog.masukomi.org/2007/3/12/you-really-don-t-want-to-become-a-programmer">You really don&rsquo;t want to &ldquo;become&rdquo; a programmer</a></div><br /><br /><blockquote>Always have a vision. Why spend your life making other people&rsquo;s dreams?</blockquote><div style="text-align: right;">Orson Welles 1915 &ndash; 1985</div><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/04/effing.html" title="permanent link">9:54 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		


	</div>







	<div id="rightcontent">

		<div class="SideBarTitle"><a href="http://braythwayt.com">Reg Braithwaite</a></div>

		<br />

		<br />

		<div class="SideBarTitle">Recent Writing</div>

                <a href="http://homoiconic.com">Homoiconic</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Share</div>

                <a href="http://github.com/raganwald/rewrite_rails">rewrite_rails</a> /

                <a href="http://github.com/raganwald/andand">andand</a> /

                <a href="http://weblog.raganwald.com/source/unfold.rb.html">unfold.rb</a> /

                <a href="http://weblog.raganwald.com/source/string_to_proc.rb.html">string_to_proc.rb</a> /

                <a href="http://weblog.raganwald.com/source/dsl_and_let.html">dsl_and_let.rb</a> /

                <a href="http://weblog.raganwald.com/source/comprehensions.html">comprehension.rb</a> /

                <a href="http://weblog.raganwald.com/source/lazy_lists.html">lazy_lists.rb</a>

		<br />

		<br />

		<div class="SideBarTitle">Beauty</div> <!-- idioms -->

		<a href="http://raganwald.github.com/2008/04/is-strictly-equivalent-to.html">IS-STRICTLY-EQUIVALENT-TO-A</a> /

		<a href="http://raganwald.github.com/2008/03/spaghetti-western-coding.html">Spaghetti-Western Coding</a> /

		<a href="http://raganwald.github.com/2007/12/golf-is-good-program-spoiled.html">Golf is a good program spoiled</a> /

		<a href="http://raganwald.github.com/2007/11/programming-conventions-as-signals.html">Programming conventions as signals</a> /

                <a href="http://raganwald.github.com/2007/10/too-much-of-good-thing-not-all.html">Not all functions should be object methods</a>

<br/><br/>

                <a href="http://raganwald.github.com/2007/05/not-so-big-software-application.html">The Not So Big Software Design</a> /

		<a href="http://raganwald.github.com/2007/04/writing-programs-for-people-to-read.html">Writing programs for people to read</a> /
                
		<a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html">Why Why Functional Programming Matters Matters</a> /

		<a href="http://raganwald.github.com/2007/02/but-y-would-i-want-to-do-thing-like.html">But Y would I want to do a thing like this?</a>

		<br />

		<br />

		<div class="SideBarTitle">Work</div>

                <a href="http://raganwald.github.com/2008/04/single-most-important-thing-you-must-do.html">The single most important thing you must do to improve your programming career</a> /

                <a href="http://raganwald.github.com/2008/02/naive-approach-to-hiring-people.html">The Na&iuml;ve Approach to Hiring People</a> /

                <a href="http://raganwald.github.com/2008/01/no-disrespect.html">No Disrespect</a> /

		<a href="http://raganwald.github.com/2006/11/take-control-of-your-interview.html">Take control of your interview</a> /

		<a href="http://raganwald.github.com/2006/08/three-tips-for-getting-job-through.html">Three tips for getting a job through a recruiter</a> /

		<a href="http://raganwald.github.com/2006/06/my-favourite-interview-question.html">My favourite interview question</a>

                <br/>

                <br/>



                <div class="SideBarTitle">Buy Raganwald a Coffee</div>
				
                       <div style="float: right; width: 64px; margin-left: 6px; font-style: italic; text-align: center; font-size: 80%;"><form name="DoubleEspresso" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_donations">
<input type="hidden" name="business" value="raganwald@gmail.com">
<input type="hidden" name="item_name" value="Buy Raganwald a Darkhorse Double Espresso">
<input type="hidden" name="item_number" value="DoubleEspresso">
<input type="hidden" name="amount" value="3.15">
<input type="hidden" name="no_shipping" value="0">
<input type="hidden" name="logo_custom" value="http://raganwald.github.com/uploaded_images/coffeecup.png">
<input type="hidden" name="no_note" value="1">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="tax" value="0">
<input type="hidden" name="lc" value="CA">
<input type="hidden" name="bn" value="PP-DonationsBF">
<input type="image" src="http://raganwald.github.com/uploaded_images/coffeecup.png" width="64" height="64" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form></div>If you enjoy reading my weblog, please consider <a href="#"
title="Buy Raganwald a darkhorse double espresso, for $3.15" onclick="javascript: document.DoubleEspresso.submit();">buying me a Darkhorse Double Espresso, for just $3.15</a>
                       Thank you!

		<br />

		<br />



		<div class="SideBarTitle">Management</div>

		<a href="http://raganwald.github.com/2008/02/exception-handling-in-software.html">Exception Handling in Software Development</a> /

		<a href="http://raganwald.github.com/2007/11/what-if-powerful-languages-and-idioms.html">What if powerful languages and idioms only work for small teams?</a> /

                <a href="http://raganwald.github.com/2007/08/bricks.html">Bricks</a> /

                <a href="http://raganwald.github.com/2007/06/which-theory-first-evidence.html">Which theory fits the evidence?</a> /

                <a href="http://raganwald.github.com/2007/06/still-failing-still-learning.html">Still failing, still learning</a> /

		<a href="http://raganwald.github.com/2005/01/what-ive-learned-from-failure.html">What I&rsquo;ve learned from failure</a>

		<br />

		<br />

		<div class="SideBarTitle">Notation</div> <!-- languages -->

		<a href="http://raganwald.github.com/2008/06/what-does-do-when-used-as-unary.html">The unary ampersand in Ruby</a> /

		<a href="http://raganwald.github.com/2008/02/1100inject.html">(1..100).inject(&amp;:+)</a> /

                <a href="http://raganwald.github.com/2007/10/challenge-of-teaching-yourself.html">The challenge of teaching yourself a programming language</a> /

                <a href="http://raganwald.github.com/2006/11/significance-of-meta-circular_22.html">The significance of the meta-circular interpreter</a> /
                
                <a href="http://raganwald.github.com/2007/08/block-structured-javascript.html">Block-Structured Javascript</a> /

                <a href="http://raganwald.github.com/2007/02/haskell-ruby-and-infinity.html">Haskell, Ruby and Infinity</a> /

		<a href="http://raganwald.github.com/2007/01/closures-and-higher-order-functions.html">Closures and Higher-Order Functions</a>

		<br />

		<br />

		<div class="SideBarTitle">Opinion</div>

		<a href="http://raganwald.github.com/2008/05/why-apple-is-more-expensive-than-amazon.html">Why Apple is more expensive than Amazon</a> /

		<a href="http://raganwald.github.com/2008/04/why-we-are-biggest-obstacle-to-our-own.html">Why we are the biggest obstacles to our own growth</a> /

		<a href="http://raganwald.github.com/2008/03/process-is-to-software-as-software-is.html">Is software the documentation of business process mistakes?</a> /

		<a href="http://raganwald.github.com/2007/09/we-have-lost-control-of-apparatus.html">We have lost control of the apparatus</a> /

		<a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-i.html">What I&rsquo;ve Learned From Sales</a>
                <a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-i.html" title="What I've Learned From Sales, Part I: Don't Feed the Trolls">I</a>, 
                <a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-ii.html" title="What I've Learned from Sales, Part II: Wanna Bet?">II</a>, 
                <a href="http://raganwald.github.com/2007/10/how-to-use-blunt-instrument-to-sharpen.html" title="What I've Learned from Sales, Part III: How to use a blunt instrument to sharpen your saw">III</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Whimsey</div>

                <a href="http://raganwald.github.com/2008/05/narcissism-of-small-code-differences.html">The Narcissism of Small Code Differences</a> /

		<a href="http://raganwald.github.com/2008/01/billy-martins-technique-for-managing.html">Billy Martin&rsquo;s Technique for Managing his Manager</a> /

		<a href="http://raganwald.github.com/2007/10/three-stories-about-tao.html">Three stories about The Tao</a> /

		<a href="http://raganwald.github.com/2007/02/programming-language-stories.html">Programming Language Stories</a> /

		<a href="http://raganwald.github.com/2005/07/why-you-need-degree-to-work-for-bigco.html">Why You Need a Degree to Work For BigCo</a>

		<br />

		<br />

		<div class="SideBarTitle">History</div>

		
			<a href="http://raganwald.github.com/archives/2004_06_01_archive.html">06/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_07_01_archive.html">07/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_08_01_archive.html">08/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_09_01_archive.html">09/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_10_01_archive.html">10/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_11_01_archive.html">11/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_12_01_archive.html">12/04</a> /
		
			<a href="http://raganwald.github.com/archives/2005_01_01_archive.html">01/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_02_01_archive.html">02/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_03_01_archive.html">03/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_04_01_archive.html">04/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_06_01_archive.html">06/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_07_01_archive.html">07/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_08_01_archive.html">08/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_09_01_archive.html">09/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_10_01_archive.html">10/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_11_01_archive.html">11/05</a> /
		
			<a href="http://raganwald.github.com/archives/2006_01_01_archive.html">01/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_02_01_archive.html">02/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_03_01_archive.html">03/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_04_01_archive.html">04/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_05_01_archive.html">05/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_06_01_archive.html">06/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_07_01_archive.html">07/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_08_01_archive.html">08/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_09_01_archive.html">09/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_10_01_archive.html">10/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_11_01_archive.html">11/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_12_01_archive.html">12/06</a> /
		
			<a href="http://raganwald.github.com/archives/2007_01_01_archive.html">01/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_02_01_archive.html">02/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_03_01_archive.html">03/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_04_01_archive.html">04/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_05_01_archive.html">05/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_06_01_archive.html">06/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_07_01_archive.html">07/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_08_01_archive.html">08/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_09_01_archive.html">09/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_10_01_archive.html">10/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_11_01_archive.html">11/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_12_01_archive.html">12/07</a> /
		
			<a href="http://raganwald.github.com/archives/2008_01_01_archive.html">01/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_02_01_archive.html">02/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_03_01_archive.html">03/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_04_01_archive.html">04/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_05_01_archive.html">05/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_06_01_archive.html">06/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_07_01_archive.html">07/08</a> /
		
		<script type="text/javascript" language="Javascript">if (location.href.indexOf("archive")!=-1) document.write("<strong><a href=\"http://raganwald.github.com/index.html\">Current Posts</a></strong>");</script>
		<br/></p>
		<br/>

		<p class="profile-link"><a href="http://feeds.raganwald.com/raganwald"><img src="http://feeds.raganwald.com/~fc/raganwald?bg=&amp;fg=&amp;anim=0" height="26" width="88" style="border: 0pt none ; vertical-align: middle;" alt="" /></a>&nbsp;<a href="http://feeds.raganwald.com/raganwald" rel="alternate" type="application/rss+xml"><img src="http://www.raganwald.com/fb/images/pub/feed-icon16x16.png" alt="" style="border: 0pt none ; vertical-align: middle;"></a>&nbsp;<a href="http://feeds.raganwald.com/raganwald" rel="alternate" type="application/rss+xml">Subscribe in a reader</a></p>

	</div>





	<div style="visibility: hidden">
		
		
		<script type="text/javascript" src="http://www.assoc-amazon.com/s/link-enhancer?tag=raganwald001-20">
		</script>
		<noscript>
			<img src="http://www.assoc-amazon.com/s/noscript?tag=raganwald001-20" alt="" />
		</noscript>
	</div>

</body>
</html>