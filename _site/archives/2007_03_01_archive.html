<html> 
<head>
        
        <title>raganwald: 03/07</title>

	<link rel="stylesheet" type="text/css" href="/assets/css/weblog.old.css" />
	<link rel="stylesheet" type="text/css" href="/assets/css/sunburst.css" />

	<!-- Meta Information --> 
	<!-- put "BlogMetaData" between angle-dollar and dollar angle  to restore defaults -->

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="MSSmartTagsPreventParsing" content="true" />
	<meta name="generator" content="Blogger" />

	<link rel="alternate" type="application/atom+xml" title="Raganwald Posts + Links(Atom)" href="http://feeds.raganwald.com/raganwald" />
	<!-- <link rel="alternate" type="application/rss+xml" title="Raganwald Posts + Links (RSS 2.0)" href="http://feeds.raganwald.com/raganwald" /> -->
	<link rel="alternate" type="application/atom+xml" title="Raganwald Posts Only (Atom)" href="http://feeds.raganwald.com/raganwald_articles" />
	<link rel="alternate" type="application/atom+xml" title="Raganwald on Twitter (Atom, experimental)" href="http://twitter.com/statuses/user_timeline/14165291.atom" />

	<link rel="service.post" type="application/atom+xml" title="Raganwald" href="https://www.blogger.com/atom/7618424" />
	<link rel="service.post" type="application/atom+xml" title="Raganwald (Atom 1.0)" href="http://www.blogger.com/feeds/7618424/posts/full" />

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.blogger.com/rsd.g?blogID=7618424" />



    <link rel="openid.server" href="http://www.myopenid.com/server " />
    <link rel="openid.delegate" href="http://reginald.braithwaite.myopenid.com/" />
    <meta http-equiv="X-XRDS-Location" content="http://reginald.braithwaite.myopenid.com/xrds" />




	<style type="text/css">
	@import url("http://www.blogger.com/css/blog_controls.css");
	@import url("http://www.blogger.com/dyn-css/authorization.css?blogID=7618424");
	</style>

	<!-- /Meta Information -->
</head>

<body>

	<div id="leftcontent">
			<img src="http://i.minus.com/ioSY4FTZKVCwz.png"
			width="350" height="150" border="0" alt="raganwald" title="raganwald 2008" align="middle"/><br/>
<!--
<div style="background-color:black; text-align: center; color: white; padding: 10px 10px 10px 10px;">
<p><font size="+1">Arthur C. Clarke</font><font size="-1">, 1917&thinsp;&ndash;&thinsp;2008
<br/>&ldquo;If we have learned one thing from the history of invention and discovery,
<br/>it is that, in the long run&mdash;and often in the short one&mdash;the most daring prophecies seem laughably conservative.&rdquo;</font>
</p></div>
-->
		
			
				<div class="DateHeader">Sunday, March 25, 2007</div>
			

			<div class="Post"><a name="5900028157710085563">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/ad-hominem.html" title="permanent link">Ad Hominem</a></span>
					<div style="clear:both;"></div><blockquote>When two or more people are arguing an objective point and one of the participants makes an <em><a href="http://en.wikipedia.org/wiki/Ad_hominem">Ad Hominem</a></em> observation, the discussion has effectively ended. Participants may ignore the person making the observation or even retire from the discussion entirely without any requirement to refute the Ad Hominem observation. Retirement from the discussion shall not be interpreted as having no further thoughts to express on the original subject.<br /></blockquote><br />Ad Hominem observations are easy to spot. The most obvious is when a participant uses phrases like <em>Lisp Weenie</em>, <em>Apple Fanboy</em>, or <em>Windows Apologist</em>. Even when those phrases are not directly applied to a participant, their very use takes a discussion away from an objective comparison on merit.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/1567314430?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1567314430"><img border="0" src="http://raganwald.github.com/assets/images/old//how_to_win_an_argument.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=1567314430" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br />The idea of trying to &ldquo;win&rdquo; an argument is ridiculous: such things are Pyhrric victories at best. However, <a href="http://www.amazon.com/gp/product/1567314430?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1567314430">How to Win an Argument: Surefire Strategies for Getting Your Point Across</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=1567314430" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> does teach you how to recognize and counter many of the fallacious and downright diversionary tactics we all encounter in online debates. With this book you can at least reach an honourable d&eacute;tante where all parties leave with a deeper understanding of each other&rsquo;s point of view.<br /><br /></div>For example, some people have said that I am a &#8220;Ruby Fanboy.&#8221;<sup>1</sup> Even if I was a rabid, one-sided enthusiast, does that mean that when my statements are right they should be discounted for passion? Or that I am somehow incapable of ever making a correct statement about programming languages?<br /><br />If an idea is wrong, it is wrong, and the idea itself can be demolished through simple inspection and argument without speculating on the motives of the author.<br /><br />Ad Hominem observations need not be about a participant. There is an eternal (and rather tedious) debate about whether programmers should be permitted to actually <em>program</em>, or whether they should be restrained and forced to cut and paste boilerplate code (see <a href="http://en.wikipedia.org/wiki/Design_pattern_(computer_science">Design Patterns</a>). You will hear an argument that a particular programming technique&#8212;perhaps meta-programming, perhaps reflection&#8212;is &#8220;too complicated for maintenance programmers.&#8221;<br /><br />This is a thinly veiled Ad Hominem attack on some nameless, faceless programmers who are somehow qualified to maintain code but not to write it, and who are not present in the discussion to assert or deny their competence.<sup>2</sup><br /><br /><strong>What to do when confronted with an Ad Hominem observation</strong><br /><br />The very best thing to do is walk away. That takes real courage, but it is the very highest and purest response. The second best thing to do is to point out the fallacy, perhaps by linking to Wikipedia&rsquo;s reference or to this post.<sup>3</sup><br /><br />The very worst mistake to make is the one I recently made: disputing the wrong statements people make about you. This brings no satisfaction to yourself, changes nothing in the mind of the ignorant, and the running flame war is a noisy distraction for those who are reading the discussion for its content.<br /><br />Although it can be hard to walk away, it is the right thing to do. I will respect you for it.<br /><br /><strong>Exception:</strong><br /><br />This is a <em>personal</em> weblog. Therefore, observations on this weblog about <em>me</em> are always on-topic. Ad Hominem observations about other persons, such as those leaving comments or those I choose to quote, are still off-topic and effectively end discussion.<br /><br /><em>Update: Why I allow Ad Hominem observations about me in comments, and why I encourage critics with substantially divergent views to write their own weblog and use a comment to lead readers to their writings.</em><br /><br />I&rsquo;m comfortable with people driving by and tossing a bag of feces on my lawn (crappy metaphor, that).<br /><br />After all, I have the power of deletion and I can write an entire essay to defend myself. So I really can&rsquo;t get too uppity if somone wants to say, &ldquo;Reg, you are a drivelling windbag&rdquo; in a comment.<br /><br />When they drive by <i>my</i> weblog, I have my entire house on display. Someone observing the exchange sees me in my element.<br /><br />If they read all of my words and look at the comment and then think, &ldquo;that about nails it, Reg is the <b>definitive</b> font of idiocy,&rdquo; then I have no one to blame but myself.<br /><br />That&rsquo;s the main reason I don&rsquo;t consider Ad Hominems (or Genetic Fallacies or whatever we choose to call personal attacks with bags of sewage) off topic on the weblog.<br /><br />It is also why I encourage some critics to write their own weblog. It is not because I don&rsquo;t want the criticism: I encourage them to link to their writing. It is because others can judge their words in the context of their overall position and viewpoint. This is much more valuable to other readers, who can follow a link from my words to all of their words.<br /><br />Now personal attacks in places <i>other than</i> a weblog are an entirely different matter. If I am on programming.reddit.com and I accuse someone of &ldquo;Clinging to their WinAPI blanket,&rdquo; this is like an exchange of slaps in a saloon.<br /><br />Other persons do not have the benefit of judging my rudeness in context. Who is this person I am disparaging? Do they have a long and consistent record of exemplary thinking? Am I out to lunch?<br /><br />Perhaps I am not only off topic, but also deeply wrong. How is a third party to know without laboriously googling each of us?<br /><br />For this reason, although personal attacks are always rude, I think they really devalue a discussion in a &ldquo;public&rdquo; forum like Usenet, reddit, or on a third party&rsquo;s weblog.<br /><br /><strong><a name="kathy">Update: Kathy Sierra&rsquo;s Plight</a></strong><br /><br />As she puts it, <a href="http://headrush.typepad.com/creating_passionate_users/2007/03/as_i_type_this_.html">Death threats against bloggers are NOT &ldquo;protected speech&rdquo;</a>.<br /><br />A few years ago, I would have guessed that personal attacks probably follow a normal distribution, and a very rare few would be vicious to the point of being criminal, just as a very few would be so mild as to pass unnoticed, with the vast majority being obnoxious but unremarkable.<br /><br />However, with time comes experience. And I agree with Giles Bowkett&rsquo;s perspective that <a href="http://gilesbowkett.blogspot.com/2007/03/stalkers-considered-harmful.html">this behaviour is <strong>stalking</strong></a>. Not just taunting, or bullying, but evidence of unsettling and dangerous behaviour.<br /><br />There is one line that some commentary crosses when it creates an atmosphere for dread and becomes criminal. We can argue over the Port and Cigars where the line between law-abiding and law-breaking is and what is reasonable doubt.<br /><br />But there is another line where it is evidence of being more than just a personal attack on the recipient but also part of a relationship the attacker is trying to create&mdash;by force&mdash;with the victim.<br /><br />I&rsquo;m not an expert in these matters. Feminists I know consider wolf-whistling at a pretty girl and shouting at her to &rdquo;shake that bootie!&rdquo; to be over the line. I do feel that Kathy&rsquo;s stalker(s) crossed that line.<br /><br />Note the plural. The other thing that matters in these cases is herd behaviour. There are wolves that follow the leader. This is why it is a crime to incite others to commit crimes. never mind that garbage about &rdquo;if I told you to <a href="http://www.bridgeday.info/photogallery.php" title="Bridge Day BASE Jumping">jump off a bridge</a>, would you do it?&rdquo;<br /><br />In fact, a major component of <a href="http://en.wikipedia.org/wiki/Psychopath">psychopathic behaviour</a> is manipulating others to do your own ends. &ldquo;I had no idea they would do such a thing!&rdquo; is a clich&eacute; excuse from people who tried very hard to get someone else to do such a thing. They deny it was them, they deny they intended anything dangerous, they act hurt that anyone could believe they were being mean...<br /><br />We have all seen the bully in the school yard leading the intimidation, this is the same thing but we are adults and now we live with the fear of kidnapping, of rape, and of murder. And now the deterrence is more than a scolding, there may be legal consequences for these bullies.<br /><br />Back to Ad Homeinem and other personal attacks. Every one we use is a drop in an Ocean of hurt feelings. Every insult on line is a tiny smidgen of incivility that gives permission to the next person.<br /><br />I&rsquo;m not trying to throw guilt around and say that calling one of my posts wankery is equivalent to a group of men stalking a woman on line. But I am asking everyone to consider the tone of the Internet as a whole and to try to move it towards the light and away from the dark.<br /><br /><hr /><br /><ol><li>Would someone who has read my own <a href="http://raganwald.github.com/2006/07/six-things-i-also-dislike-about-ruby.html">criticisms of the Ruby Language</a> and <a href="http://raganwald.github.com/2007/02/why-ruby-is-not-acceptable.html">its implementation</a> write such a thing?</li><br /><li>This does not mean that overly complex code is a good idea: &#8220;It is twice as difficult to debug a program as to write it. Therefore, if you put all of your creativity and effort into writing the program, you are not smart enough to debug it.&#8221;</li><br /><li>Here&rsquo;s an interesting reply suggesting that sometimes the best thing to do is to <a href="http://brokenhut.livejournal.com/220483.html">point out the fallacy and continue the discussion</a>. And this just in: a thoughtful essay on <a href="http://blog.moertel.com/articles/2007/03/26/debate-to-learn-learn-to-debate">using debates to actually learn rather than to &ldquo;win.&rdquo;</a></li></ol><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/ad-hominem.html" title="permanent link">2:46 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Friday, March 16, 2007</div>
			

			<div class="Post"><a name="6177546136968725833">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html" title="permanent link">An Approach to Composing Domain-Specific Languages in Ruby</a></span>
					<div style="clear:both;"></div><em>Whoa! This looks like a long post with a lot of code snippets. Am I going to have to do a lot of hard thinking, or can I just relax and enjoy a good rambling essay?</em><br /><br />This is a bit long, probably (like all my posts) 200% longer than necessary. If you just want to see a neat DSL that implements Haskell and Python&rsquo;s List Comprehensions written in Ruby, just <a href="#lcir">scroll to the bottom</a>.<br /><br /><em>If I do bother to read it all, will I learn some neat hacks?</em><br /><br />Yes, but you could learn them just as well by reading the <a href="#dslsource">source code</a> directly.<br /><br /><em>So the benefit of reading the whole thing is...?</em><br /><br />The List Comprehensions DSL is the <strong>what</strong>. The source code is the <strong>how</strong>. But the essay is the <strong>why</strong>.<br /><br />Reading the whole thing will take you through some of the pitfalls of writing DSLs and explain why I chose my particular workarounds.<br /><br />Furthermore, <a href="http://raganwald.github.com/2007/02/why-ruby-is-not-acceptable.html">there are a lot of corners in Ruby where you can easily assume that things work one way, but really they don&rsquo;t</a>. If you actually try the snippets on your computer, you&rsquo;ll have a much better chance of remembering where the pitfalls are. That&rsquo;s why I tried to give a working example for every point, rather than just explaining things in words.<br /><br />Of course, if you have no interest in writing your own Domain Specific Languages in Ruby just yet... this isn&rsquo;t meant as a <em>popular</em> essay, rather it&rsquo;s meant as an experience report for fellow <em>practitioners</em>. And honestly, there&rsquo;s a world market for maybe five tools for writing DSLs in Ruby.<br /><br />But since you&rsquo;re here, the essay starts below!<br /><br /><hr/><br /><strong>An Approach to Composing Domain-Specific Languages in Ruby</strong><br /><br />Ruby is often touted as a good language for writing Domain-Specific Languages (&#8220;DSLs&#8221;). There are a few arguments in favour of writing a DSL as part of an application.<br /><br />The first argument that comes to mind is that if the application&#8217;s domain experts have a specific natural language or jargon of their own, writing a DSL makes it easy for programmers and domain experts to collaborate. While it is rare to find substantial applications entirely written by non-programmers at this time in <em>any</em> language, it is quite feasible for non-programmers to write or validate portions of an application representing its &#8220;business rules&#8221; or domain logic, while programmers maintain its infrastructure.<br /><br /><pre><code>    include StarbucksDSL<br />    order = latte venti, half_caf, non_fat, no_foam, no_whip<br />    print order.prepare<br /></code></pre><p style="text-align: right;">&#8212;<a href="http://obiefernandez.com/presentations/obie_fernandez-agile_dsl_development_in_ruby.pdf">Building Domain Specific Languages in Ruby</a></p><br />Another argument in favour of a DSL is that even when non-programmers are not involved directly in coding an application, the programmers themselves often have a jargon of their own to describe entities, algorithms and data structures in the application. Having portions of the application written in a language closely resembling the programmer&#8217;s own jargon makes it easy for them to read each other&#8217;s work and understand its intent.<br /><br />Successful examples of DSLs embedded within existing languages and frameworks include <a href="http://www.rubyonrails.org/">Ruby on Rails</a>&#8217; ActiveRecord, where statements such as:<br /><br /><pre><code>    has_and_belongs_to_many :Bar<br />    validates_presence_of :blitz<br />    some_bars = Bar.find_by_tavern_license(license_number)<br /></code></pre><br />Are self-documenting to anyone familiar with relational models.<br /><br />The final argument I&#8217;ll repeat here is that a DSL is a very effective way to separate the <em>what</em> from the <em>how</em> of an algorithm. <a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html">Separation of concerns is a desirable property of good programs</a>, and DSLs provide this separation very clearly. In the ActiveRecord examples above, the exact mechanisms of relating tables, validating records, and performing searches is &#8220;abstracted away&#8221; from the code where the programmer declares how she would like the results used.<br /><br /><strong>Freedom is Slavery</strong><br /><br />DSLs can be hacked together quickly in Ruby (whether they can be made sufficiently robust for your production needs may require considerably more care). Hacking a DSL together with little effort is a benefit, especially when prototyping: sometimes the best way to design a DSL is to try to use it, so you can discover what you need to express.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0672328844"><img border="0" src="http://raganwald.github.com/assets/images/old//the_ruby_way.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br /><a href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0672328844">The Ruby Way</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is the perfect second Ruby book for serious programmers. The Ruby Way contains more than four hundred examples explaining how to do everything from distribute Ruby with Rinda to dynamic programming techniques just like these.<br /><br /></div>Some developers have raised the concern that extensive use of &#8220;magic&#8221; features leads to code that cannot be understood or maintained.<sup>1</sup> My own feeling is that DSLs lead to code that is easier to understand, not more difficult to understand. This leaves an argument about maintenance. Some techniques for meta-programming, such as extending core classes like Array, have what you might call &#8220;non-local effects.&#8221;<br /><br />For example, two different pieces of code might try to extend the same core class, interfering with each other. Each works in isolation and passes all of its unit tests. But when plugged into a larger application that uses them together, they break.<br /><br /><blockquote><br />  Lispers are among the best grads of the Sweep-It-Under-Someone-Else&#8217;s-Carpet School of Simulated Simplicity.<br /></blockquote><br /><p style="text-align: right;">&#8212;Larry Wall</p><br />Another problem occurs with extending the <code>Kernel</code> class or creating &#8220;top level&#8221; methods to be used as verbs in a DSL. You end up with name space crowding: you must be very careful that you do not redefine en existing method.<br /><br />To fix this problem, the code that implements the DSL needs to be contained so that it does not interfere with other code. We can still implement verbs as methods, but we must implement those methods in separate objects, classes, or modules.<br /><br /><strong>Zen in the Art of Program Maintenance</strong><br /><br />An established technique for implementing methods in objects is to define the methods and then execute a block of code using <code>instance_eval</code> so that it has access to the object&#8217;s methods.<br /><br /><blockquote><br />  I&#8217;m trying to get the Zen of building DSLs using Ruby. After reading a dozen or so pieces referenced by my favourite search engine, I have a feeling I&#8217;m still not quite getting it.<br /></blockquote><br /><p style="text-align: right;">&#8212;<a href="http://pluralsight.com/blogs/dbox/archive/2006/05/07/22985.aspx">Don Box</a></p><br />You know, code expresses an idea better than words express an idea&#8230; when the idea is about coding. Please try this example in irb. Don&#8217;t just skim the text and nod: there&#8217;s a powerful learning mechanism at work when you physically do things as you&#8217;re learning, even if it&#8217;s just copying, pasting, comparing the result in one window to the text in another, and so on:<br /><br /><pre><code>def bjarne<br />    'Barney'<br />end<br /><br />dsl = Object.new<br />def dsl.phred<br />    'Fred'<br />end<br /><br />plus = ' plus '<br /><br />print dsl.instance_eval {<br />    phred + plus + bjarne<br />}<br />##### "Fred plus Barney"<br /></code></pre><br />What does this show? Well, we have created a way to use a method defined in our <code>dsl</code> object, a local variable <code>plus</code>, and a top-level method <code>bjarne</code>. We can imagine scaling this up to defining a rich DSL in our DSL object and being able to mix verbs from the DSL with instance variables and other methods as we please.<br /><br />Touching back on the subject of containment, we have defined <code>bjarne</code> in <code>Kernel</code>. Now <code>bjarne</code> is essentially global. If we already defined <code>bjarne</code> somewhere else, we just clobbered it. And if we later run a piece of code that defines <code>bjarne</code>, we&#8217;ll clobber our own version. <code>phred</code> is different. It&#8217;s defined inside of an object, and it doesn&#8217;t conflict with any other <code>phred</code> we define elsewhere.<br /><br />Great! So&#8230; Can we cite a few examples of this technique in action (such as <a href="http://weblog.jamisbuck.org/2006/4/20/writing-domain-specific-languages">Jamis&#8217; post</a> where he calls <code>phred</code> and <code>bjarne</code> examples of <em>Sandboxing</em> and <em>Top-level methods</em>) and end the post here?<br /><br />No. The code above looks fine. But there is a hidden problem with this sandboxing technique:<br /><br /><pre><code>MyDsl = Object.new<br /><br />def MyDsl.phred<br />    'Fred'<br />end<br /><br />class ClientCode<br /><br />    def bjarne<br />        'Barney'<br />    end<br /><br />    def friends<br />        plus = ' plus '<br />        MyDsl.instance_eval { phred + plus + bjarne }<br />    end<br /><br />end<br /><br />ClientCode.new.friends<br />##### -:15:in `friends': undefined local variable or method `bjarne' for # (NameError) from -:15:in `friends' from -:20<br /></code></pre><br /><a href="http://worsethanfailure.com">WTF</a>?! This looks just like our top-level example, but we&#8217;ve placed our code inside of a <code>ClientCode</code> method. And <code>bjarne</code> is a method in ClientCode: this way we can continue to separate concerns, keeping <code>phred</code> inside our DSL and <code>bjarne</code> inside of the class where we are using the DSL. But it doesn&#8217;t work.<br /><br /><strong>Why <code>instance_eval</code> breaks (in tedious detail)</strong><br /><br />As you know, everything in Ruby is either a variable or a method (how it figures out the difference is a major irritation). When you invoke a method, you are actually sending a <em>message</em> to a <em>receiver</em>.<sup>2</sup> Sometimes you name the receiver (<code>some_object.a_method</code>), and there is no ambiguity.<br /><br />But when you just name the method (like <code>bjarne</code>), Ruby tries to find the method for itself. It does so by looking to see whether it is an instance method, in which case it behaves like <code>self.bjarne</code>. If not, it looks to see whether <code>bjarne</code> is top-level, in which case it calls that method in the <code>Kernel</code>. See for yourself:<br /><br /><pre><code>def foo<br />  'top level foo'<br />end<br /><br />def bar<br />  'top level bar'<br />end<br /><br />class Test<br />  def bar<br />    'instance method bar'<br />  end<br />  def test<br />    p foo<br />    p bar<br />  end<br />end<br /><br />Test.new.test<br />##### "top level foo" "instance method bar"<br /></code></pre><br />See? It looks for instance methods and then for top-level methods if it can&#8217;t find anything. (Again, we are hand-waving over the pesky problem with instance variables in the case where we don&#8217;t use <code>()</code>). What&#8217;s the problem? Well, I actually mis-described what happens. Here it is again, with more precision:<br /><br />It looks for methods defined in the object <code>self</code>, and then for top-level methods if it can&#8217;t find anything. Of course, <code>self</code> is the current object. Unless it isn&#8217;t: That&#8217;s what <code>instance_eval</code> does: it evaluates a block but it changes <code>self</code> to point to its receiver instead of the object where the code is executing. Everything else stays the same. One more example to show the mechanism:<br /><br /><pre><code>def foo<br />  'top level foo'<br />end<br /><br />def bar<br />  'top level bar'<br />end<br /><br />class Test<br />  def bar<br />    'instance method bar'<br />  end<br />  def blitz<br />    'current object blitz'<br />  end<br />  def test<br />    p foo<br />    p bar<br />    o = Object.new<br />    def o.blitz<br />        'redefined self blitz'<br />    end<br />    p o.instance_eval { blitz }<br />    p o.instance_eval { 'bar within o gives: ' + bar }<br />  end<br />end<br /><br />Test.new.test<br />##### "top level foo" "instance method bar" "redefined self blitz" "bar within o gives: top level bar"<br /></code></pre><br />Now we see: when we use <code>instance_eval</code>, we route around our current object and all of our methods are ignored within the block. Ruby really only has two levels of scope: whatever belongs to self and whatever belongs to Kernel.<br /><br />This state of affairs is unsatisfactory: we would like to introduce a DSL in such a way that we retain access to all of our methods without kludges (like storing the current object in an instance variable).<br /><br /><strong>Nesting Scopes</strong><br /><br /><div class="book"><a name="evtst|a|026256100X" href="http://www.amazon.com/gp/product/026256100X?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=026256100X"><img src="http://raganwald.github.com/assets/images/old//seasoned_schemer.jpg" border="0"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=026256100X" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><br><br><a name="evtst|a|026256100X" href="http://www.amazon.com/gp/product/026256100X?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=026256100X">The Seasoned Schemer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=026256100X" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"> is devoted to the myriad uses of first class functions. This book is approachable and a delight to read, but the ideas are provocative and when you close the back cover you will be able to compose programs from functions in powerful new ways.<br><br></div>You can think of the current <a href="http://en.wikipedia.org/wiki/Scope_%28programming%29">scope</a> as being nested inside of the top-level scope. <code>instance_eval</code> doesn&#8217;t change the scope for things like local variables, it just points <code>self</code> elsewhere.<br /><br />What we want is a new scope for our DSL nested inside of the current scope. So when we search for a method, we should check the DSL. If we don&#8217;t find it there, check the current object&#8217;s scope. If we don&#8217;t find it there, check the top-level.<br /><br /><blockquote><br />  Those who do not learn from the History of Lisp are doomed to repeat it.<br /></blockquote><br />Oops. <a href="http://www-formal.stanford.edu/jmc/">John McCarthy</a> called from 1960. He wants Lisp&#8217;s <em>dynamic scoping</em> back. Yes, our new feature is almost fifty years old. This is why either a through grounding in CS theory or a hobbyist&#8217;s interest in the history of programming are important for programming: much of what we want to do has already been done before, and sometimes in unexpected contexts. Who would have thought that a technique for helping programmers collaborate with Bond Traders has roots in Lisp 1.5?<br /><br /><a href="http://raganwald.com/assets/media/source/dsl_and_let.html">Here&#8217;s an implementation of a nested scope construct</a> that does exactly what we want. You declare a new class that extends <code>DomainSpecificLanguage</code>, and then you can use methods from your DSL, from your current object, and from the top-level (if you so choose). For example:<br /><br /><pre><code>require 'dsl'<br /><br />class MyDSL &lt; DomainSpecificLanguage<br /><br />  def bjarne<br />    'Barney'<br />  end<br /><br />end<br /><br />class TheGreat<br /><br />  def phred<br />    'Fredrick'<br />  end<br /><br />  def test<br />    plus = ' plus '<br />    MyDSL.eval { p phred + plus + bjarne }<br />  end<br /><br />end<br /><br />TheGreat.new.test<br />##### "Fredrick plus Barney"<br /></code></pre><br />This does <em>exactly</em> what we want with methods.<br /><br />There's also a single extension to <code>kernel</code>, the method <code>with</code>. <code>with</code> replaces the <code>eval</code> method so you can also say:<br /><pre><code><br />    with MyDSL do<br />      p phred + plus + bjarne<br />    end<br /></code></pre><br /><br />The <code>eval</code> method creates a new instance of your DSL class, so you can track state within an evaluation. For example:<br /><br /><pre><code>class Censor &lt; DomainSpecificLanguage<br />  attr_reader :ok_on_tv<br /><br />  def initialize (given_binding)<br />    super(given_binding)<br />    @ok_on_tv = true<br />  end<br /><br />  def say something<br />    something.split.each do |word|<br />      @ok_on_tv = false if ['feces', 'urine', 'love', 'pudendum', 'fellator', 'oedipus', 'mammaries'].include?(word)<br />    end<br />  end<br /><br />end<br /><br />class GeorgeCarlin<br />  def test<br />    Censor.eval {<br />      say "People much wiser than I have said, I'd rather have my son watch a film with two people making love than two people trying to kill one other."<br />      say "And I of course agree. I wish I know who said it first, and I agree with that."<br />      ok_on_tv<br />    }<br />  end<br />end<br /><br />p GeorgeCarlin.new.test<br />##### "false"<br /></code></pre><br /><strong>let</strong><br /><br />The first obvious drawback of this approach is that the blocks we pass to <code>eval</code> cannot take parameters. For this reason, rumour has it that a method called <code>instance_exec</code> will be added to Ruby in 1.9. (There are some <a href="http://termos.vemod.net/object-instance_exec">implementations</a> available that work in Ruby 1.8 if you would like to experiment.)<br /><br />The second is that you don&#8217;t get anything like nested local variables, a &#8216;la Pascal, Scheme, or any other language with block structure. Block structure is very powerful: You can use a variable within a particular scope and nowhere else. Here&#8217;s a trivial example:<br /><br /><pre><code>with Let do<br />  let :x =&gt; 0, :y =&gt; 1 do<br />    assert_equal(1, x + y)<br />    let :x =&gt; 2 do<br />      assert_equal(3, x + y) <br />    end<br />    assert_equal(0, x)<br />  end <br />end<br /></code></pre><br />We're using the <code>with</code> syntax. In the <code>Let</code> DSL, there&rsquo;s a new method called <code>let</code>. <code>let</code> creates a new DSL within <code>Let</code>. You can see that re-declaring <code>x</code> does not clobber the value in the outer scope. That is because when <code>let</code> wrote a new DSL, it added <code>x</code> and <code>y</code> as methods.<br /><br />So really, that block of code says &ldquo;Write a new DSL where <code>x</code> and <code>y</code> are methods returning zero and one. Execute some code in that new DSL. That code will create <i>another</i> DSL where <code>x</code> is a method returning two.&rdquo;<br /><br />Because <code>let</code> defines methods and not local variables, bad things happen when you try to override real local variables. It&#8217;s best to use <code>Let</code> for some things and local variables for others, but not mix the two.<br /><br />Like what, you ask?<br /><br /><strong><a name="lcir">List Comprehensions in Ruby</a></strong><br /><br />A <a href="http://en.wikipedia.org/wiki/List_comprehension">List Comprehension</a> is syntactic sugar that lets you build collections using set-like notation. For example, <code>S = [ x | x&lt;-[0..], x^2&gt;3 ]</code> is a list comprehension in Haskell.<br /><br />Here is a <a href="http://raganwald.com/assets/media/source/comprehensions.html">List Comprehensions DSL in Ruby</a>. Let&#8217;s say we&#8217;re building up a multiplication table. We want tuples of the form <code>[x, y, x * y]</code> given <code>x</code> is in the range <code>1..12</code> and <code>y</code> is in the range <code>1..12</code>. Let&#8217;s write that:<br /><pre><code><br />require 'comprehension'<br /><br />class MultiplicationTable<br />  def twelve_by_twelve<br />    with Comprehension::DSL do<br />      list { [x, y, x * y] }.given(:x =&gt; 1..12, :y =&gt; 1..12)<br />    end<br />  end<br />end<br />p MultiplicationTable.new.twelve_by_twelve<br />##### [[1, 1, 1], [1, 2, 2], [2, 1, 2], [1, 3, 3], [2, 2, 4] ...<br /></code></pre><br />(In everyday use, you don&rsquo;t need a class and a method for each comprehension: the important bit is <code>list {</code> <code>[x, y, x * y]</code> <code>}.given(:x =&gt; 1..12,</code> <code>:y =&gt; 1..12)</code>. I just wrote it this way so you could see that comprehensions work fine inside of methods. You can also use more than one comprehension inside of a single <code>with Comprehension::DSL do...</code> <code>end</code> block: see the unit tests for examples.)<br /><br />The expression in the block doesn&#8217;t have to be a tuple:<br /><pre><code><br />class MultiplicationTable<br />  def twelve_by_twelve<br />    with Comprehension::DSL do<br />      list { "#{x} times #{y} is #{x * y}" }.given(:x =&gt; 1..12, :y =&gt; 1..12)<br />    end<br />  end<br />end<br />p MultiplicationTable.new.twelve_by_twelve<br />##### ["1 times 1 is 1", "1 times 2 is 2", "2 times 1 is 2", "1 times 3 is 3", "2 times 2 is 4", ...<br /></code></pre><br />And you can stick a &#8220;where&#8221; block on the end:<br /><pre><code><br />class MultiplicationTable<br />  def twelve_by_twelve_odds<br />    with Comprehension::DSL do<br />      list { "#{x} times #{y} is #{x * y}" }.given(:x =&gt; 1..12, :y =&gt; 1..12) { (x % 2 == 1) &amp;&amp; (y % 2 == 1) }<br />    end<br />  end<br />end<br />p MultiplicationTable.new.twelve_by_twelve_odds<br />##### ... 3 times 5 is 15", "5 times 3 is 15", "7 times 1 is 7", "1 times 9 is 9", ...<br /></code></pre><br /><br />Would you like to nest them? Your expression is the interpreter&rsquo;s command:<br /><pre><code><br />class MultiplicationTable<br />  def odds_times_evens<br />    with Comprehension::DSL do<br />      list { "#{x} times #{y} is #{x * y}" }.given(<br />          :x => list { x }.given(:x => 1..12) { x % 2 == 0 } , <br />          :y => list { x }.given(:x => 1..12) { x % 2 == 1 } )<br />    end<br />  end<br />end<br />p MultiplicationTable.new.odds_times_evens<br />##### ... "2 times 11 is 22", "4 times 9 is 36", "6 times 7 is 42", ...<br /></code></pre><br /><strong>List Comprehensions and Let</strong><br /><br />What is the relationship to <code>Let</code>? Well, <code>Let</code> builds the scopes needed for evaluating the where clause and the block defining the elements of the list. Yes, we&#8217;ve built a DSL on top of a DSL on top of a DSL. Does this seem like weird trickery? I don&#8217;t know why. Do you have <em>any idea</em> how many levels of abstraction are responsible for you reading this essay right now?<br /><br />This is what we humans do: we build tools on top of tools. Your browser runs on an OS, possibly in a VM, perhaps in a hypervisor, on top of a BIOS, and on and on. This is the normal state of affairs, not an exception.<br /><br /><strong>Closing Remarks</strong><br /><br />It is possible to build DSLs in Ruby to facilitate cross-functional teamwork and separation of concerns. Care must be taken to avoid polluting the top-level name space, but it is possible to work within sandboxes and still have access to the current object&#8217;s context.<br /><br />Oh yes, and programming is fun as always<br /><br /><strong><a name="dslsource">Source Code</a></strong><br /><br /><em>Update: The copy of <code>dsl.rb</code> has been updated to the latest version. I had committed a rather typical manual synchronization error: I copied the latest file to the wrong directory when I first posted this. Thanks, Justin!</em><br /><br /><ul><li><a href="http://raganwald.com/assets/media/source/dsl_and_let.html">DomainSpecificLanguage and Let</a></li><br /><li><a href="http://raganwald.com/assets/media/source/comprehensions.html">Comprehension</a></li></ul><br /><br /><strong>How to try it for yourself</strong>: Open <a href="http://raganwald.com/assets/media/source/dsl_and_let.html">DomainSpecificLanguage and Let</a>. Save the text only (not the HTML) as <code>dsl.rb</code>. Open <a href="http://raganwald.com/assets/media/source/comprehensions.html"><code>Comprehension</code></a></li>. Save the text only as anything you like, as long as it is in the same directory as <code>dsl.rb</code>: I use <code>comprehension.rb</code>. Run <code>comprehension.rb</code>.<br /><hr /><ol><li>I generally call &#8220;<a href="http://en.wikipedia.org/wiki/Bullshit%21">Bullshit</a>!&#8221; on any line of reasoning that sets up a straw man argument just to knock it down. So read on with skepticism!</li><br /><li>Alan Kay has said that he regrets popularizing the notion of &#8220;Object-Oriented&#8221; programming, and that he should have called it &#8220;Message-Oriented&#8221; programming.</li></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/archives/labels/lispy.html">lispy</a>, <a rel='tag' href="http://raganwald.github.com/archives/labels/popular.html">popular</a>, <a rel='tag' href="http://raganwald.github.com/archives/labels/ruby.html">ruby</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html" title="permanent link">12:19 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Thursday, March 15, 2007</div>
			

			<div class="Post"><a name="2104940628608523377">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/spirituality-is-congruent-to-passion.html" title="permanent link">Spirituality is congruent to passion</a></span>
					<div style="clear:both;"></div><blockquote><br />So what do I mean when I say spirituality? There's something more to my life than just a bunch of chemical reactions. I love my wife. I care about other people. I care about the way the world is, and work for things that I think will make it a better place. These things&mdash;these emotions, desires, concerns&mdash;they may well be nothing more than emergent phenomena resulting from the basic physical and chemical processes that I am a part of. But for my own experience of my life, even if they are nothing more than an illusion, they seem real&mdash;as real as other abstractions like free will, morality, and other such things.<br /></blockquote><br />&mdash;<a href="http://scienceblogs.com/goodmath/2007/03/spirituality_and_religion_1.php">Mark C. Chu-Carroll</a>, <a href="http://scienceblogs.com/goodmath/2007/03/spirituality_and_religion_1.php">Spirituality and Religion</a><div style="clear:both; padding-bottom:0.25em"></div>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/spirituality-is-congruent-to-passion.html" title="permanent link">2:31 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			

			<div class="Post"><a name="5076801165540557858">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/coming-soon.html" title="permanent link">Coming soon...</a></span>
					<div style="clear:both;"></div><pre class="textmate-source sunburst"><span class="source source_ruby"><br /><span class="meta meta_require meta_require_ruby"><span class="keyword keyword_other keyword_other_special-method keyword_other_special-method_ruby">require</span> <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>test/unit<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span></span><br /><br /><span class="meta meta_class meta_class_ruby"><span class="keyword keyword_control keyword_control_class keyword_control_class_ruby">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_ruby">TestComprehension<span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_ruby"> <span class="punctuation punctuation_separator punctuation_separator_inheritance punctuation_separator_inheritance_ruby">&lt;</span> Test::Unit::TestCase</span></span></span><br />  <br />  <span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">test_simple_cases</span></span><br />    with <span class="support support_class support_class_ruby">Comprehension</span>::<span class="variable variable_other variable_other_constant variable_other_constant_ruby">DSL</span> <span class="keyword keyword_control keyword_control_ruby keyword_control_ruby_start-block">do<br /></span>      assert_equal(<br />          [<span class="constant constant_numeric constant_numeric_ruby">1</span>, <span class="constant constant_numeric constant_numeric_ruby">2</span>, <span class="constant constant_numeric constant_numeric_ruby">3</span>],<br />          list {<span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>x + <span class="constant constant_numeric constant_numeric_ruby">1</span> }.given(<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; <span class="constant constant_numeric constant_numeric_ruby">0</span>..<span class="constant constant_numeric constant_numeric_ruby">2</span>) )<br />      assert_equal(<br />          [[<span class="constant constant_numeric constant_numeric_ruby">0</span>, <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>a</span>], [<span class="constant constant_numeric constant_numeric_ruby">0</span>, <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>b</span>], [<span class="constant constant_numeric constant_numeric_ruby">1</span>, <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>a</span>], [<span class="constant constant_numeric constant_numeric_ruby">1</span>, <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>b</span>]],<br />          list {<span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>[x, y] }.given(<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; [<span class="constant constant_numeric constant_numeric_ruby">0</span>, <span class="constant constant_numeric constant_numeric_ruby">1</span>], <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>y</span> =&gt; [<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>a</span>, <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>b</span>]) )<br />      assert_equal(<br />          [<span class="constant constant_numeric constant_numeric_ruby">2</span>, <span class="constant constant_numeric constant_numeric_ruby">4</span>, <span class="constant constant_numeric constant_numeric_ruby">6</span>, <span class="constant constant_numeric constant_numeric_ruby">8</span>, <span class="constant constant_numeric constant_numeric_ruby">10</span>],<br />          list {<span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>x }.given(<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; <span class="constant constant_numeric constant_numeric_ruby">1</span>..<span class="constant constant_numeric constant_numeric_ruby">10</span>) {<span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>x % <span class="constant constant_numeric constant_numeric_ruby">2</span> == <span class="constant constant_numeric constant_numeric_ruby">0</span> } )<br />    <span class="keyword keyword_control keyword_control_ruby">end</span><br />  <span class="keyword keyword_control keyword_control_ruby">end</span><br />  <br />  <span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">plus_seven</span></span> num<br />    num + <span class="constant constant_numeric constant_numeric_ruby">7</span><br />  <span class="keyword keyword_control keyword_control_ruby">end</span><br />  <br />  <span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">times_maker</span></span> num<br />    lambda {<span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>x * num }<br />  <span class="keyword keyword_control keyword_control_ruby">end</span><br />  <br />  <span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">test_closure_cases</span></span><br />    two = <span class="constant constant_numeric constant_numeric_ruby">2</span><br />    triple = times_maker(<span class="constant constant_numeric constant_numeric_ruby">3</span>)<br />    with <span class="support support_class support_class_ruby">Comprehension</span>::<span class="variable variable_other variable_other_constant variable_other_constant_ruby">DSL</span> <span class="keyword keyword_control keyword_control_ruby keyword_control_ruby_start-block">do<br /></span>      assert_equal(<br />          [<span class="constant constant_numeric constant_numeric_ruby">2</span>, <span class="constant constant_numeric constant_numeric_ruby">4</span>, <span class="constant constant_numeric constant_numeric_ruby">6</span>],<br />          list {<span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>x * two }.given(<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; <span class="constant constant_numeric constant_numeric_ruby">1</span>..<span class="constant constant_numeric constant_numeric_ruby">3</span>) )<br />      assert_equal(<br />          [<span class="constant constant_numeric constant_numeric_ruby">3</span>, <span class="constant constant_numeric constant_numeric_ruby">6</span>, <span class="constant constant_numeric constant_numeric_ruby">9</span>],<br />          list(&amp;triple).given(<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; <span class="constant constant_numeric constant_numeric_ruby">1</span>..<span class="constant constant_numeric constant_numeric_ruby">3</span>) )<br />      assert_equal(<br />          [<span class="constant constant_numeric constant_numeric_ruby">8</span>, <span class="constant constant_numeric constant_numeric_ruby">9</span>, <span class="constant constant_numeric constant_numeric_ruby">10</span>],<br />          list {<span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>plus_seven(x) }.given(<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; <span class="constant constant_numeric constant_numeric_ruby">1</span>..<span class="constant constant_numeric constant_numeric_ruby">3</span>) )<br />    <span class="keyword keyword_control keyword_control_ruby">end</span><br />  <span class="keyword keyword_control keyword_control_ruby">end</span><br />  <br /><span class="keyword keyword_control keyword_control_ruby">end</span><br /><br /></span></pre><br />March 16, 2007: <a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html">An Approach to Composing Domain-Specific Languages in Ruby</a><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/archives/labels/ruby.html">ruby</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/coming-soon.html" title="permanent link">12:45 AM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Sunday, March 11, 2007</div>
			

			<div class="Post"><a name="1990194990621630996">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html" title="permanent link">Why Why Functional Programming Matters Matters</a></span>
					<div style="clear:both;"></div>I recently re-read the amazing paper <a href="http://www.math.chalmers.se/~rjmh/Papers/whyfp.html">Why Functional Programming Matters</a> (&#8220;WhyFP&#8221;). Although I thought that I understood WhyFP when I first read it a few years ago, when I had another look last weekend I suddenly understood that I had missed an important message.<sup>1</sup><br /><br />Now obviously (can you guess from the title?) the paper is about the importance of one particular style of programming, functional programming. And when I first read the paper, I took it at face value: I thought, &#8220;Here are some reasons why functional programming languages matter.&#8221;<br /><br />On re-reading it, I see that the paper contains insights that apply to programming in general. I don&#8217;t know why this surprises me. The fact is, programming language design revolves around program design. A language&#8217;s design reflects the opinions of its creators about the proper design of programs.<br /><br />In a very real sense, the design of a programming language is a strong expression of the opinions of the designer about good programs. When I first read WhyFP, I thought the author was expressing an opinion about the design of good programming languages. Whereas on the second reading, I realized he was expressing an opinion about the design of good programs.<br /><br /><strong>Can we add though subtraction?</strong><br /><br /><blockquote>It is a logical impossibility to make a language more powerful by omitting features, no matter how bad they may be.</blockquote><br />Is this obvious? So how do we explain that one reason Java is considered &#8220;better than C++&#8221; is because it omits manual memory management? And one reason many people consider Java &#8220;better than Ruby&#8221; is because you cannot open base classes like <code>String</code> in Java? So no, it is not obvious. Why not?<br /><br />The key is the word <em>better</em>. It&#8217;s not the same as the phrase <em>more powerful</em>.<sup>2</sup> The removal or deliberate omission of these features is an expression about the idea that programs which do not use these features are better than programs which do. Any feature (or removal of a feature) which makes the programs written in the language better makes the language better. Thus, it <em>is</em> possible to make a language &#8220;better&#8221; by removing features that are considered harmful,<sup>3</sup> if by doing so it makes programs in the language better programs.<br /><br />In the opinion of the designers of Java, programs that do not use <code>malloc</code> and <code>free</code> are safer than those that do. And the opinion of the designers of Java is that programs that do not modify base classes like <code>String</code> are safer than those that do. The Java language design emphasizes a certain kind of safety, and to a Java language designer, safer programs are better programs.<br /><br />&#8220;More powerful&#8221; is a design goal just like &#8220;safer.&#8221; But yet, what does it mean? We understand what a safer language is. It&#8217;s a language where programs written in the language are safer. But what is a &#8220;more powerful&#8221; language? That programs written in the language are more powerful? What does that mean? Fewer symbols (the &#8220;golf&#8221; metric)?<br /><br />WhyFP asserts that you cannot make a language more powerful through the removal of features. To paraphrase an argument from the paper, <em>if removing harmful features was useful by itself, C and C++ programmers would simply have stopped using</em> <code>malloc</code> <em>and</em> <code>free</code> <em>twenty years ago</em>. Improving on C/C++ was not just a matter of removing <code>malloc</code> and <code>free</code>, it was also a matter of adding automatic garbage collection.<br /><br /><blockquote>This space, wherein the essay ought to argue that Java compensates for its closed base classes by providing a more powerful substitute feature, left intentionally blank.</blockquote><br />At the same time, there is room for arguing that some languages are improved by the removal of harmful features. To understand why they may be improved but not more powerful, we need a more objective definition of what it means for a language to be &#8220;more powerful.&#8221; Specifically, what quality does a more powerful programming language permit or encourage in programs?<br /><br />When we understand what makes a program &#8220;better&#8221; in the mind of a language designer, we can understand the choices behind the language.<br /><br /><strong>Factoring</strong><br /><br />Factoring a program is the act of dividing it into units that are composed to produce the working software.<sup>4</sup> Factoring happens as part of the design. (<em>Re</em>-factoring is the act of rearranging an existing program to be factored in a different way). If you want to compare this to factoring in number theory, a well designed program has lots of factors, like the number <code>3,628,800</code> (<code>10!</code>). A <a href="http://www.laputan.org/mud/">Big Ball of Mud</a> is like the number <code>3,628,811</code>, a prime.<br /><br />Composition is the construction of programs from smaller programs. So factoring is to composition as division is to multiplication.<br /><br />Factoring programs isn&#8217;t really like factoring simple divisors. The most important reason is that programs can be factored in orthogonal ways. When you break a program into subprograms (using methods, subroutines, functions, what-have-you), that&#8217;s one axis of factoring. When you break an a modular program up into modules, that&#8217;s another, orthogonal axis of factoring.<br /><br />Programs that are well-factored are more desirable than programs that are poorly factored.<br /><br /><blockquote>In computer science, <strong>separation of concerns</strong> (SoC) is the process of breaking a program into distinct features that overlap in functionality as little as possible. A concern is any piece of interest or focus in a program.<br />  <br />  SoC is a long standing idea that simply means a large problem is easier to manage if it can be broken down into pieces; particularly so if the solutions to the sub-problems can be combined to form a solution to the large problem.<br />  <br />  The term separation of concerns was probably coined by Edsger W. Dijkstra in his paper <a href="http://www.cs.utexas.edu/users/EWD/transcriptions/EWD04xx/EWD447.html">On the role of scientific thought</a>.</blockquote><br />&#8212;Excerpts from the Wikipedia entry on <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns</a><br /><br />Programs that separate their concerns are well-factored. There&#8217;s a principle of software development, <a href="http://www.amazon.com/gp/product/0201379430?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=211189&amp;creative=374929&amp;creativeASIN=0201379430" title="Object Design: Roles, Responsibilities, and Collaborations">responsibility-driven design</a>. Each component should have one clear responsibility, and it should have everything it needs to carry out its responsibility.<br /><br />This is the separation of concerns again. Each component of a program having one clearly defined responsibility means each concern is addressed in one clearly defined place.<br /><br /><blockquote>Let’s ask a question about Monopoly (and Enterprise software). Where do the rules live? In a noun-oriented design, the rules are smooshed and smeared across the design, because every single object is responsible for knowing everything about everything that it can ‘do’. All the verbs are glued to the nouns as methods.</blockquote><div>&#8212;<a href="http://raganwald.github.com/2006/06/my-favourite-interview-question.html">My favourite interview question</a></div><br /><br />In a game design where you have important information about a rule smeared all over the object hierarchy, you have very poor separation of concerns. It looks at first like there&#8217;s a clear factoring &#8220;Baltic Avenue has a method called <code>isUpgradableToHotel</code>,&#8221; but when you look more closely you realize that every object representing a property is burdened with knowing almost all of the rules of the game.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/026256100X?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=026256100X"><img border="0" src="http://raganwald.github.com/assets/images/old//seasoned_schemer.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=026256100X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br /><a href="http://www.amazon.com/gp/product/026256100X?ie=UTF8&tag=raganwald001-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=026256100X">The Seasoned Schemer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&l=as2&o=1&a=026256100X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is devoted to the myriad uses of first class functions. This book is approachable and a delight to read, but the ideas are provocative and when you close the back cover you will be able to compose programs from functions in powerful new ways.<br><br></div>The concerns are not clearly separated: there&#8217;s no one place to look and understand the behaviour of the game.<br /><br />Programs that separate their concerns are better programs than those that do not. And languages that facilitate this kind of program design are better than those that hamper it.<br /><br /><strong>Power through features that separate concerns</strong><br /><br />One thing that makes a programming language &#8220;more powerful&#8221; in my opinion is the provision of more ways to factor programs. Or if you prefer, <em>more axes of composition</em>. The more different ways you can compose programs out of subprograms, the more powerful a language is. <br /><br />Do you remember <a href="http://en.wikipedia.org/wiki/Structured_programming">Structured Programming</a>? The gist is, you remove <code>goto</code> and you replace it with well-defined control flow mechanisms: some form of subroutine call and return, some form of selection mechanism like Algol-descendant <code>if</code>, and some form of repetition like Common Lisp&#8217;s <code>loop</code> macro.<br /><br />Dijkstra&#8217;s view on structured programming was that it promoted the separation of concerns. The factoring of programs into blocks with well-defined control flow made it easy to understand blocks and rearrange programs in different ways. Programs with indiscriminate jumps did not factor well (if at all): they were difficult to understand and often could not be rearranged at all.<br /><br />Structured <a href="http://dmoz.org/Computers/Programming/Languages/Assembly/68k/">68k ASM</a> programming is straightforward in theory. You just need a lot of boilerplate, design patterns, and the discipline to stick to your convictions. But of course, lots of 68k ASM programming in practice is only partially structured. Statistically speaking, 68k ASM is not a structured programming language even though structured programming is possible in 68k ASM.<br /><br />Structured Pascal programming is straightforward both in theory and in practice. Pascal facilitates separation of concerns through structured programming. So we say that Pascal &#8220;is more powerful than 68k ASM&#8221; to mean that in practice, programs written in Pascal are more structured than programs written in 68k ASM because Pascal provides facilities for separating concerns that are missing in 68k ASM.<br /><br /><strong>For example: working with lists</strong><br /><br />Consider this snippet of iterative code:<br /><br /><pre class="textmate-source sunburst"><br /><span class="source source_java"><span class="storage storage_type storage_type_java">int</span> numberOfOldTimers = <span class="constant constant_numeric constant_numeric_java">0</span>;<br /><span class="meta meta_definition meta_definition_constructor meta_definition_constructor_java"><span class="entity entity_name entity_name_function entity_name_function_constructor entity_name_function_constructor_java">for</span> <span class="meta meta_definition meta_definition_param-list meta_definition_param-list_java">(<span class="storage storage_type storage_type_java">Employee</span> emp: employeeList</span>) </span>{<br /><span class="meta meta_definition meta_definition_constructor meta_definition_constructor_java">    <span class="entity entity_name entity_name_function entity_name_function_constructor entity_name_function_constructor_java">for</span> <span class="meta meta_definition meta_definition_param-list meta_definition_param-list_java">(<span class="storage storage_type storage_type_java">Department</span> dept: departmentsInCompany</span>) </span>{<br />        <span class="keyword keyword_control keyword_control_java">if</span> (emp.getDepartmentId() <span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">==</span> dept.getId() <span class="keyword keyword_operator keyword_operator_logical keyword_operator_logical_java">&amp;&amp;</span> emp.getYearsOfService() <span class="keyword keyword_operator keyword_operator_comparison keyword_operator_comparison_java">&gt;</span> dept.getAge()) {<br />            <span class="keyword keyword_operator keyword_operator_increment-decrement keyword_operator_increment-decrement_java">++</span>numberOfOldTimers;<br />        }<br />    }<br />}<br /></span><br /></pre><br />This is an improvement on older practices.<sup>5, 6</sup> For one thing, the <code>for</code> loops hide the implementation details of iterating over <code>employeeList</code> and <code>departmentsInCompany</code>. Is this better because you have less to type? Yes. Is it better because you eliminate the fence-post errors associated with loop variables? Of course.<br /><br />But most interestingly, you have the beginnings of a <em>separation of concerns</em>: how to iterate over a single list is separate from what you do in the iteration.<br /><br /><blockquote>Try calling a colleague on the telephone and explaining what we want as succinctly as possible. Do you say &#8220;We want a loop inside a loop and inside of that an if, and&#8230;&#8221;? Or do you say &#8220;We want to count the number of employees that have been with the company longer than their departments have existed.&#8221;</blockquote><br />One problem with the <code>for</code> loop is that it can only handle one loop at a time. We have to nest loops to work with two lists at once. This is patently wrong: there&#8217;s nothing inherently nested about what we&#8217;re trying to do. We can demonstrate this easily: try calling a colleague on the telephone and explaining what we want as succinctly as possible. Do you say &#8220;We want a loop inside a loop and inside of that an if, and&#8230;&#8221;?<br /><br />No, we say, &#8220;We want to count the number of employees that have been with the company longer than their departments have existed.&#8221; There&#8217;s no discussion of nesting.<br /><br />In this case, a limitation of our tool has caused our concerns to intermingle again. The concern of &#8220;How to find the employees that have been with the company longer than their departments have existed&#8221; is intertwined with the concern of &#8220;count them.&#8221; Let&#8217;s try a different notation that separates the details of <em>how to find</em> from the detail of <em>counting what we&#8217;ve found</em>:<br /><br /><pre class="textmate-source sunburst"><br /><span class="source source_ruby">old_timers = (employees * departments).select <span class="keyword keyword_control keyword_control_ruby keyword_control_ruby_start-block">do </span>|emp, dept|<br />  emp.department_id == dept.id &amp;&amp; emp.years_of_service &gt; dept.age<br /><span class="keyword keyword_control keyword_control_ruby">end</span><br />number_of_old_timers = old_timers.size<br /></span><br /></pre><br />Now we have separated the concern of finding from counting. And we have hidden the nesting by using the <code>*</code> operator to create a Cartesian product of the two lists. Now let&#8217;s look at what we used to filter the combined list, <code>select</code>. The difference is more than just semantics, or counting characters, or the alleged pleasure of fooling around with closures.<br /><br /><div class="book"><br>  <a name="evtst|a|0521644089" href="http://www.amazon.com/gp/product/0521644089?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;amp;camp=211189&amp;creative=373489&amp;creativeASIN=0521644089"><img src="http://raganwald.github.com/assets/images/old//haskell_school_of_expression.jpg" border="0"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;amp;amp;o=1&amp;a=0521644089" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><br>I’m not a Haskell user (yet), but <a name="evtst|a|0521644089" href="http://www.amazon.com/gp/product/0521644089?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;amp;camp=211189&amp;creative=373489&amp;creativeASIN=0521644089">The Haskell School of Expression: Learning Functional Programming through Multimedia</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;amp;amp;o=1&amp;a=0521644089" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"> has received rave reviews and comes with solid recommendations. It’s on my <a href="http://www.amazon.com/gp/registry/wishlist/3A2XEHODQK2WP/ref=wl_web/">wish list</a> if you’re feeling generous!<br><br></div><code>*</code> and <code>select</code> facilitates separating the concerns of how to filter things (like iterate over them applying a test) from the concern of what we want to filter. So languages that make this easy are more powerful than languages that do not. In the sense that they facilitate additional axes of factoring.<br /><br /><strong>The Telephone Test</strong><br /><br />Let&#8217;s look back a few paragraphs. We have an example of the &#8220;Telephone Test:&#8221; when code very closely resembles how you would explain your solution over the telephone, we often say it is &#8220;very high level.&#8221; The usual case is that such code expresses a lot more <em>what</em> and a lot less <em>how</em>. The concern of what has been very clearly separated from the concern of how: you can&#8217;t even <em>see</em> the how if you don&#8217;t go looking for it.<br /><br />In general, we think this is a good thing. But it isn&#8217;t free: somewhere else there is a mass of code that supports your brevity. When that extra mass of code is built into the programming language, or is baked into the standard libraries, it is nearly free and obviously a Very Good Thing. A language that doesn&#8217;t just separate the concern of how but does the work for you is very close to &#8220;something for nothing&#8221; in programming.<br /><br />But sometimes you have to write the <em>how</em> as well as the <em>what</em>. It isn&#8217;t always handed to you. In that case, it is still valuable, because the resulting program still separates concerns. It still factors into separate components. The components can be changed.<br /><br />I recently separated the concern of describing &#8220;how to generate sample curves for some data mining&#8221; from the concern of &#8220;managing memory when generating the curves.&#8221; I did so by writing my own lazy evaluation code (Both the <a href="http://raganwald.github.com/2007/02/haskell-ruby-and-infinity.html">story</a> and the <a href="http://raganwald.com/assets/media/source/lazy_lists.html">code</a> are on line). Here&#8217;s the key &#8220;what&#8221; code that generates an infinite list of parameters for sample bezi&eacute;r curves:<br /><br /><pre class="textmate-source sunburst"><br /><span class="source source_ruby"><span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">magnitudes</span></span><br />  <span class="support support_class support_class_ruby">LazyList</span>.binary_search(<span class="constant constant_numeric constant_numeric_ruby">0.0</span>, <span class="constant constant_numeric constant_numeric_ruby">1.0</span>)<br /><span class="keyword keyword_control keyword_control_ruby">end</span><br /><br /><span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">control_points</span></span><br />  <span class="support support_class support_class_ruby">LazyList</span>.cartesian_product(magnitudes, magnitudes) <span class="keyword keyword_control keyword_control_ruby keyword_control_ruby_start-block">do </span>|x, y|<br />    <span class="support support_class support_class_ruby">Dictionary</span>.<span class="keyword keyword_other keyword_other_special-method keyword_other_special-method_ruby">new</span>( <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; x, <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>y</span> =&gt; y )<br />  <span class="keyword keyword_control keyword_control_ruby">end</span><br /><span class="keyword keyword_control keyword_control_ruby">end</span><br /><br /><span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">order_one_flows</span></span> args = {}<br />  height, width = (args[<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>height</span>] || <span class="constant constant_numeric constant_numeric_ruby">100.0</span>), (args[<span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>width</span>] || <span class="constant constant_numeric constant_numeric_ruby">100.0</span>)<br />  <span class="support support_class support_class_ruby">LazyList</span>.cartesian_product(<br />      magnitudes, control_points, control_points, magnitudes<br />  ) <span class="keyword keyword_control keyword_control_ruby keyword_control_ruby_start-block">do </span>|initial_y, p1, p2, final_y|<br />    <span class="support support_class support_class_ruby">FlowParams</span>.<span class="keyword keyword_other keyword_other_special-method keyword_other_special-method_ruby">new</span>(<br />      height, width, initial_y * height,<br />      <span class="support support_class support_class_ruby">CubicBezierParams</span>.<span class="keyword keyword_other keyword_other_special-method keyword_other_special-method_ruby">new</span>(<br />        <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x</span> =&gt; width,          <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>y</span> =&gt; final_y * height,<br />        <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x1</span> =&gt; p1.x * width,  <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>y1</span> =&gt; p1.y * height,<br />        <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>x2</span> =&gt; p2.x * width,  <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>y2</span> =&gt; p2.y * height<br />      )<br />    )<br />  <span class="keyword keyword_control keyword_control_ruby">end</span><br /><span class="keyword keyword_control keyword_control_ruby">end</span><br /></span><br /></pre><br />That&#8217;s it. Just as I might tell you on the phone: &#8220;Magnitudes&#8221; is a list of numbers between zero and one created by repeatedly dividing the intervals in half, like a binary search. &#8220;Control Points&#8221; is a list of the Cartesian product of magnitudes with itself, with one magnitude assigned to <code>x</code> and the other to <code>y</code>. And so forth.<br /><br />I will not say that the sum of this code and the code that actually implements infinite lists is shorter than imperative code that would intermingle loops and control structures, <a href="http://www.amazon.com/gp/product/B000002J27?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000002J27" title="A Trick of the Tail by Genesis, Track 2, Entangled">entangling</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=B000002J27" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> <em>what</em> with <em>how</em>. I will say that it separates the concerns of what and how, and it separates them in a different way than <code>select</code> separated the concerns of what and how.<br /><br /><strong>So why does &#8220;Why Functional Programming Matters&#8221; matter again?</strong><br /><br />The great insight is that better programs separate concerns. They are factored more purely, and the factors are naturally along the lines of responsibility (rather than in Jenga piles of <code>abstract</code> <code>virtual</code> <code>base</code> <code>mixin</code> <code>module</code> <code>class</code> <code>proto_</code> <code>extends</code> <code>private</code> <code>implements</code>). Languages that facilitate better separation of concerns are more powerful in practice than those that don&#8217;t.<br /><br />WhyFP illustrates this point beautifully with the same examples I just gave: <a href="http://raganwald.github.com/2007/01/closures-and-higher-order-functions.html">first-class functions</a> and <a href="http://raganwald.github.com/2007/02/haskell-ruby-and-infinity.html">lazy evaluation</a>, both prominent features of modern functional languages like Haskell.<br /><br />WhyFP&#8217;s value is that it expresses an opinion about what makes programs better. It backs this opinion up with reasons why modern functional programming languages are more powerful than imperative programming languages. But even if you don&#8217;t plan to try functional programming tomorrow, the lessons about better programs are valuable for your work in <em>any</em> language today.<br /><br />That&rsquo;s why <a href="http://www.math.chalmers.se/~rjmh/Papers/whyfp.html">Why Functional Programming Matters</a> matters.<br /><br /><hr /><ol><li>And now I&#8217;m worried: what am I <em>still</em> missing?</li><br /><li>Please let&#8217;s not have a discussion about <a href="http://en.wikipedia.org/wiki/Turing-complete">Turing Equivalence</a>. Computer Science &#8220;Theory&#8221; tells us &#8220;there&#8217;s no such thing as more powerful.&#8221; Perhaps we share the belief that <em>In theory, there&#8217;s no difference between theory and practice. But in practice, there is</em>.</li><br /><li>I am not making the claim that <em>I</em> consider memory management or unsealed base classes harmful, but I argue that there exists at least one person who does.</li><br /><li>The word &#8220;factor&#8221; has been a little out of vogue in recent times. But thanks to an excellent <a href="http://programming.reddit.com/info/18td4/comments">post on reddit</a>, it could make a comeback.</li><br /><li>So much so that we won&#8217;t even bother to show what loops looked like in the days of <code>for (int i = 0; i &lt; employeeList.size(); ++i)</code>. </li><br /><li>Another organization might merge employees and departments, or have each department &ldquo;own&rdquo; a collection of employees. This makes our example easier, but now the <em>data</em> doesn&rsquo;t factor well. Everything we&rsquo;ve learned from databases in the last forty years tells us that we often need to find new ways to compose our data. The relational model factors well. The network model factors poorly.</li><br /></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/archives/labels/java.html">java</a>, <a rel='tag' href="http://raganwald.github.com/archives/labels/lispy.html">lispy</a>, <a rel='tag' href="http://raganwald.github.com/archives/labels/popular.html">popular</a>, <a rel='tag' href="http://raganwald.github.com/archives/labels/ruby.html">ruby</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html" title="permanent link">10:21 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Friday, March 02, 2007</div>
			

			<div class="Post"><a name="8025663505074581040">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/programmers-are-sages.html" title="permanent link">Programmers are Sages</a></span>
					<div style="clear:both;"></div><a href="http://www.amazon.com/gp/search?ie=UTF8&amp;keywords=raymond%20smullyan&amp;tag=raganwald001-20&amp;index=books&amp;linkCode=ur2&amp;camp=1789&amp;creative=9325">Raymond Smullyan</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=ur2&amp;o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> does much more than write about Infinity, Combinatory Logic, Recursion Theory, and G&ouml;del&#8217;s Incompleteness Theorems. And he does much more than teach these concepts delightfully by turning them into stories and puzzles to solve. He also teaches philosophy by way of insightful essays and anecdotes.<br /><br />I&#8217;m going to paraphrase one of his down-home insights. This particular little story has helped me through many dark periods in my life. Raymond was talking about <a href="http://www.amazon.com/gp/product/0060674695?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0060674695">Taoism</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0060674695" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />, and he explained that his two pet dogs embrace the Tao. I think he described them as &#8220;Sages.&#8221;<br /><br /><a href="http://flickr.com/photos/joc67/108533014/"><img border="0" src="http://farm1.static.flickr.com/40/108533014_1fefac07fb.jpg" width="500" height="333"/></a><br /><br />Raymond explained that like many dogs, they preferred rich chunks of meat and gravy to dried <a href="http://en.wikipedia.org/wiki/Kibbles_%27n_Bits">kibble</a>. And like many people, Raymond had tried making the kibble more palatable by mixing in some meat with the dry dog food and pouring gravy over the whole thing.<br /><br />The dogs, of course, would carefully pick the meat out and lick up all the gravy, leaving nothing but the dried kibble behind. But did they resent this? Did they howl and whine about the kibble ruining the meat? Of course not! They would wag their tails and frisk about, joyous in finding all that good meat and tasty gravy in their bowls. It was like the kibble existed in some alternate dimension that the dogs cold not perceive.<br /><br />Aaah&#8230; Dogs truly <em>are</em> Sages.<br /><br /><strong>Kibble</strong><br /><br />Every time someone writes about interviewing and hiring, they are writing about <em>judging people</em>. That&#8217;s really deep and meaningful to us as people: being picked or not picked, picking or not picking is pretty much all of our social structure. So when you discuss it, you are reaching deep into people&#8217;s souls.<br /><br />I know this, because it hurts me when I interview for a job and the response is &#8220;thanks, but no thanks.&#8221; It hurts when people say, &#8220;<a href="http://raganwald.github.com/2005/07/why-you-need-degree-to-work-for-bigco.html">you don&#8217;t have the right kind of degree</a>&#8221; or when they tell me that I forgot to use <code>GROUP BY</code> when writing a SQL query to sum the sales of automobiles by brand, or that they don&#8217;t think a Black engineer would go over well with Southern clients (all true stories).<br /><br />There&#8217;s almost no way<sup>1</sup> to write about picking people without getting some heartfelt &#8220;thank you for recognizing my worth&#8221; responses. And some invective from people who feel you&#8217;re saying that you would pass them over. The fact is, there&#8217;s some unpleasant dried dog food in every post about interviews and hiring. Even if you pick something you think is obvious and unassailable.<br /><br /><strong>Delicious chunks of meat!</strong><br /><br />Of course, some programmers just eat the delicious meat and ignore the kibble. Look! A tasty programming problem!<br /><br />I&#8217;m one of these. What was my first thought when I saw a certain notorious screening question? I thought, &#8220;Hmmm&#8230; Instead of a loop with three conditions, this could be expressed as the <em>composition</em> of three functions, let&#8217;s try writing it that way.&#8221;<sup>2</sup> A tasty chunk of thinking about programming meat!<br /><br />You know, it never even occurred to me to wonder whether I fail the test and be rejected and be cast out of the herd.<sup>3</sup> I mean, honestly, was the original author interviewing me for real? No! So why eat the dry dog food? Honestly??<br /><br />But in even the most trivial problem there&#8217;s some meaty thinking to enjoy. Composing functions. Yummy.<br /><br /><strong>Covered in Gravy</strong><br /><br />Based on responses, <em>the overwhelming majority of readers of this blog are Sages</em>.<br /><br />Most people respond to a mixture of dried kibble and meaty chunks friskily, wagging their tails and leaping about with programming solutions and discussion about how best to solve the problem. Yummy stuff indeed.<br /><br />Some people might wonder if we&rsquo;re playing <a href="http://www.codinghorror.com/blog/archives/000804.html">Stairway to Heaven</a>. Of <em>course</em> if you walk into a music shop and yell &ldquo;nobody can play <a href="http://www.jacop.net/sounds/portraitoftracy_early.mp3">Portrait of Tracy</a>,&rdquo; everyone with a bass is going to start hitting harmonics.<br /><br />That isn&rsquo;t because we&rsquo;re insecure and need to prove ourselves. It&rsquo;s because we love playing and you just named a tune.<br /><br />What can I say, I&rsquo;m delighted with how many people love to play music. And I&rsquo;m delighted with how many programmers love to program. For its own sake.<br /><br />So thank you all for reminding me that life is all about the tasty chunks and delicious gravy.<br /><br />I really appreciate it. Thank you. Especial thanks to Tom and Eric for constantly telling us all about the tender and sublime taste of Haskell. It&#8217;ll be on the menu one of these days.<br /><br />Wonderful, the universe is covered in gravy!<br /><br /><hr /><br /><ol><li>Well, there is <em>one</em> way to write about picking people without offending anyone: if you really say nothing at all. For example: <em>At NiceCo, we conduct our interviews as conversations. We discuss each candidate&#8217;s experience and accomplishments, we canvas their views and share our objectives with them, working collaboratively to identify the most appropriate contribution they can make to the team&#8217;s success.</em><br /><br />Now see, you can&#8217;t criticize that because it didn&#8217;t actually say anything. Maybe it&#8217;s a wonderful process involving nice people, or maybe what really happens is that they decide whether to hire you in the first thirty seconds based on some triviality like whether you have body odour. If you don&#8217;t say anything, there&#8217;s no kibble and no meat.<br /><br />It&#8217;s an empty dish.<br /><br />This does not mean it&#8217;s a bad process or a bad statement. But the process isn&#8217;t reproducible from the statement alone. That&#8217;s the exact sense in which I say that the statement is empty.</li><br /><li>This separates the concern of how to generate the list from the concern of how to transform the list. Someone posted a <a href="http://programming.reddit.com/info/173mt/comments">variation</a> with different conditions: you can simply generate a new transformation function by composing two of the exiting functions with two new functions, more or less. And if someone asked for the same thing in Ancient Rome, you could write a different generator that generated the numbers from <code>I</code> to <code>C</code>.</li><br /><li>Don&#8217;t bother writing to say that my confidence is the reason why: I recall failing a technical interview when I brain cramped and was unable to write a program to print the first 100 prime numbers. I&#8217;m not that smart.</li><br /></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/archives/labels/passion.html">passion</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/programmers-are-sages.html" title="permanent link">1:23 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		
			
				<div class="DateHeader">Thursday, March 01, 2007</div>
			

			<div class="Post"><a name="8010714598243445328">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/thank-you-for-writing-such-heartfelt.html" title="permanent link">Thank you for writing such a heartfelt critique of the Fizzbuzz screening question</a></span>
					<div style="clear:both;"></div>Dear <a href="http://burningbird.net/">Shelley Powers</a>:<br /><br />Thank you for writing such a <a href="http://burningbird.net/technology/perfect-example/">heartfelt critique</a> of the <a href="http://raganwald.github.com/2007/01/dont-overthink-fizzbuzz.html">Fizzbuzz</a> screening question. I&#8217;m not writing to argue with your observations: I think we both agree with your points.<br /><br />First, I think we agree that is <em>not</em> true that 199 out of 200 programmers cannot actually program. Anyone who draws this conclusion from observing that 199 out of 200 (or any lesser ratio down to 1 out of 2) applicants for a programming job cannot program has omitted a very simple analysis.<br /><br />Second, I think we agree that it is <em>not</em> necessary to ask screening questions, and that interviewers who fail to take advantage of alternatives when they are easily available is unprepared.<br /><br />Third, I think we agree that some people place far too much emphasis on a screening question like Fizzbuzz, trying to extract all sorts of inferences about someone&#8217;s professional software development capabilities form what is&#8212;in every respect&#8212;a toy problem with almost no relationship to the work we do on a daily basis.<br /><br />Fourth, I think we agree that some excellent candidates will feel anxiety in an interview situation, and that their &#8220;performance&#8221; on a test in front of a panel of interviewers will fall short of their performance under workplace conditions. And I certainly agree with your premise that workplace pressure is often not the same thing as performance anxiety.<br /><br />All of my comments below are based on the premise that we are talking about &#8220;blind&#8221; applicants, people who have responded to a posting or people with CVs up on a job board.<br /><br /><strong>Can 199 out of 200 programmers actually write programs?</strong><br /><br />Let&#8217;s perform this simple thought experiment (if you know anyone who is single and actively seeking a partner, they can carry out the experiment for real and report their results to us).<br /><br />We register with a <a href="http://www.lavalife.com/">dating or personals site</a>. We use the search facility to perform a fairly simple screen for &#8220;qualifications&#8221; like age, gender and gender orientation (presuming you care). Now, we contact every single person matching our search. How many are worth a second date? How many are, let&#8217;s be honest, completely unready to date?<br /><br />After a few months of &#8220;dating,&#8221; people can become very cynical. &#8220;Where are all the good men/women/womyn?&#8221; They plaintively ask. The answer, we all know, is that good people are rarely looking. They are already in relationships. If they become single, after a reasonable period to recover from their experience, they date very briefly and then get into another relationship. They have a good network of friends and family that introduce them to eligible mates, so they have very little need for dating web sites.<br /><br />People with &#8220;issues,&#8221; on the other hand, spend a lot of time dating and searching for mates but relatively less time in relationships. Their friends and family are reluctant to introduce them to potential partners because, deep down, their friends and family know they are not ready.<br /><br />The net result is that on a dating site, the majority of the people looking for mates are not the people you want to meet. And if you try to judge people as a whole from dating sites, you will get a poorly skewed distribution. It is not a <em>representative sample</em>.<br /><br />The fact is, the vast majority of people are wonderful partners. You cannot judge people as a whole from the people you find looking for blind dates.<br /><br />And the vast majority of programmers <em>can</em> program.<br /><br />It&#8217;s understandable that someone interviewing programmers from the available pool (like r&eacute;sum&eacute; boards or blind submissions to the company&#8217;s <a href="mailto:jobs@devtopia.com">jobs@bigco.com</a> email address) will become cynical and wonder &#8220;where are all the good programmers?&#8221; But it&#8217;s wrong to conclude that the vast majority of programmers are incompetent based on observations of people looking for programming jobs.<br /><br /><strong>Is a screening question mandatory?</strong><br /><br />If there is no reason to worry that someone may not be an outstanding, qualified programmer, it is appropriate to screen them before investing time and energy in a full interview. Just as an applicant ought to be carefully screening the companies where she submits her CV. Are there alternatives to a screening question like Fizzbuzz? Of course there are.<br /><br />Before I touch on a few, let me describe one that is not. Years of experience indicated on the CV, even if not falsified, is <em>not</em> evidence that an applicant can actually perform the work in a competent fashion. They must still be screened and interviewed.<br /><br />It&#8217;s a paradox related to the dating analogy: if someone has five or more years of experience, why are they looking for a job? Why haven&#8217;t they compiled a network of friends and contacts? For five straight years recruiters have been calling them every week offering them a job. Why haven&#8217;t the recruiters found them a new position?<br /><br />This person may be an incredible find who is looking due to unusual circumstances. Or they may be a wonderful developer with poor networking skills. But they may also be incompetent, and that&#8217;s the reason their friends, contacts, and recruiters haven&#8217;t placed them in a job.<br /><br />So what alternatives do we have to asking a screening question? The best alternatives are <em>entirely within the candidate&#8217;s control.</em><br /><br />First, a candidate can belong to the &#8220;Insider&rsquo;s Club.&#8221; Very simply, candidates who do not wish to be asked screening questions should only go on interviews where there has been a warm, personal referral from a trusted friend. I don&#8217;t mean Joe told you that Bob&#8217;s company is hiring and Bob sends your CV to HR. I mean you know Greta well and she takes you to lunch with Gwen, who is the hiring manager.<br /><br />Not everyone is a great people person. That&#8217;s why it helps to have nature or nurture on your side. But everyone <em>can</em> become a better networker through practice. And nearly everyone should. Not just to avoid screening questions, but because a regular lunch with Greta is fun, and playing Ultimate with Joe&#8217;s team on Tuesday nights is a good workout.<br /><br />If an interviewer still insists on screening such warm referrals&#8230; I don&#8217;t know what to say about that.<br /><br />Second, I like your proposal that candidates bring samples of their work to interviews:<br /><br /><blockquote>Having candidates bring in samples of code and having the interviewer and interview team review such, and question why decisions were or weren&#8217;t made is an excellent way of getting insight into the person&#8217;s problem solving skills.<br /></blockquote><br />For the last decade I have carried a portfolio to interviews with <a href="http://flickr.com/photos/raganwald/182405038/">code samples</a>, <a href="http://flickr.com/photos/raganwald/182405018/">product brochures and awards</a>, <a href="http://flickr.com/photos/raganwald/182404868/">references</a>, and other opportunities for the type of interaction you suggest. I would love it if every candidate brings such a portfolio to me when I&#8217;m interviewing them.<br /><br />Even though I suggest it in nearly every invitation to an interview, most candidates show up with nothing except an eager expression on their face. I wish they would listen to you on this subject. No matter, by the time they have arrived I have already Googled them to see what they have on their home page, what they&#8217;ve written on their blog, and what they&#8217;ve contributed to OSS. Just as you suggest.<br /><br />Alas, I often come up empty. (Not always: one candidate arrived with a book&#8230; that he had written! Another brought an actual shrink-wrapped Adobe product he had a part in developing). But note that <em>you</em> have a blog&#8230; I would never need to ask you about Fizzbuzz, I would much rather ask you about what you have written.<sup>1</sup> <br /><br />So candidates can avoid a lot of screening questions by blogging, contributing to open source, participating intelligently in on line professional forums, and bringing samples to interviews.<br /><br />If an interviewer wants to ask me to write Fizzbuzz after reviewing my code that implements tail call optimization in Scheme&#8230; let&#8217;s just say that I will be amused.<br /><br />Root of minus one, what I actually do in many cases, especially with new graduates, is mail people a problem. They can work on it in their own time without any pressure and get back to me when they have a solution. I have posted one such problem on my blog: <a href="http://raganwald.github.com/2007/01/please-design-deck-of-cards-in-java.html">designing a deck of cards</a>.<br /><br />I&#8217;m still waiting for the candidate who has Googled <em>me</em> before an interview and comes prepared with code for a deck of cards. That person I would hire: even if they copied the code off the internet, they have initiative and will make a contribution somewhere!<br /><br />The work at home problem is still used to screen people out, so it&#8217;s kind of unfair to lump it under &#8220;ways to avoid a screening question.&#8221; But it isn&#8217;t a screening question in the sense that I plan on drill down and ask candidates questions about their code in a face to face meeting.<br /><br />In some ways it&#8217;s worse than a screening question in the sense that it requires a larger investment on the part of the candidate and there&#8217;s more pressure to do well. It&#8217;s not just enough that it work, it must somehow <em>please</em> the interviewer.<br /><br />I personally find that tough, more on that a few headings below.<br /><br /><strong>Is the screening question a significant predictor of talent?</strong><br /><br />If someone doesn&#8217;t have a warm referral, and they don&#8217;t have the type of material you suggest, I need to know if they&#8217;re the person on their CV. Something dead simple like Fizzbuzz is impossible to screw up in an interview. I actually don&#8217;t believe <em>you</em> would fail this in an actual interview, even with your disclaimer.<br /><br />But let&#8217;s pretend that I was too busy to Google you and you forgot to bring some samples and I ask you to write some code or diagram something. Let me be very clear: I&#8217;m not judging you on how well you write it, or whether you are nervous. Or even a trivial &#8220;nit&#8221; like whether you start at zero or forget that numbers divisible by fifteen should print &#8220;fizzbuzz.&#8221;<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/047012167X?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=047012167X"><img border="0" src="http://raganwald.github.com/assets/images/old//programming_interviews_exposed.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=047012167X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br />As Shelley points out, <em>NASA, the military, and other organizations training people for high risks jobs spend so much time in simulation because they want the tasks to be so ingrained that in a stress situation, the people&#8217;s responses are almost automatic.</em><br /><br /><a href="http://www.amazon.com/gp/product/047012167X?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=047012167X">Programming Interviews Exposed</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=047012167X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> takes you through actual programmer interview situations&#8212;fifty of them&#8212;so that you&#8217;ll be prepared to win the job. If you want to ace your next interview, start with this book.<br /><br /></div>And I&#8217;m not going to put you on a pedestal if you write it in Haskell, or use recursion, or somehow torture Perl&#8217;s regular expression engine into doing the work. Although some interviewers insist that you write such tests in the lingua franca of their office, I always ask a candidate to write programming tests in whatever language they find easiest. PHP is acceptable.<br /><br />All I&#8217;m trying to do is separate you from the people who don&#8217;t know that you want a loop (or recursion, or a range initializer, or whatever) and can&#8217;t even get started. This is a very Boolean gate.<br /><br />When it&#8217;s done we&#8217;re <em>not</em> going to have along chat about your approach. I may even stop you before you&#8217;re finished if it looks like you know what you&#8217;re doing. I don&#8217;t want to waste time on it: once I know you aren&#8217;t impersonating the person on your CV, I want to forget about Fizzbuzz as fast as humanly possible and get to the real interview.<br /><br />So really, the important thing about a screening question is to remember that it&#8217;s only a screening question. It&#8217;s not a be-all and end-all opportunity to judge a candidate&#8217;s coding style, or ability to elicit requirements, or cultural compatibility.<br /><br />I&#8217;m not going to narrow my eyes into slits and demand that you &#8220;find the bug.&#8221; I&#8217;ll glance over your one page of code and then turn it face down. Or I&#8217;ll erase the whiteboard. And move on.<br /><br /><strong>Do good people really get anxious enough to fail screening questions?</strong><br /><br />I agree that good people can fail a screening test from time to time. Do you want to hear a story about the time I was given a lukewarm referral into a company and somehow I was unable to write a program to print out the first one hundred prime numbers? My contact cursed me for choosing that day to have a brain cramp and devaluing his credibility as a judge of talent. We all have our days&#8230; this kind of thing keeps my feet firmly on the ground.<br /><br />Every single technique has some kind of false negative. Interviewing is a statistical model: you employ a number of techniques in the aim of making sure you don&#8217;t accidentally toss out a great person or hire a duffer by mistake.<br /><br />From my experience, the most important thing is not to fall prey to the mistake of making up your mind in the opening sixty seconds of an interview and using the remaining time to justify your prejudices. There are people with my experience&#8212;perhaps even me&#8212;who are duds. There are people with a funny accent or perhaps with experience in a <a href="http://en.wikipedia.org/wiki/MUMPS">programming language you despise</a> who are brilliant thinkers and excellent communicators.<br /><br />A good interview requires an open mind.<br /><br />This is why the title of my own post on the subject of Fizzbuzz was <a href="http://raganwald.github.com/2007/01/dont-overthink-fizzbuzz.html">Don&#8217;t overthink Fizzbuzz</a>. It&#8217;s just one extremely brief part of a process that takes multiple meetings and many hours when I am looking for a great team mate. But that being said, I still look for people who can finish the problem, no matter how elegant or haphazardly they do it.<br /><br />I can tell you what frightens <em>me</em> more than another &#8220;print the first one hundred primes&#8221; problem:<br /><br />What frightens me is an interviewer cross-examining me with no apparent system or objective. Perhaps someone who has already pre-judged me as superficial because I brought code samples on a Macintosh instead of a Dell. Or who ignores my Java experience to spend the entire interview grilling me about how I could use an allegedly &#8220;unsafe&#8221; language like Ruby.<br /><br />I personally find testing of any kind&#8212;whether a formal test like a programming problem or an informal test like an interview&#8212;produces anxiety. What increases the anxiety for me is not knowing how the test is graded. It&#8217;s like being asked to write a program without requirements from the client. That&#8217;s very stressful.<br /><br />Quite honestly, this is a major flaw with the way some people administer screening questions. They ask you to write a program that does such-and-such. But they don&#8217;t say anything else. Are they looking for unit tests? Build scripts? Do they want golf-like brevity of code? Or do they want you to baby. talk. the. code. so. that. any. body. can. mouth. the. symbols. one. by. irritating. one.? Do they want comments from top to bottom? Or just comments to explain <em>why not what</em>?<br /><br />Faced with this anxiety, a lot of candidates feel like they are playing &#8220;Guess the program I&#8217;m thinking of.&#8221; They worry that the interviewer is thinking of the one perfect answer (I wonder if it&#8217;s by strange co&iuml;ncidence exactly what the interviewer would write themselves?). The candidate <span style="font-style:italic;">can</span> think of a few things to write, but the main problem is choosing the right thing to write.<br /><br />I personally think that the anxiety can be reduced by being very specific about the problem and what is being tested. I think it&#8217;s not just anxiety-provoking but outright harmful (to the interviewee <em>and</em> to the interviewer) to say little or nothing beyond the desired output (fizz&#8230; buzz&#8230; primes&#8230;) but attempt to draw conclusions about a candidate based on the code they wrote on the spur of the moment with no further guidance.<br /><br />I agree it&#8217;s ridiculous to expect that the code for Fizzbuzz would resemble production code for a mission-critical web application, and one of the sources of anxiety for some candidates might be trying to &#8220;complexify&#8221; such a toy program to make it look like it belongs on BigCo&#8217;s heavy iron.<br /><br /><strong>Thank you</strong><br /><br />Once again, thank you for taking the time to remind everyone not to glorify screener questions like Fizzbuzz. Although I have written this partly in support for your points and partly in defence of my own interviewing practices, your post has reminded me to be extra observant the next time I am interviewing. I do not want to let a good person become nervous: even if they &#8220;pass,&#8221; the extra pressure will put the meeting off stride.<br /><br />I also want to thank you for your implied criticism of the tone of many blog posts. Yes, I have been frustrated with the quality of applicants the last few times I have been interviewing. But nevertheless, I need to be more clear about the difference between saying that 199 out of 200 <em>applicants</em> cannot code and 199 out of 200 working programmers cannot code.<br /><br />Cordially,<br /><br />Reginald Braithwaite<br /><br />p.s. I am going on my very first diving holiday later this month. Your links to the ocean&#8217;s wonders are a timely discovery. Thanks! I am going with my partner, whom I happened to meet on a dating site! So I know that good people are looking and that they deserve the benefit of the doubt until proven otherwise, no matter what the previous 199 dates were like.<br /><br /><hr /><ol><li>For example (and I say this gently, I am very pleased with your post), I might probe into whether you are the type who &#8220;does not suffer fools gladly,&#8221; based on the use of phrases like &#8220;arrogant twats&#8221; and &#8220;idiocy travels up the food chain&#8221; in your own post. Just as, I am sure, you would have plenty of questions to ask me if you took a few minutes to peruse my own blog.</li><br /></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/archives/labels/jobs.html">jobs</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/thank-you-for-writing-such-heartfelt.html" title="permanent link">12:02 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			

		


	</div>







	<div id="rightcontent">

		<div class="SideBarTitle"><a href="http://braythwayt.com">Reg Braithwaite</a></div>

		<br />

		<br />

		<div class="SideBarTitle">Recent Writing</div>

                <a href="http://homoiconic.com">Homoiconic</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Share</div>

                <a href="http://github.com/raganwald/rewrite_rails">rewrite_rails</a> /

                <a href="http://github.com/raganwald/andand">andand</a> /

                <a href="http://raganwald.com/assets/media/source/unfold.rb.html">unfold.rb</a> /

                <a href="http://raganwald.com/assets/media/source/string_to_proc.rb.html">string_to_proc.rb</a> /

                <a href="http://raganwald.com/assets/media/source/dsl_and_let.html">dsl_and_let.rb</a> /

                <a href="http://raganwald.com/assets/media/source/comprehensions.html">comprehension.rb</a> /

                <a href="http://raganwald.com/assets/media/source/lazy_lists.html">lazy_lists.rb</a>

		<br />

		<br />

		<div class="SideBarTitle">Beauty</div> <!-- idioms -->

		<a href="http://raganwald.github.com/2008/04/is-strictly-equivalent-to.html">IS-STRICTLY-EQUIVALENT-TO-A</a> /

		<a href="http://raganwald.github.com/2008/03/spaghetti-western-coding.html">Spaghetti-Western Coding</a> /

		<a href="http://raganwald.github.com/2007/12/golf-is-good-program-spoiled.html">Golf is a good program spoiled</a> /

		<a href="http://raganwald.github.com/2007/11/programming-conventions-as-signals.html">Programming conventions as signals</a> /

                <a href="http://raganwald.github.com/2007/10/too-much-of-good-thing-not-all.html">Not all functions should be object methods</a>

<br/><br/>

                <a href="http://raganwald.github.com/2007/05/not-so-big-software-application.html">The Not So Big Software Design</a> /

		<a href="http://raganwald.github.com/2007/04/writing-programs-for-people-to-read.html">Writing programs for people to read</a> /
                
		<a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html">Why Why Functional Programming Matters Matters</a> /

		<a href="http://raganwald.github.com/2007/02/but-y-would-i-want-to-do-thing-like.html">But Y would I want to do a thing like this?</a>

		<br />

		<br />

		<div class="SideBarTitle">Work</div>

                <a href="http://raganwald.github.com/2008/04/single-most-important-thing-you-must-do.html">The single most important thing you must do to improve your programming career</a> /

                <a href="http://raganwald.github.com/2008/02/naive-approach-to-hiring-people.html">The Na&iuml;ve Approach to Hiring People</a> /

                <a href="http://raganwald.github.com/2008/01/no-disrespect.html">No Disrespect</a> /

		<a href="http://raganwald.github.com/2006/11/take-control-of-your-interview.html">Take control of your interview</a> /

		<a href="http://raganwald.github.com/2006/08/three-tips-for-getting-job-through.html">Three tips for getting a job through a recruiter</a> /

		<a href="http://raganwald.github.com/2006/06/my-favourite-interview-question.html">My favourite interview question</a>

                <br/>

                <br/>



                <div class="SideBarTitle">Buy Raganwald a Coffee</div>
				
                       <div style="float: right; width: 64px; margin-left: 6px; font-style: italic; text-align: center; font-size: 80%;"><form name="DoubleEspresso" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_donations">
<input type="hidden" name="business" value="raganwald@gmail.com">
<input type="hidden" name="item_name" value="Buy Raganwald a Darkhorse Double Espresso">
<input type="hidden" name="item_number" value="DoubleEspresso">
<input type="hidden" name="amount" value="3.15">
<input type="hidden" name="no_shipping" value="0">
<input type="hidden" name="logo_custom" value="http://raganwald.github.com/assets/images/old//coffeecup.png">
<input type="hidden" name="no_note" value="1">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="tax" value="0">
<input type="hidden" name="lc" value="CA">
<input type="hidden" name="bn" value="PP-DonationsBF">
<input type="image" src="http://raganwald.github.com/assets/images/old//coffeecup.png" width="64" height="64" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form></div>If you enjoy reading my weblog, please consider <a href="#"
title="Buy Raganwald a darkhorse double espresso, for $3.15" onclick="javascript: document.DoubleEspresso.submit();">buying me a Darkhorse Double Espresso, for just $3.15</a>
                       Thank you!

		<br />

		<br />



		<div class="SideBarTitle">Management</div>

		<a href="http://raganwald.github.com/2008/02/exception-handling-in-software.html">Exception Handling in Software Development</a> /

		<a href="http://raganwald.github.com/2007/11/what-if-powerful-languages-and-idioms.html">What if powerful languages and idioms only work for small teams?</a> /

                <a href="http://raganwald.github.com/2007/08/bricks.html">Bricks</a> /

                <a href="http://raganwald.github.com/2007/06/which-theory-first-evidence.html">Which theory fits the evidence?</a> /

                <a href="http://raganwald.github.com/2007/06/still-failing-still-learning.html">Still failing, still learning</a> /

		<a href="http://raganwald.github.com/2005/01/what-ive-learned-from-failure.html">What I&rsquo;ve learned from failure</a>

		<br />

		<br />

		<div class="SideBarTitle">Notation</div> <!-- languages -->

		<a href="http://raganwald.github.com/2008/06/what-does-do-when-used-as-unary.html">The unary ampersand in Ruby</a> /

		<a href="http://raganwald.github.com/2008/02/1100inject.html">(1..100).inject(&amp;:+)</a> /

                <a href="http://raganwald.github.com/2007/10/challenge-of-teaching-yourself.html">The challenge of teaching yourself a programming language</a> /

                <a href="http://raganwald.github.com/2006/11/significance-of-meta-circular_22.html">The significance of the meta-circular interpreter</a> /
                
                <a href="http://raganwald.github.com/2007/08/block-structured-javascript.html">Block-Structured Javascript</a> /

                <a href="http://raganwald.github.com/2007/02/haskell-ruby-and-infinity.html">Haskell, Ruby and Infinity</a> /

		<a href="http://raganwald.github.com/2007/01/closures-and-higher-order-functions.html">Closures and Higher-Order Functions</a>

		<br />

		<br />

		<div class="SideBarTitle">Opinion</div>

		<a href="http://raganwald.github.com/2008/05/why-apple-is-more-expensive-than-amazon.html">Why Apple is more expensive than Amazon</a> /

		<a href="http://raganwald.github.com/2008/04/why-we-are-biggest-obstacle-to-our-own.html">Why we are the biggest obstacles to our own growth</a> /

		<a href="http://raganwald.github.com/2008/03/process-is-to-software-as-software-is.html">Is software the documentation of business process mistakes?</a> /

		<a href="http://raganwald.github.com/2007/09/we-have-lost-control-of-apparatus.html">We have lost control of the apparatus</a> /

		<a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-i.html">What I&rsquo;ve Learned From Sales</a>
                <a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-i.html" title="What I've Learned From Sales, Part I: Don't Feed the Trolls">I</a>, 
                <a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-ii.html" title="What I've Learned from Sales, Part II: Wanna Bet?">II</a>, 
                <a href="http://raganwald.github.com/2007/10/how-to-use-blunt-instrument-to-sharpen.html" title="What I've Learned from Sales, Part III: How to use a blunt instrument to sharpen your saw">III</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Whimsey</div>

                <a href="http://raganwald.github.com/2008/05/narcissism-of-small-code-differences.html">The Narcissism of Small Code Differences</a> /

		<a href="http://raganwald.github.com/2008/01/billy-martins-technique-for-managing.html">Billy Martin&rsquo;s Technique for Managing his Manager</a> /

		<a href="http://raganwald.github.com/2007/10/three-stories-about-tao.html">Three stories about The Tao</a> /

		<a href="http://raganwald.github.com/2007/02/programming-language-stories.html">Programming Language Stories</a> /

		<a href="http://raganwald.github.com/2005/07/why-you-need-degree-to-work-for-bigco.html">Why You Need a Degree to Work For BigCo</a>

		<br />

		<br />

		<div class="SideBarTitle">History</div>

		
			<a href="http://raganwald.github.com/archives/2004_06_01_archive.html">06/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_07_01_archive.html">07/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_08_01_archive.html">08/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_09_01_archive.html">09/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_10_01_archive.html">10/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_11_01_archive.html">11/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_12_01_archive.html">12/04</a> /
		
			<a href="http://raganwald.github.com/archives/2005_01_01_archive.html">01/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_02_01_archive.html">02/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_03_01_archive.html">03/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_04_01_archive.html">04/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_06_01_archive.html">06/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_07_01_archive.html">07/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_08_01_archive.html">08/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_09_01_archive.html">09/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_10_01_archive.html">10/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_11_01_archive.html">11/05</a> /
		
			<a href="http://raganwald.github.com/archives/2006_01_01_archive.html">01/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_02_01_archive.html">02/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_03_01_archive.html">03/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_04_01_archive.html">04/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_05_01_archive.html">05/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_06_01_archive.html">06/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_07_01_archive.html">07/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_08_01_archive.html">08/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_09_01_archive.html">09/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_10_01_archive.html">10/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_11_01_archive.html">11/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_12_01_archive.html">12/06</a> /
		
			<a href="http://raganwald.github.com/archives/2007_01_01_archive.html">01/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_02_01_archive.html">02/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_03_01_archive.html">03/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_04_01_archive.html">04/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_05_01_archive.html">05/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_06_01_archive.html">06/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_07_01_archive.html">07/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_08_01_archive.html">08/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_09_01_archive.html">09/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_10_01_archive.html">10/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_11_01_archive.html">11/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_12_01_archive.html">12/07</a> /
		
			<a href="http://raganwald.github.com/archives/2008_01_01_archive.html">01/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_02_01_archive.html">02/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_03_01_archive.html">03/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_04_01_archive.html">04/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_05_01_archive.html">05/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_06_01_archive.html">06/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_07_01_archive.html">07/08</a> /
		
		<script type="text/javascript" language="Javascript">if (location.href.indexOf("archive")!=-1) document.write("<strong><a href=\"http://raganwald.github.com/index.html\">Current Posts</a></strong>");</script>
		<br/></p>
		<br/>

		<p class="profile-link"><a href="http://feeds.raganwald.com/raganwald"><img src="http://feeds.raganwald.com/~fc/raganwald?bg=&amp;fg=&amp;anim=0" height="26" width="88" style="border: 0pt none ; vertical-align: middle;" alt="" /></a>&nbsp;<a href="http://feeds.raganwald.com/raganwald" rel="alternate" type="application/rss+xml"><img src="http://www.raganwald.com/fb/images/pub/feed-icon16x16.png" alt="" style="border: 0pt none ; vertical-align: middle;"></a>&nbsp;<a href="http://feeds.raganwald.com/raganwald" rel="alternate" type="application/rss+xml">Subscribe in a reader</a></p>

	</div>





	<div style="visibility: hidden">
		
		
		<script type="text/javascript" src="http://www.assoc-amazon.com/s/link-enhancer?tag=raganwald001-20">
		</script>
		<noscript>
			<img src="http://www.assoc-amazon.com/s/noscript?tag=raganwald001-20" alt="" />
		</noscript>
	</div>

</body>
</html>