// Generated by CoffeeScript 1.6.1
(function() {
  var FlockingBird, Mayzie, OneRight, TwoRight, any, _;

  any = (_ = require('underscore')).any;

  FlockingBird = (function() {

    function FlockingBird(greater, lesser) {
      this.greater = greater != null ? greater : [];
      this.lesser = lesser != null ? lesser : [];
    }

    FlockingBird.prototype.standsAgainst = function(rival) {
      var case1, case2, courtingBird;
      courtingBird = this;
      case1 = any(this.greater, function(gb) {
        return rival.standsAgaint(gb);
      });
      case2 = any(rival.lesser, function(lb) {
        return lb.standsAgainst(courtingBird);
      });
      return (!case1) && (!case2);
    };

    FlockingBird.prototype.confused = function() {
      var case1a, case1b, case2,
        _this = this;
      case1a = any(this.lesser, function(lb) {
        return lb.confused();
      });
      case1b = any(this.greater, function(gb) {
        return gb.confused();
      });
      case2 = any(this.lesser, function(lb) {
        return any(_this.greater, function(gb) {
          return lb.standsAgainst(gb);
        });
      });
      return !!(case1a || case1b || case2);
    };

    return FlockingBird;

  })();

  describe("Lazy Mayzie", function() {
    var Mayzie;
    Mayzie = new FlockingBird();
    return it("should not be confused", function() {
      return expect(Mayzie.confused()).toEqual(false);
    });
  });

  Mayzie = new FlockingBird();

  OneRight = new FlockingBird([], [Mayzie]);

  describe("a flock with two birds", function() {
    it("should not contain confused birds", function() {
      expect(Mayzie.confused()).toEqual(false);
      return expect(OneRight.confused()).toEqual(false);
    });
    return it("should have a linear pecking order", function() {
      expect(OneRight.standsAgainst(Mayzie)).toEqual(true);
      return expect(Mayzie.standsAgainst(OneRight)).toEqual(false);
    });
  });

  TwoRight = new FlockingBird([], [OneRight]);

  describe("a flock with three birds", function() {
    it("should not contain confused birds", function() {
      expect(Mayzie.confused()).toEqual(false);
      expect(OneRight.confused()).toEqual(false);
      return expect(TwoRight.confused()).toEqual(false);
    });
    return it("should have a linear pecking order", function() {
      expect(Mayzie.standsAgainst(OneRight)).toEqual(false);
      expect(Mayzie.standsAgainst(TwoRight)).toEqual(false);
      expect(OneRight.standsAgainst(Mayzie)).toEqual(true);
      expect(OneRight.standsAgainst(TwoRight)).toEqual(false);
      expect(TwoRight.standsAgainst(Mayzie)).toEqual(true);
      return expect(TwoRight.standsAgainst(TwoRight)).toEqual(true);
    });
  });

  FlockingBird.prototype.equals = function(otherBird) {
    return !(this.standsAgainst(otherBird) || otherBird.standsAgainst(this));
  };

  describe("equality", function() {
    it("should be true for Mayzie vs Mayzie", function() {
      return expect(Mayzie.equals(Mayzie)).toEqual(true);
    });
    it("should be true for OneRight vs OneRight", function() {
      return expect(OneRight.equals(OneRight)).toEqual(true);
    });
    return it("should be false for Mayzie vs OneRight", function() {
      expect(Mayzie.equals(OneRight)).toEqual(false);
      return expect(OneRight.equals(Mayzie)).toEqual(false);
    });
  });

}).call(this);
