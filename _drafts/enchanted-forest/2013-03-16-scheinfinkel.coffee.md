---
layout: default
tags: [coffeescript, combinators]
title: SchÃ¶nfinkel's Forest
categories: enchanted-forest
permalink: /enchanted-forest/scheinfinkel.html
published: false
---

### moses

Maude was not in the forest long before she noticed that it was an unusual forest. While there were many, many birds of all sorts flying here and there and singing noisily, she saw no animal tracks or droppings or other signs that anything other than bird and perhaps insects inhabited this place.

She walked along carefully, noting the many berries and fruiting trees. She wondered if these apparently edible treats contained some kind of opiate that induced insanity. Thinking it over, she decided not to eat anything just yet, so when she became hungry, she stopped, cleared some space, and made herself lunch with food she had packed.

After lunch she made herself a coffee, and the aroma drifted out into the forest. She took a sip and was just abut to take another when she heard a bird's call that sounded just like a human voice. She looked around, startled, but nobody was there, just a few birds pecking away at some breadcrumbs she had dropped.

She took another sip and heard the voice again. Was she dreaming?

She looked around carefully. Absolutely no people in any direction, just a few birds pecking at the earth. One had a particularly sparkling plumage and seemed larger than the others. It turned its head sideways, fixed her with its gaze, and opened its beak.

"Hello," it said.

Maude nearly dropped her coffee. The bird had spoken to her! Then she gathered her wits. No, that was not possible. Far more likely, she reasoned, that it was parroting something that it had heard from a person. Or from another bird that heard it from a person. Maybe these bird had passed snippets of human speech down to each other through generations, like the parrots in [a comic she enjoyed as a child](https://en.wikipedia.org/wiki/Red_Rackham's_Treasure).

She smiled and decided to play along.

"Hello, and how are you?"

The bird said nothing for a moment, then opened its beak again:

> Hello, I am Moses. It sure is great to get out of my nest! 

> Unaccustomed as I am to public speaking, I'd like to share with you a maxim I thought of the first time I met a mammal: Never trust a creature that can't fly![^mac]

[^mac]: [With loving nostalgia](https://www.youtube.com/watch?v=2B-XwPjn9YY&t=3m9s).

Maude stared, open-mouthed. Her brain felt like three people trying to squeeze through a doorway at the same time. One was the thought that she had somehow fallen under the spell of the forest and had gone mad. One was that this bird could talk and what a wondrous discovery she had made. And one was that she felt insulted that this gaudy popinjay had insulted her and she was eager to put it in its place.

After a while, the third won out and she pursed her lips. She forgot altogether that this might be a dumb bird merely parroting things it had heard.

"Well, Moses," she replied, "You should get out of your forest and see the world. For there are mammals that can fly. Sugar gliders are mammals and they inhabit forests much like yours. And there are bats, they fly very well and have echolocation to boot."

Moses[^moses] hopped for a moment and then spoke again. "Oh? I would be very interested to hear about the things outside of my forest. Tell me more."

Maude was amazed, but also curious. "I'd be delighted to tell you of things outside of your forest. But if we are to be friends, we must be equitable to each other. If I tell you of the world outside your forest, you must tell me about your forest so that we may both learn."

Moses considered. "Well that is very well with me," he said somewhat formally, "for most of my friends would say that it is essential to drive a bargain with me to stop talking about my forest. I love it so and have spend my life studying it."

Maude, perhaps under the influence of the enchanted forest, or perhaps caught up in strange circumstances, offered Moses some bread to eat, and they began to talk.

---

Moses spoke, preening himself proudly:

### songbirds

"All of us songbirds are descended from common ancestors. We have evolved various differences to suit our micro-habitats and temperaments, but we share a common behaviour. Each of us has a song we like to sing to attract a mate or warn others of our territory or communicate our feelings. We are sensitive to subtle variations in tone and pitch.

"But each of us has our own unique song. Mine, for example, brings to mind the sparkle of the sun on the water in a babbling brook."

And here Moses let out a raucous and intemperate cawing. Maude politely smiled. "Most scintillating!" she said, and Moses continued.

"Chicks learn the songs of their parents, and as they mature they develop their own song that is a combination of the songs their parents sing. One of the things I am researching is the connection between songs and variations. I conjecture that there are more possible songs than grains of sand on a riverbank.

"But my main interest is another thing. Each of us, when we hear the song of some bird, will call back the song of another bird. We are mostly great mimics. So if you sing to me the song of a Bluebird, I might sing back the song of a Robin. We all have our own particular habits of responses, and we are always consistent.

"If indeed I do respond to the song of a Bluebird with the song of a Robin, you can trust me to always respond to the song of a Bluebird with the song of a Robin. Now we are very aware of the birds in this forest, so I can tell you that if a you call out to a bird and it responds with a song, it is responding with the song of a bird that actually exists in the forest. And furthermore, every bird responds to every song of another bird.

"To a certain extend, a bird's  personality can be defined once you understand its particular habit of responses to songs. In fact, our entire society is governed by our responses to each other's songs, and my lifelong study has been the rules of behaviour of songbirds.

"For I have discovered that there are rules and that the consequences of these rules lead to some deep and fascinating insights into the nature of thought itself."

Maude thought Moses was very vain and was doubtful that songbirds in a forest held the key to understanding thought itself, but she didn't like to interrupt a good story, so she carried on listening politely.

<a href="http://www.flickr.com/photos/pepemichelle/3642644339/" title="Magnificent Bird of Paradise by mpujals, on Flickr"><img src="http://farm3.staticflickr.com/2435/3642644339_742f2269f8_b.jpg" alt="Magnificent Birds of Paradise"></a>

### the basis

"Look!" said Moses suddenly, "Do you see that?"

Maude saw a bird flying awkwardly through the trees. After several near misses, it ran headlong into a tree and feel to the ground, stunned. It then picked itself up and fluttered off, striking branches as it went.

Moses shook his head sadly. "That idiot!" he said. "Well, I might as well start with him. I would grow tired if I were to constantly say things like 'The song of a Cardinal' or 'The song of an Idiot,' so I will abbreviate matters. When I say that the Idiot's response to the Cardinal is the Cardinal, you will understand me to be speaking of the songs of the birds and that I mean that the Idiot's response to the song of the Cardinal is to sing the Song of the Cardinal."

Maude asked politely: "Is the Idiot's response to the Cardinal an actual Cardinal?"

"Yes," Moses continued, "and in fact, the Idiot's response to any bird's song is to sing that bird's song. He is a most unimaginative vocalist with no long-term memory. Not much more intelligent than a hairy creature."

Maude decided she was not going to allow Moses to malign her species at will. "I don't know where you get these ideas, but we mammals do have a few brains to rub together for warmth," she said. Moses considered.

"Okay," he said, "Here comes the Idiot again. I'd like to hear its own song. What song should I sing to it?"

Maude thought this a very simple question and answered immediately.

### maude's notation

"Very good!" said Moses, "I admit you are smarter than the Idiot, at least, I never could make him understand his own behaviour. But what is that you are scratching in the dust?"

"Oh," Maude explained, "I have a own notation for solving certain types of problems. To being with, I write:"

    describe "idiots", ->

      I = (x) -> x
    
"Meaning, that the Idiot, which I will call I for short, responds to any bird's song, denoted `x`, with that same bird's song, again `x`. I use `x`, `y`, `z`, `w`, and other letters for unknowns."

Maude carried on: "I like to make a note of what things mean with some examples, so I write:"
    
      it "should respond to any bird with the same bird", ->
      
        expect( I('polly') ).toEqual 'polly'

"I thought about it for a while and realized that the Idiot's response to itself must be its own song, so I also wrote:"

        expect( I(I) ).toEqual I
        
"And indeed, that is the case by your rule."

Moses hopped around a bit, staring at her writing for a few moments. "And what do you call this system of writing?"

"CoffeeScript," said Maude, "because when it gets complicated, I need to drink a lot of coffee to work it out by hand."[^cs] She laughed, but stopped when she realized that Moses either did not get the joke or was incapable of understanding humour.

"Actually," she said, "My uncle Brendan[^be] devised a notation for solving certain problems to deal with the appearance and behaviour of web spiders. He called it JavaScript, no doubt because of our family's coffee plantation business. My cousin Jeremy[^jeremy] liked Brendan's ideas, but found them awkward for certain classes of problems and streamlined it somewhat. He called his variation CoffeeScript, and he taught it to me."

[^cs]: These stories are written in [Markdown](http://daringfireball.net/projects/markdown/) and interpreted in place as [Literate CoffeeScript](http://coffeescript.org) files. They are translated to JavaScript and then [jasmine-node](https://github.com/mhevery/jasmine-node) is used to evaluate them as specifications.

[^be]: [Brendan Eich](http://brendaneich.com) is the inventor of JavaScript.

[^jeremy]: [Jeremy Ashkenas](http://www.ashkenas.com) invented CoffeeScript,

"Interesting," said Moses, "I wasn't going to mention it but I have a notation of my own. I would write: `Ia.a`, but if you prefer to use all those symbols, go right ahead."

### the kestrel

Suddenly a raptor swooped down and made a strike at the bumbling Idiot. But the Idiot was saved by its own awkwardness, for the raptor made a strike at where the Idiot out to be flying, but just at that moment the befuddled bird's wingtip was caught in a vine, and the raptor's strike missed.

The Idiot fumbled its way into some brambles and the raptor flew off. "What was that?" asked Maude.

"Ah!" said Moses, "That is a formidable bird, and I tend to refuse invitations to be the guest of honour at its dinner table... That is the Kestrel. It has an interesting behaviour..."
      
"You see," said Moses, "To understand the Kestrel you need to understand *fixation*, or what some call *constancy*. Some birds are such that they only ever respond with the song of a single bird. For example, a certain bird might only ever respond with the song of the Idiot. So if you call out a Bluebird to it, it will respond 'Idiot.' Then you call out 'Cardinal,' and it responds 'Idiot' again."

Maude nodded. "So what," she asked, "Is the significance of the kestrel?" Moses seemed annoyed. "Have some patience, land-crawler!" he snapped, "I was just about to get to that! The significance of the Kestrel is that he knows the song of every fixated bird in the forest!"

Maude must have been staring blankly, for Moses continued: "Meaning, if you call out the Cardinal to the Kestrel, he responds by singing the song of a bird that is fixated on the Cardinal."

Maude held up her hand to ask for time and scratched in the dirt for a bit. After writing and erasing her work for a while, she wrote:

    describe "Kestrels", ->

      K = (x) -> (y) -> x
      
Then she continued with Moses's example:

      it "responds to the Cardinal with a bird fixated on the Cardinal", ->
        
        C = 'Cardinal'
        R = 'Robin'
        B = 'Bluebird'
        FC = K(C)
        
        expect( FC(C) ).toEqual C
        expect( FC(R) ).toEqual C
        expect( FC(B) ).toEqual C
        expect( FC(FC) ).toEqual C
        
### hopeless egocentricity

Maude still didn't see the significance of the Kestrel, so Moses decided to test her intelligence. "Look," he said, "I will share with you something that I learned from the Magnificent Smullyan Bird.[^rs] Even as a chick the Smullyan Bird was magnificent, you could sing a note to him and he would sing back the exact note in perfect pitch.[^note] We expected great things of him and were not disappointed.

"Now it so happens that some birds are such that if you call out their own song to them, they call it right back to you. You saw one such bird, the Idiot. The Smullyan Bird calls such birds *egocentric*. Given the Kestrel and the Idiot, is there another egocentric bird in the forest?"

Maude scribbled with her notes for a few moments and then answered the question. Moses continued:

"The Smullyan Bird would call a bird *hopelessly egocentric* if it was the case that no matter what bird you called out to it, it would call back its own song. In other words, is there a bird that is *fixated on itself* in this forest?"

Maude needed a few more minutes to answer this question.

[^rs]: [Raymond Merrill Smullyan](https://en.wikipedia.org/wiki/Raymond_Smullyan) is an American mathematician, concert pianist, logician, Taoist philosopher, and magician. He has his own [Youtube channel](http://www.youtube.com/profile?user=rsmullyan&view=videos).

[^note]: This story is [taken from the Piano Society and other sources](http://mysite.verizon.net/vzeeaya7/raymondsmullyan/).

---

*Now it so happens that some birds are such that if you call out their own song to them, they call it right back to you. You saw one such bird, the Idiot. We call these* egocentric *birds. Given the Kestrel and the Idiot, is there another egocentric bird in the forest?*

*Next, a bird is* hopelessly egocentric *if it is the case that no matter what bird you call out to it, it calls back its own song. Given the Kestrel and the Idiot, is there a bird that is fixated on itself in this forest?*

---

Maude pondered these questions for a few minutes and intuitively decided that the answer must be **no**. The Kestrel seemed like a promising bird, but trying things like `K(K)` and variations on the same seemed to be going in the wrong direction.

"No," she said at last, "I do not think so, although proving that it is not the case is a little beyond me right now."

Moses clicked his beak and gazed at her. "You are right, the Kestrel and Idiot are not enough. There are a great many birds in the forest. We songbirds are territorial, although not particularly exclusive. Here in my territory, there are a few birds that make a permanent nest. In addition to the Kestrel and Idiot, I also have nesting in my territory a Bluebird, a Cardinal, and a Starling."

"They are very interesting. The Kestrel and Starling are good friends, I do believe that between them they are smart enough to solve any problem that can be solved, although for some reason they like to have the Idiot around to do mundane chores.[^SKI]

[^SKI]: See the [SKI Combinator Calculus](https://en.wikipedia.org/wiki/SKI_combinator_calculus)

"There *is* a hopelessly egocentric bird in the forest, but you will probably learn more about such things if you visit The Magnificent Smullyan Bird's territory. He has a Mockingbird[^mockingbird] there and he will tell you all about this wonderful creature.

[^mockingbird]: See [To Mock a Mockingbird](http://www.amazon.com/gp/product/B00A1P096Y/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=B00A1P096Y&linkCode=as2&tag=raganwald001-20)

"Let's head over there now, I'll introduce you."

Moses flew along, showing Maude the way to The Magnificent Smullyan Bird's Territory. As the were walking along, Maude saw the most curious sight: A small winged elephant perched on a nest.

![Horton Jr.](/assets/images/hortonjr.jpg)

### elephants and bowerbirds

"What is that!?"

Moses clicked his beak. "That is Horton Jr., or just plain Horton. I don't know why everyone is so fascinated with his appearance. He can barely fly, his beak is all rubbery, and he lacks any plumage of note. Mind you, he is something of an expert on certain subjects and I do consult him from time to time."

Maude asked about his expertise.

"Well, he does a lot of work playing with pebbles on vast grids that he lays out. He claims that by following certain rules, his pebbles can answer any question my Starling and Kestrel can answer."[^life]

[^life]: [Conway's Game of Life](https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)

Maude was interested. Pebbles?

"Well," Moses said, "I didn't mention this earlier, but we birds come in a few basic varieties."

"We all have songs, but some of us like to attract a mate with our excellent plumage, some with vigorous and intricate dancing, and a certain lesser class of bird likes to build a [bower](https://en.wikipedia.org/wiki/Bowerbird) out of various found objects."

For example, I could show you the Stuart's [Tombird](http://twitter.com/tomstuart). It builds an elaborate bower out of just one material, chips of red crystal. It is intelligent, and claims its chips of Ruby can do various tasks like count to one hundred or even write nonsensical words like "fizz" or "buzz."[^nothing]

[^nothing]: [Programming with Nothing](http://codon.com/programming-with-nothing)

"In any event," continued Moses, "We may as well say hello to Horton since we're here."

### horton jr.

Moses introduced Maude to Horton. After exchanging pleasantries, Maude asked Horton what kind of song he sang.

"I am not particularly interested in songs," said Horton, "I am working at the moment on bird sociology, particularly flocking birds. As you may know, some birds, like SchÃ¶nfinkel's Bright Bird and myself, are fairly solitary. Others like to live in large flocks."

"In most such flocks, there is a strict *pecking order*. What interests me is how such flocks behave when each bird is autonomous and there is no centralized control over the order of rank for the birds."

"I will show you," started Horton, scribbling some marks in the dirt with a stick he held in his trunk. Moses hastily intervened.

"Alas, Horton, we are on our way to see The Magnificent Smullyan Bird so that Maude can learn about hopeless egocentricity and do not have timeâ" Horton would hear nothing of it. "Nonsense! Egocentricity can wait, that is fascinating for gaudy plumage fanciers but serious birds pay attention to sociology."

"Sit. Pay attention. Listen."

Moses squawked but in the end, he and Maude settled down as Horton began to speak.

---

notes: